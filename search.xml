<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>前端对于B端业务场景</title>
      <link href="2023/09/14/base-%E5%89%8D%E7%AB%AF%E5%AF%B9%E4%BA%8EB%E7%AB%AF%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/"/>
      <url>2023/09/14/base-%E5%89%8D%E7%AB%AF%E5%AF%B9%E4%BA%8EB%E7%AB%AF%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>常见的B端产品具体业务和逻辑封装，例如，根据路由国际化翻译，覆盖UI框架主题<br>以下代码由vue3实现</p></blockquote><h3 id="国际化处理"><a href="#国际化处理" class="headerlink" title="国际化处理"></a>国际化处理</h3><blockquote><p>国际化，使B端Web能切换各种语言，通常使用i18n配置翻译文件，将路由路径和翻译结合方便维护同一页面的翻译</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由path -&gt; 语言包结构 ： /user/manage/list -&gt; user.manage.</span></span><br><span class="line"><span class="comment">//route.path需要根据业务自定义</span></span><br><span class="line"><span class="comment">//定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">i18nModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> route = useRoute()</span><br><span class="line">    <span class="keyword">return</span> route.path.substring(<span class="number">1</span>).replace(<span class="regexp">/\//g</span>, <span class="string">&#x27;.&#x27;</span>) + <span class="string">&#x27;.&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在具体demo.vue中使用</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; $t(i18nModule + <span class="string">&#x27;hello&#x27;</span>) &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  <span class="keyword">import</span> useI18nModule <span class="keyword">from</span> <span class="string">&#x27;@/hook/useI18nModule&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> &#123; i18nModule &#125; = useI18nModule()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="覆盖UI框架主题"><a href="#覆盖UI框架主题" class="headerlink" title="覆盖UI框架主题"></a>覆盖UI框架主题</h3><blockquote><p>使用element-plus时，需要根据UI设计图更改主题色，可参考<a href="https://element-plus.org/zh-CN/guide/theming.html">https://element-plus.org/zh-CN/guide/theming.html</a><br>可以直接更改element-plus的主题变量，也可以使用–el-xx-color:red覆盖原有组件变量</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@use</span> <span class="string">&#x27;element-plus/theme-chalk/src/mixins/function.scss&#x27;</span>as *;</span><br><span class="line"></span><br><span class="line"><span class="variable">$--colors</span>: (<span class="string">&#x27;primary&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#008cef</span>),</span><br><span class="line">  <span class="string">&#x27;success&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#00BD9D</span>),</span><br><span class="line">  <span class="string">&#x27;warning&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#ffbc0A</span>),</span><br><span class="line">  <span class="string">&#x27;danger&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#f06548</span>),</span><br><span class="line">  <span class="string">&#x27;error&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#f06548</span>),</span><br><span class="line">  <span class="string">&#x27;info&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#878A99</span>));</span><br><span class="line"><span class="variable">$header</span>: (<span class="string">&#x27;padding&#x27;</span>: <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span>with (</span><br><span class="line">  <span class="variable">$colors</span>: (<span class="string">&#x27;primary&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#008cef</span>),</span><br><span class="line">    <span class="string">&#x27;success&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#00BD9D</span>),</span><br><span class="line">    <span class="string">&#x27;warning&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#ffbc0A</span>),</span><br><span class="line">    <span class="string">&#x27;danger&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#f06548</span>),</span><br><span class="line">    <span class="string">&#x27;error&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#f06548</span>),</span><br><span class="line">    <span class="string">&#x27;info&#x27;</span>: (<span class="string">&#x27;base&#x27;</span>: <span class="number">#878A99</span>)),</span><br><span class="line">  <span class="variable">$text-color</span>: (<span class="string">&#x27;placeholder&#x27;</span>: <span class="number">#c0c4cc</span>),</span><br><span class="line">  <span class="variable">$table</span>:(<span class="string">&#x27;header-bg-color&#x27;</span>:<span class="number">#E6F4FE</span>),</span><br><span class="line">  <span class="variable">$fill-color</span>:(<span class="string">&#x27;lighter&#x27;</span>: <span class="number">#F3F6F9</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">//覆盖组件变量</span></span><br><span class="line"><span class="selector-class">.el-table</span> &#123;</span><br><span class="line">  --el-<span class="selector-tag">table</span>-<span class="selector-tag">header</span>-bg-<span class="attribute">color</span>: <span class="number">#F6F6F7</span>;</span><br><span class="line">  --el-<span class="selector-tag">table</span>-<span class="selector-tag">header</span>-text-<span class="attribute">color</span>: <span class="number">#4D4E50</span>;</span><br><span class="line">  --el-<span class="selector-tag">table</span>-current-row-bg-<span class="attribute">color</span>: <span class="number">#E8EBFA</span>;</span><br><span class="line">  --el-fill-<span class="attribute">color</span>-lighter: <span class="number">#f6f6f7</span>;</span><br><span class="line">  --el-<span class="selector-tag">table</span>-<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e8ebfa</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="全局注册二开组件"><a href="#全局注册二开组件" class="headerlink" title="全局注册二开组件"></a>全局注册二开组件</h3><blockquote><p>在基于element-plus组件二次封装的公共组件，我们希望能将其注册成为公共组件，可直接使用，不需要局部注册<br>将 <code>@/components/**/*.vue&#39;</code>注册为公共组件</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> upperFirst <span class="keyword">from</span> <span class="string">&#x27;lodash/upperFirst&#x27;</span></span><br><span class="line"><span class="keyword">import</span> camelCase <span class="keyword">from</span> <span class="string">&#x27;lodash/camelCase&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"><span class="comment">// 注册公共组件</span></span><br><span class="line"><span class="keyword">const</span> baseComponents = <span class="keyword">import</span>.meta.globEager(<span class="string">&#x27;@/components/**/*.vue&#x27;</span>)</span><br><span class="line"><span class="built_in">Object</span>.keys(baseComponents).forEach(<span class="function">(<span class="params">fileName, component</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取组件的 PascalCase 命名</span></span><br><span class="line">  <span class="keyword">const</span> componentName = upperFirst(</span><br><span class="line">    camelCase(</span><br><span class="line">      <span class="comment">// 剥去文件名开头的 `./` 和结尾的扩展名</span></span><br><span class="line">      fileName.substring(fileName.lastIndexOf(<span class="string">&#x27;/&#x27;</span>)).replace(<span class="regexp">/^\.?\/(.*)\.\w+$/</span>, <span class="string">&#x27;$1&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  <span class="comment">// 全局注册组件</span></span><br><span class="line">  app.component(componentName, baseComponents[fileName].default)</span><br><span class="line">&#125;)</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app</span><br></pre></td></tr></table></figure><h3 id="四舍五入（toFixed）兼容业务场景"><a href="#四舍五入（toFixed）兼容业务场景" class="headerlink" title="四舍五入（toFixed）兼容业务场景"></a>四舍五入（toFixed）兼容业务场景</h3><blockquote><p>在计算过程当中容易出现0.1+0.2=0.30000000000000004<br>所以将需要在前端进行小数点计算都需要toFixed，更改原生Number.prototype.toFixed方法</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//toFixed兼容方法，四舍五入</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.toFixed = <span class="function"><span class="keyword">function</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (len &gt; <span class="number">20</span> || len &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">RangeError</span>(<span class="string">&#x27;toFixed() digits argument must be between 0 and 20&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// .123转为0.123</span></span><br><span class="line">  <span class="keyword">var</span> number = <span class="built_in">Number</span>(<span class="built_in">this</span>)</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">isNaN</span>(number) || number &gt;= <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="number">21</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> number.toString()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> len == <span class="string">&#x27;undefined&#x27;</span> || len == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.round(number).toString()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将数字转成字符串 包括科学计数法形式的数字</span></span><br><span class="line">  <span class="keyword">var</span> result = scientificNotationToStr(number),</span><br><span class="line">    numberArr = result.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (numberArr.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">//整数的情况</span></span><br><span class="line">    <span class="keyword">return</span> padNum(result)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> intNum = numberArr[<span class="number">0</span>], <span class="comment">//整数部分</span></span><br><span class="line">    deciNum = numberArr[<span class="number">1</span>], <span class="comment">//小数部分</span></span><br><span class="line">    lastNum = deciNum.substr(len, <span class="number">1</span>) <span class="comment">// tofixed的后一位</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (deciNum.length == len) &#123;</span><br><span class="line">    <span class="comment">//需要截取的长度等于当前长度</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (deciNum.length &lt; len) &#123;</span><br><span class="line">    <span class="comment">//需要截取的长度大于当前长度 1.3.toFixed(2)</span></span><br><span class="line">    <span class="keyword">return</span> padNum(result)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//需要截取的长度小于当前长度，需要判断最后一位数字</span></span><br><span class="line">  result = intNum + <span class="string">&#x27;.&#x27;</span> + deciNum.substr(<span class="number">0</span>, len)</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">parseInt</span>(lastNum, <span class="number">10</span>) &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="comment">//最后一位数字大于5，要进位</span></span><br><span class="line">    <span class="keyword">var</span> times = <span class="built_in">Math</span>.pow(<span class="number">10</span>, len) <span class="comment">//需要放大的倍数</span></span><br><span class="line">    <span class="keyword">var</span> changedInt = <span class="built_in">Number</span>(result.replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;&#x27;</span>)) <span class="comment">//截取后转为整数</span></span><br><span class="line">    <span class="keyword">var</span> fu = <span class="number">1</span> / changedInt &lt; <span class="number">0</span> <span class="comment">// 为true 时，则 changedInt &lt; 0 或者 changedInt = -0,否则为正数或等于0</span></span><br><span class="line">    <span class="keyword">if</span> (fu) &#123;</span><br><span class="line">      changedInt-- <span class="comment">//整数进位</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      changedInt++ <span class="comment">//整数进位</span></span><br><span class="line">    &#125;</span><br><span class="line">    changedInt /= times <span class="comment">//整数转为小数，注：有可能还是整数</span></span><br><span class="line">    result = scientificNotationToStr(changedInt)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">  <span class="comment">//对数字补0</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">padNum</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dotPos = num.indexOf(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (dotPos === -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">//整数的情况</span></span><br><span class="line">      <span class="keyword">let</span> dotNum = <span class="string">&#x27;.&#x27;</span>.padEnd(len + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> num + dotNum</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//小数的情况</span></span><br><span class="line">      <span class="keyword">let</span> need = len - (num.length - (dotPos + <span class="number">1</span>))</span><br><span class="line">      <span class="keyword">return</span> num.padEnd(need, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="图标-svg-的使用"><a href="#图标-svg-的使用" class="headerlink" title="图标(svg)的使用"></a>图标(svg)的使用</h3><blockquote><p>当需要自定义icon时，可以使用svg作为一种图标格式，在admin中自动导入svg，且使用 <code>&lt;scg-icon name=&quot;xxx&quot;/&gt;使用</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSvgIconsPlugin &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-svg-icons&#x27;</span></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(<span class="function">(<span class="params">&#123; command, mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    ...,</span><br><span class="line">    plugins: [</span><br><span class="line">      ...,</span><br><span class="line">      createSvgIconsPlugin(&#123;</span><br><span class="line">        <span class="comment">// 指定需要缓存的图标文件夹</span></span><br><span class="line">        iconDirs: [resolve(process.cwd(), <span class="string">&#x27;src/assets/svg&#x27;</span>)],</span><br><span class="line">        <span class="comment">// 指定symbolId格式</span></span><br><span class="line">        symbolId: <span class="string">&#x27;icon-[dir]-[name]&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//svgIcon.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;svg aria-hidden=<span class="string">&quot;true&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;svg-icon&quot;</span>&gt;</span><br><span class="line">    &lt;use :xlink:href=<span class="string">&quot;symbolId&quot;</span> /&gt;</span><br><span class="line">  &lt;/svg&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineComponent, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> props = defineProps(&#123;</span><br><span class="line">  <span class="comment">// 使用的svg图标名称，也就是svg文件名</span></span><br><span class="line">  name: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  prefix: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">&#x27;icon&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> symbolId = computed(<span class="function">() =&gt;</span> <span class="string">`#<span class="subst">$&#123;props.prefix&#125;</span>-<span class="subst">$&#123;props.name&#125;</span>`</span>)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scope&gt;</span><br><span class="line">  .svg-icon &#123;</span><br><span class="line">    width: 1em;</span><br><span class="line">    height: 1em;</span><br><span class="line">    fill: currentcolor;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="comment">//使用方式</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;svg-icon name=<span class="string">&quot;language&quot;</span> /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
            <tag> admin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用chatGPT制作聚光灯效果</title>
      <link href="2023/05/20/vue-%E4%BD%BF%E7%94%A8chatGPT%E5%88%B6%E4%BD%9C%E8%81%9A%E5%85%89%E7%81%AF%E6%95%88%E6%9E%9C/"/>
      <url>2023/05/20/vue-%E4%BD%BF%E7%94%A8chatGPT%E5%88%B6%E4%BD%9C%E8%81%9A%E5%85%89%E7%81%AF%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>突发奇想为局域网的聊天室制作一个聚光灯效果，在鼠标范围内才显示具体内容，其他地方都白屏，当双击时显示页面十秒</p></blockquote><p><img src="https://wang-z.github.io/img/focus-img.jpg" class="lazyload" data-srcset="https://wang-z.github.io/img/focus-img.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="聚光灯效果"></p><span id="more"></span><h4 id="chatGPT使用"><a href="#chatGPT使用" class="headerlink" title="chatGPT使用"></a>chatGPT使用</h4><blockquote><p>来自免费网站<a href="https://poe.com/%EF%BC%8C%E6%B3%A8%E5%86%8C%E5%8F%AF%E7%94%A8">https://poe.com/，注册可用</a><br>优秀的程序员只会使用更方便的程序完成自己想要达到的效果</p></blockquote><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>在使用chatGPT过程中发现，低版本是不联网，数据比较旧，会胡言乱语的编造看起来好像有用的<br>我们要擅长发现问题且纠正<br>在使用时，我会先假设模型是一个前端/后端开发工程师，并且在做什么事，目标是什么，需要做什么，哪里可以优化。</p></blockquote><h3 id="开始编程"><a href="#开始编程" class="headerlink" title="开始编程"></a>开始编程</h3><blockquote><p>假设你是一个前端开发工程师，正在为聊天室开发一个聚光灯效果的交互</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">好的，我可以帮你设计一个聚光灯效果的交互。可以通过下面的步骤来实现：</span><br><span class="line">首先，你需要一个聊天室的界面，可以使用 HTML、CSS 和 JavaScript 来创建。</span><br><span class="line">接下来，在聊天室中添加一个聚光灯元素。你可以在 HTML 中创建一个 div 元素，并使用 CSS 将其设置为半透明的黑色背景。然后，使用 JavaScript 来控制该元素的位置和大小。</span><br><span class="line">当用户鼠标在聊天室中移动时，通过 JavaScript 监听鼠标移动事件，并更新聚光灯元素的位置，使其始终跟随鼠标。</span><br><span class="line">可以考虑添加一些动画效果，使聚光灯的移动更加平滑。</span><br><span class="line">最后，你可以使用 JavaScript 监听鼠标点击事件，并在点击时触发一些操作，例如发送消息或者打开聊天对话框等。</span><br><span class="line">需要注意的是，聚光灯效果可以通过 CSS 的 box-shadow 属性来实现，而不需要创建一个额外的元素。另外，为了确保你的交互在不同的浏览器中都能正常工作，你可能需要进行一些浏览器兼容性测试。</span><br></pre></td></tr></table></figure><blockquote><p>vue3实现聚光灯效果并随鼠标移动</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">要实现聚光灯效果并随鼠标移动，你可以使用Vue 3和CSS，具体步骤如下：</span><br><span class="line">创建一个Vue组件。</span><br><span class="line">在组件的template中创建一个包含聚光灯的元素，例如一个div。</span><br><span class="line">在该元素上应用CSS，使其看起来像一个聚光灯。你可以使用CSS的radial-gradient属性来创建一个圆形渐变，从而模拟聚光灯的效果。你可以使用CSS的transform属性来移动聚光灯的位置，使其跟随鼠标移动。</span><br><span class="line">在组件中添加一个事件监听器，以便在鼠标移动时更新聚光灯的位置。你可以使用Vue的v-on指令来添加事件监听器，并在方法中更新聚光灯位置。</span><br><span class="line">以下是一个示例Vue组件的代码，其中包含聚光灯效果并随鼠标移动：</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">v-on:mousemove</span>=<span class="string">&quot;moveSpotlight&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;spotlight&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 其他内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">moveSpotlight</span>(<span class="params">event</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> spotlight = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.spotlight&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> rect = event.target.getBoundingClientRect();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> x = event.clientX - rect.left;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> y = event.clientY - rect.top;</span></span><br><span class="line"><span class="javascript">      spotlight.style.transform = <span class="string">`translate(<span class="subst">$&#123;x&#125;</span>px, <span class="subst">$&#123;y&#125;</span>px)`</span>;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">.container &#123;</span><br><span class="line"><span class="css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.spotlight &#123;</span><br><span class="line"><span class="css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">50%</span>, transparent <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>) <span class="number">80%</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100px</span>, -<span class="number">100px</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">pointer-events</span>: none;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>用自定义指令实现，并且除聚光灯外界面要遮住</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">要使用自定义指令实现聚光灯效果并且除聚光灯外界面要遮住，你可以使用Vue 3的自定义指令和CSS，具体步骤如下：</span><br><span class="line">创建一个Vue指令。</span><br><span class="line">在指令的bind钩子函数中创建一个包含聚光灯的元素，例如一个div，并将其添加到页面中。</span><br><span class="line">在该元素上应用CSS，使其看起来像一个聚光灯。你可以使用CSS的radial-gradient属性来创建一个圆形渐变，从而模拟聚光灯的效果。你可以使用CSS的transform属性来移动聚光灯的位置，使其跟随鼠标移动。</span><br><span class="line">在指令的unbind钩子函数中将聚光灯元素从页面中删除。</span><br><span class="line">在指令的inserted钩子函数中创建一个遮罩层，并将其添加到页面中。遮罩层应该覆盖整个页面，以便将除聚光灯之外的内容遮住。</span><br><span class="line">在指令的unbind钩子函数中将遮罩层从页面中删除。</span><br><span class="line">在指令的update钩子函数中更新聚光灯的位置。你可以使用指令的value属性来获取鼠标的位置，并使用CSS的transform属性将聚光灯移动到该位置。</span><br><span class="line">以下是一个示例Vue指令的代码，其中包含聚光灯效果并且除聚光灯外界面要遮住：</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-spotlight</span>=<span class="string">&quot;mousePosition&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 其他内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      mousePosition: &#123; x: 0, y: 0 &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;mousemove&#x27;</span>, <span class="built_in">this</span>.updateMousePosition);</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">beforeUnmount</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.removeEventListener(<span class="string">&#x27;mousemove&#x27;</span>, <span class="built_in">this</span>.updateMousePosition);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">updateMousePosition</span>(<span class="params">event</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.mousePosition.x = event.clientX;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.mousePosition.y = event.clientY;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  directives: &#123;</span><br><span class="line">    spotlight: &#123;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">inserted</span>(<span class="params">el</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> spotlight = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        spotlight.classList.add(<span class="string">&#x27;spotlight&#x27;</span>);</span></span><br><span class="line">        el.appendChild(spotlight);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> mask = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        mask.classList.add(<span class="string">&#x27;mask&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.body.appendChild(mask);</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">update</span>(<span class="params">el, binding</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> spotlight = el.querySelector(<span class="string">&#x27;.spotlight&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        spotlight.style.transform = <span class="string">`translate(<span class="subst">$&#123;binding.value.x&#125;</span>px, <span class="subst">$&#123;binding.value.y&#125;</span>px)`</span>;</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> spotlight = el.querySelector(<span class="string">&#x27;.spotlight&#x27;</span>);</span></span><br><span class="line">        el.removeChild(spotlight);</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> mask = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.mask&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.body.removeChild(mask);</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">.mask &#123;</span><br><span class="line"><span class="css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.spotlight &#123;</span><br><span class="line"><span class="css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">50%</span>, transparent <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>) <span class="number">80%</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100px</span>, -<span class="number">100px</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">pointer-events</span>: none;</span></span><br><span class="line"><span class="css">  <span class="attribute">z-index</span>: <span class="number">10000</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>……<br>经过一系列的纠正过程，直接复制代码，让chatGPT重新编写，优化<br>效果终于实现,具体代码如下</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> spotlightDirective = &#123;</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> spotlight = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> mask = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> size = binding.value?.size || <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">Object</span>.assign(spotlight.style, &#123;</span><br><span class="line">      position: <span class="string">&quot;fixed&quot;</span>,</span><br><span class="line">      borderRadius: <span class="string">&quot;50%&quot;</span>,</span><br><span class="line">      pointerEvents: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">      zIndex: <span class="number">10000</span>,</span><br><span class="line">      width: <span class="string">`<span class="subst">$&#123;size&#125;</span>px`</span>,</span><br><span class="line">      height: <span class="string">`<span class="subst">$&#123;size&#125;</span>px`</span>,</span><br><span class="line">      background: <span class="string">&quot;transparent&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.assign(mask.style, &#123;</span><br><span class="line">      position: <span class="string">&quot;fixed&quot;</span>,</span><br><span class="line">      top: <span class="number">0</span>,</span><br><span class="line">      left: <span class="number">0</span>,</span><br><span class="line">      width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">      height: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">      zIndex: <span class="number">9999</span>,</span><br><span class="line">      pointerEvents: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">      background: <span class="string">&quot;white&quot;</span>, <span class="comment">// 将 background 属性设置为白色</span></span><br><span class="line">      mixBlendMode: <span class="string">&quot;normal&quot;</span>,</span><br><span class="line">      display: <span class="string">&quot;none&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(spotlight);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(mask);</span><br><span class="line">    el._spotlight = spotlight;</span><br><span class="line">    el._mask = mask;</span><br><span class="line">    <span class="comment">// 添加双击事件监听器</span></span><br><span class="line">    <span class="keyword">let</span> timerId = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> isHidden = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;dblclick&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      hideSpotlight();</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timerId);</span><br><span class="line">      isHidden = <span class="literal">true</span>;</span><br><span class="line">      timerId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        isHidden = <span class="literal">false</span>;</span><br><span class="line">        showSpotlight();</span><br><span class="line">      &#125;, <span class="number">10000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;mousemove&quot;</span>, onMouseMove);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onMouseMove</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (isHidden) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">const</span> mouseX = event.clientX;</span><br><span class="line">      <span class="keyword">const</span> mouseY = event.clientY;</span><br><span class="line">      <span class="keyword">if</span> (mouseX &gt;= <span class="number">0</span> &amp;&amp; mouseX &lt;= <span class="built_in">window</span>.innerWidth - <span class="number">30</span> &amp;&amp; mouseY &gt;= <span class="number">0</span> &amp;&amp; mouseY &lt;= <span class="built_in">window</span>.innerHeight - <span class="number">30</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> spotlightX = mouseX - size / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">const</span> spotlightY = mouseY - size / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Object</span>.assign(spotlight.style, &#123;</span><br><span class="line">          transform: <span class="string">`translate(<span class="subst">$&#123;spotlightX&#125;</span>px, <span class="subst">$&#123;spotlightY&#125;</span>px)`</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Object</span>.assign(mask.style, &#123;</span><br><span class="line">          display: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">          <span class="string">&quot;-webkit-mask-image&quot;</span>: <span class="string">`radial-gradient(circle <span class="subst">$&#123;size <span class="regexp">/ 2&#125;px at $&#123;spotlightX + size /</span> <span class="number">2</span>&#125;</span>px <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">            spotlightY + size / <span class="number">2</span></span></span></span><br><span class="line"><span class="string"><span class="subst">          &#125;</span>px, transparent 0, transparent <span class="subst">$&#123;size <span class="regexp">/ 2&#125;px, black $&#123;size /</span> <span class="number">2</span>&#125;</span>px)`</span>,</span><br><span class="line">          maskImage: <span class="string">`radial-gradient(circle <span class="subst">$&#123;size <span class="regexp">/ 2&#125;px at $&#123;spotlightX + size /</span> <span class="number">2</span>&#125;</span>px <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">            spotlightY + size / <span class="number">2</span></span></span></span><br><span class="line"><span class="string"><span class="subst">          &#125;</span>px, transparent 0, transparent <span class="subst">$&#123;size <span class="regexp">/ 2&#125;px, black $&#123;size /</span> <span class="number">2</span>&#125;</span>px)`</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        showSpotlight();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    el._onMouseMove = onMouseMove;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showSpotlight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;showSpotlight&quot;</span>);</span><br><span class="line">      <span class="built_in">Object</span>.assign(spotlight.style, &#123;</span><br><span class="line">        width: <span class="number">0</span>,</span><br><span class="line">        height: <span class="number">0</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">Object</span>.assign(mask.style, &#123;</span><br><span class="line">        display: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">        <span class="string">&quot;-webkit-mask-image&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        maskImage: <span class="string">&quot;none&quot;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hideSpotlight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">Object</span>.assign(spotlight.style, &#123;</span><br><span class="line">        width: <span class="number">0</span>,</span><br><span class="line">        height: <span class="number">0</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">Object</span>.assign(mask.style, &#123;</span><br><span class="line">        display: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        <span class="string">&quot;-webkit-mask-image&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        maskImage: <span class="string">&quot;none&quot;</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">unmounted</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&quot;mousemove&quot;</span>, el._onMouseMove);</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(el._spotlight);</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(el._mask);</span><br><span class="line">    <span class="keyword">delete</span> el._spotlight;</span><br><span class="line">    <span class="keyword">delete</span> el._mask;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> spotlightDirective;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> vue，cahtGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>axios的封装</title>
      <link href="2023/03/02/ajax-axios%E7%9A%84%E5%B0%81%E8%A3%85/"/>
      <url>2023/03/02/ajax-axios%E7%9A%84%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>axios使用习惯上的多次封装，记录当前使用的封装<br>说明：axios的封装是基于日常业务所需，需要请求全局遮罩和判断是否使用后端的msg作为提示，根据后端状态码（401，403）做特殊处理</p></blockquote><span id="more"></span><h2 id="直接使用axios"><a href="#直接使用axios" class="headerlink" title="直接使用axios"></a>直接使用axios</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">axios.get(<span class="string">&#x27;url&#x27;</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>当我们需要请求时自动添加遮罩，判断返回状态码401和403的处理，是否显示接口返回的msg</p></blockquote><h2 id="创建axios实例"><a href="#创建axios实例" class="headerlink" title="创建axios实例"></a>创建axios实例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiosInstanceClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.initInstance()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 初始化 axios 实例</span></span><br><span class="line">  <span class="function"><span class="title">initInstance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(&#123;</span><br><span class="line">      baseURL: baseURL,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      withCredentials: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="请求时增加遮罩"><a href="#请求时增加遮罩" class="headerlink" title="请求时增加遮罩"></a>请求时增加遮罩</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Loading &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// 全局loading加载</span></span><br><span class="line"><span class="keyword">let</span> loadingCount = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> loading = <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (boolean) &#123;</span><br><span class="line">    Loading.service(&#123; <span class="attr">fullscreen</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    loadingCount++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (loadingCount === <span class="number">1</span>) Loading.service().close()</span><br><span class="line">    <span class="keyword">if</span> (loadingCount &gt; <span class="number">0</span>) loadingCount--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="请求拦截器"><a href="#请求拦截器" class="headerlink" title="请求拦截器"></a>请求拦截器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiosInstanceClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.initInstance()</span><br><span class="line">    <span class="built_in">this</span>.initInterceptors()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 初始化 axios 实例</span></span><br><span class="line">  <span class="function"><span class="title">initInstance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(&#123;</span><br><span class="line">      baseURL: baseURL,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      withCredentials: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 初始化 interceptors 拦截器</span></span><br><span class="line">  <span class="function"><span class="title">initInterceptors</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 请求拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      config =&gt; &#123;</span><br><span class="line">        <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;,</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 响应拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      response =&gt; &#123;</span><br><span class="line">        <span class="comment">// 2xx 范围内的状态码都会触发该函数</span></span><br><span class="line">        <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">if</span> (!response.data.succ) codeExceptionHandler(response)</span><br><span class="line">        <span class="keyword">return</span> response.data</span><br><span class="line">      &#125;,</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// 超出 2xx 范围的状态码都会触发该函数</span></span><br><span class="line">        <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="异常-code-码处理"><a href="#异常-code-码处理" class="headerlink" title="异常 code 码处理"></a>异常 code 码处理</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> codeExceptionHandler = <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; code &#125; = response.data</span><br><span class="line">  <span class="keyword">switch</span> (code) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;401&#x27;</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="number">401</span>)</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="comment">//   if (isAlert) return</span></span><br><span class="line">      <span class="comment">//   isAlert = true</span></span><br><span class="line">      <span class="comment">//   ElMessageBox.alert(vue.$t(`axios.code.401`),&#x27;Tips&#x27;,&#123;</span></span><br><span class="line">      <span class="comment">//     showClose:false,</span></span><br><span class="line">      <span class="comment">//     callback: action =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//       isAlert = false</span></span><br><span class="line">      <span class="comment">//       const store = useAppStore()</span></span><br><span class="line">      <span class="comment">//       store.setUserInfo(&#123;&#125;)</span></span><br><span class="line">      <span class="comment">//       router.push(&#x27;/login&#x27;)</span></span><br><span class="line">      <span class="comment">//     &#125;,</span></span><br><span class="line">      <span class="comment">//   &#125;)</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;403&#x27;</span>:</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 异常 code 码错误提示</span></span><br><span class="line"><span class="keyword">const</span> errorCodeMessage = <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//使用后端返回msg</span></span><br><span class="line">  <span class="keyword">const</span> &#123; config &#125; = response</span><br><span class="line">  <span class="keyword">const</span> &#123; msg &#125; = response.data</span><br><span class="line">  <span class="keyword">if</span> (!config.useResMsg) <span class="keyword">return</span></span><br><span class="line">  Message.error(&#123;</span><br><span class="line">    message: msg,</span><br><span class="line">    duration: <span class="number">4000</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="封装一部分确定的请求"><a href="#封装一部分确定的请求" class="headerlink" title="封装一部分确定的请求"></a>封装一部分确定的请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiosInstanceClass</span> </span>&#123;</span><br><span class="line">   <span class="comment">/*...*/</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 默认请求</span></span><br><span class="line"><span class="comment">   * 用例 request(&#123; url: &#x27;/user&#x27;,method: &#x27;get&#x27;,useLoading:false,useResMsg:false&#125;)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">request</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; useLoading = <span class="literal">true</span> &#125; = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance(config)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * get 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>params [请求时携带的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   * 用例 api.get(url,&#123;&#125;,true,true)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">url, params, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.get(url, &#123; params, useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * post 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">post</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.post(url,data, &#123; useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * put 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">put</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.put(url,data, &#123; useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * delete 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">delete</span>(<span class="params">url, params = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.pdeleteut(url, &#123; params, useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * upload 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">upload</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.post(</span><br><span class="line">      url,</span><br><span class="line">      <span class="built_in">Object</span>.assign(</span><br><span class="line">        &#123;</span><br><span class="line">          headers: &#123;</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; data, useResMsg, ...other &#125;</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="完整源码"><a href="#完整源码" class="headerlink" title="完整源码"></a>完整源码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> baseURL <span class="keyword">from</span> <span class="string">&#x27;./baseURL&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Loading, Notification, MessageBox, Message &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// 全局loading加载</span></span><br><span class="line"><span class="keyword">let</span> loadingCount = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> isAlert = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> loading = <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (boolean) &#123;</span><br><span class="line">    Loading.service(&#123; <span class="attr">fullscreen</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    loadingCount++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (loadingCount === <span class="number">1</span>) Loading.service().close()</span><br><span class="line">    <span class="keyword">if</span> (loadingCount &gt; <span class="number">0</span>) loadingCount--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异常 code 码错误提示</span></span><br><span class="line"><span class="keyword">const</span> errorCodeMessage = <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//使用后端返回msg</span></span><br><span class="line">  <span class="keyword">const</span> &#123; config &#125; = response</span><br><span class="line">  <span class="keyword">const</span> &#123; msg &#125; = response.data</span><br><span class="line">  <span class="keyword">if</span> (!config.useResMsg) <span class="keyword">return</span></span><br><span class="line">  Message.error(&#123;</span><br><span class="line">    message: msg,</span><br><span class="line">    duration: <span class="number">4000</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 异常 code 码处理</span></span><br><span class="line"><span class="keyword">const</span> codeExceptionHandler = <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; code &#125; = response.data</span><br><span class="line">  <span class="keyword">switch</span> (code) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;401&#x27;</span>:</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;403&#x27;</span>:</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      errorCodeMessage(response)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AxiosInstanceClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.initInstance()</span><br><span class="line">    <span class="built_in">this</span>.initInterceptors()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 初始化 axios 实例</span></span><br><span class="line">  <span class="function"><span class="title">initInstance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(&#123;</span><br><span class="line">      baseURL: baseURL,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      withCredentials: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 初始化 interceptors 拦截器</span></span><br><span class="line">  <span class="function"><span class="title">initInterceptors</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 请求拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      config =&gt; &#123;</span><br><span class="line">        <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;,</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 响应拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      response =&gt; &#123;</span><br><span class="line">        <span class="comment">// 2xx 范围内的状态码都会触发该函数</span></span><br><span class="line">        <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">if</span> (!response.data.succ) codeExceptionHandler(response)</span><br><span class="line">        <span class="keyword">return</span> response.data</span><br><span class="line">      &#125;,</span><br><span class="line">      error =&gt; &#123;</span><br><span class="line">        <span class="comment">// 超出 2xx 范围的状态码都会触发该函数</span></span><br><span class="line">        <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">        loading(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 默认请求</span></span><br><span class="line"><span class="comment">   * 用例 request(&#123; url: &#x27;/user&#x27;,method: &#x27;get&#x27;,useLoading:false,useResMsg:false&#125;)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">request</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; useLoading = <span class="literal">true</span> &#125; = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance(config)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * get 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>params [请求时携带的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   * 用例 api.get(url,&#123;&#125;,true,true)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">url, params, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.get(url, &#123; params, useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * post 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">post</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.post(url,data, &#123; useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * put 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">put</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.put(url,data, &#123; useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * delete 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">delete</span>(<span class="params">url, params = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.pdeleteut(url, &#123; params, useResMsg, ...other &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * upload 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url [请求的地址]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>data [请求体中的参数]</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>config [其他配置项] useLoading:使用遮罩 useResMsg:使用后端返回msg默认都为true</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns </span>axios 实例</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">upload</span>(<span class="params">url, data = &#123;&#125;, ...config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [useLoading = <span class="literal">true</span>, useResMsg = <span class="literal">true</span>, other] = config</span><br><span class="line">    <span class="keyword">if</span> (useLoading) loading(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance.post(</span><br><span class="line">      url,</span><br><span class="line">      <span class="built_in">Object</span>.assign(</span><br><span class="line">        &#123;</span><br><span class="line">          headers: &#123;</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; data, useResMsg, ...other &#125;</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> axiosInstance = <span class="keyword">new</span> AxiosInstanceClass()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axiosInstance</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ajax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-实现SSO单点登录</title>
      <link href="2023/03/01/vue-%E5%AE%9E%E7%8E%B0SSO%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"/>
      <url>2023/03/01/vue-%E5%AE%9E%E7%8E%B0SSO%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>为了统一登录注册方式实现的单点登录，用户只需要登录一次就可以访问所有相互信任的应用系统</p><p>授权码鉴权：基于单点登录系统鉴权方式为token，兼容子系统任何鉴权方式（seesion，token）</p></blockquote><h3 id="SSO流程图"><a href="#SSO流程图" class="headerlink" title="SSO流程图"></a>SSO流程图</h3><p><img src="https://wang-z.github.io/img/sso-sign-flow.jpeg" class="lazyload" data-srcset="https://wang-z.github.io/img/sso-sign-flow.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="SSO"></p><span id="more"></span><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><blockquote><p>在SSO认证中心获取clientId以及后端所需的公钥</p></blockquote><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><p>子系统业务正常访问（子系统维护登录会话），</p><ol><li>当访问失效时，清除本地登录信息，并且跳转到SSO-登录界面</li><li>SSO生成ticket并重定向到子系统进行验证ticket</li><li>（3）子系统成功通过ticket进行登录，进入子系统业务界面</li></ol><blockquote><p>登录接口规范</p><ol><li><p>域名：<a href="https://sso.your-site.com/login">https://sso.your-site.com/login</a></p></li><li><p>query参数：</p><p>（1）client_id：客户端ID</p><p>（2）lang：语言（zh-CN，en-US）</p><p>（3）redirect_url（需转码escape）：登录成功后返回的地址-携带临时令牌（ticket）</p></li></ol></blockquote><h3 id="登出"><a href="#登出" class="headerlink" title="登出"></a>登出</h3><p>子系统需要退出用户，子系统提供退出接口供SSO调用，当SSO退出时，其他子系统也需要退出用户</p><ol><li>跳转至SSO的logout前端路由</li><li>SSO将会发起退出接口后重定向到登录界面</li></ol><h3 id="保持登录状态"><a href="#保持登录状态" class="headerlink" title="保持登录状态"></a>保持登录状态</h3><blockquote><p>由于子系统经过sso-login后，登录状态是由cookie去维持会话，当第二次sso-login后旧的界面没有进行刷新将会导致旧的界面显示旧的用户</p></blockquote><h3 id="1-使用定时器轮询监听cookie变化"><a href="#1-使用定时器轮询监听cookie变化" class="headerlink" title="1.使用定时器轮询监听cookie变化"></a>1.使用定时器轮询监听cookie变化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldCookie = <span class="built_in">document</span>.cookie;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newCookie = <span class="built_in">document</span>.cookie;</span><br><span class="line">  <span class="keyword">if</span> (newCookie !== oldCookie) &#123;</span><br><span class="line">    <span class="comment">// Cookie 已经更新，执行相应的操作</span></span><br><span class="line">    location.reload(); <span class="comment">// 刷新页面</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>); <span class="comment">// 每秒钟检查一次</span></span><br></pre></td></tr></table></figure><blockquote><p><code>document.cookie</code> 可以获取当前页面中设置的 Cookie 值，但它无法获取服务器通过 Set-Cookie 响应头设置的 Cookie 值</p></blockquote><h4 id="cookie获取不到问题"><a href="#cookie获取不到问题" class="headerlink" title="cookie获取不到问题"></a>cookie获取不到问题</h4><p>通过请求时获取headers中的set-cookie</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">&#x27;http://example.com/api&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">api.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 处理 Set-Cookie 响应头</span></span><br><span class="line">    <span class="keyword">const</span> setCookie = response.headers[<span class="string">&#x27;set-cookie&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (setCookie) &#123;</span><br><span class="line">      <span class="keyword">const</span> cookies = setCookie.map(<span class="function">(<span class="params">cookie</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cookie.split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// 将 Set-Cookie 转化为 Cookie，并设置到客户端浏览器中</span></span><br><span class="line">      cookies.forEach(<span class="function">(<span class="params">cookie</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.cookie = cookie;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> api;</span><br></pre></td></tr></table></figure><h3 id="2-在请求库的拦截器中判断cookie变化进行刷新界面"><a href="#2-在请求库的拦截器中判断cookie变化进行刷新界面" class="headerlink" title="2.在请求库的拦截器中判断cookie变化进行刷新界面"></a>2.在请求库的拦截器中判断cookie变化进行刷新界面</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">&#x27;http://example.com/api&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">api.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 处理 Set-Cookie 响应头</span></span><br><span class="line">    <span class="keyword">const</span> setCookie = response.headers[<span class="string">&#x27;set-cookie&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (setCookie) &#123;</span><br><span class="line">      <span class="keyword">const</span> cookies = setCookie.map(<span class="function">(<span class="params">cookie</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cookie.split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// 将 Set-Cookie 转化为 Cookie</span></span><br><span class="line">      <span class="keyword">const</span> cookieString = cookies.join(<span class="string">&#x27;;&#x27;</span>);</span><br><span class="line">      <span class="comment">// 存储 Cookie 值到 Local Storage</span></span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;cookie&#x27;</span>, cookieString);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在发送请求前，检查 Cookie 值是否发生变化</span></span><br><span class="line">api.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 从 Local Storage 中获取保存的 Cookie 值</span></span><br><span class="line">    <span class="keyword">const</span> savedCookie = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;cookie&#x27;</span>);</span><br><span class="line">    <span class="comment">// 比较保存的 Cookie 值和当前请求中的 Cookie 值是否相同</span></span><br><span class="line">    <span class="keyword">if</span> (savedCookie &amp;&amp; config.headers.cookie !== savedCookie) &#123;</span><br><span class="line">      <span class="comment">// Cookie 值发生变化，触发页面刷新</span></span><br><span class="line">      <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> api;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
            <tag> axios </tag>
            
            <tag> SSO </tag>
            
            <tag> vue-router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>格式化金额</title>
      <link href="2022/08/01/js-%E6%A0%BC%E5%BC%8F%E5%8C%96%E9%87%91%E9%A2%9D%EF%BC%88%E4%B8%89%E4%BD%8D%E5%8A%A0%E9%80%97%E5%8F%B7%EF%BC%89/"/>
      <url>2022/08/01/js-%E6%A0%BC%E5%BC%8F%E5%8C%96%E9%87%91%E9%A2%9D%EF%BC%88%E4%B8%89%E4%BD%8D%E5%8A%A0%E9%80%97%E5%8F%B7%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>一串数字转金额，每隔三位加逗号，如99999—-&gt;99,999.00</p></blockquote><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     var result &#x3D; [ ], counter &#x3D; 0;</span><br><span class="line">     num &#x3D; (num || 0).toString().split(&#39;&#39;);</span><br><span class="line">     for (var i &#x3D; num.length - 1; i &gt;&#x3D; 0; i--) &#123;</span><br><span class="line">         counter++;</span><br><span class="line">         result.unshift(num[i]);</span><br><span class="line">         if (!(counter % 3) &amp;&amp; i !&#x3D; 0) &#123; result.unshift(&#39;,&#39;); &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return result.join(&#39;&#39;);</span><br><span class="line"> &#125;</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><span id="more"></span><p>方法一的执行过程就是把数字转换成字符串后，打散为数组，再从末尾开始，逐个把数组中的元素插入到新数组（result）的开头。每插入一个元素，counter就计一次数（加1），当counter为3的倍数时，就插入一个逗号，但是要注意开头（i为0时）不需要逗号。最后通过调用新数组的join方法得出结果。<br>方法一比较清晰易懂，但它的性能并不好。</p><h2 id="方法二（方法一的字符串版）"><a href="#方法二（方法一的字符串版）" class="headerlink" title="方法二（方法一的字符串版）"></a>方法二（方法一的字符串版）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     var result &#x3D; &#39;&#39;, counter &#x3D; 0;</span><br><span class="line">     num &#x3D; (num || 0).toString();</span><br><span class="line">     for (var i &#x3D; num.length - 1; i &gt;&#x3D; 0; i--) &#123;</span><br><span class="line">         counter++;</span><br><span class="line">         result &#x3D; num.charAt(i) + result;</span><br><span class="line">         if (!(counter % 3) &amp;&amp; i !&#x3D; 0) &#123;</span><br><span class="line">          result &#x3D; &#39;,&#39; + result;</span><br><span class="line">           &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return result;</span><br><span class="line"> &#125;</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>法二是方法一的改良版，不把字符串打散为数组，始终对字符串操作。</p><h2 id="方法三-（循环匹配末尾的三个数字）"><a href="#方法三-（循环匹配末尾的三个数字）" class="headerlink" title="方法三 （循环匹配末尾的三个数字）"></a>方法三 （循环匹配末尾的三个数字）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     var num &#x3D; (num || 0).toString(), re &#x3D; &#x2F;\d&#123;3&#125;$&#x2F;, result &#x3D; &#39;&#39;;</span><br><span class="line">     while ( re.test(num) ) &#123;</span><br><span class="line">         result &#x3D; RegExp.lastMatch + result;</span><br><span class="line">         if (num !&#x3D;&#x3D; RegExp.lastMatch) &#123;</span><br><span class="line">             result &#x3D; &#39;,&#39; + result;</span><br><span class="line">             num &#x3D; RegExp.leftContext;</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">             num &#x3D; &#39;&#39;;</span><br><span class="line">             break;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     if (num) &#123; result &#x3D; num + result; &#125;</span><br><span class="line">     return result;</span><br><span class="line"> &#125;</span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure><p>方法三是完全不同的算法，通过正则表达式循环匹配末尾的三个数字，每匹配一次，就把逗号和匹配到的内容插入到结果字符串的开头，然后把匹配目标（num）赋值为还没匹配的内容（RegExp.leftContext）。此外，还要注意：</p><p>1.如果数字的位数是3的倍数时，最后一次匹配到的内容肯定是三个数字，但是最前面的三个数字前不需要加逗号；<br>2.如果数字的位数不是3的倍数，那num变量最后肯定会剩下1到2个数字，循环过后，要把剩余的数字插入到结果字符串的开头。</p><p>虽然方法三减少了循环次数（一次循环处理三个字符），但由于用到了正则表达式，一定程度上增加了消耗。</p><h2 id="方法四（方法三的字符串版）"><a href="#方法四（方法三的字符串版）" class="headerlink" title="方法四（方法三的字符串版）"></a>方法四（方法三的字符串版）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     var num &#x3D; (num || 0).toString(), result &#x3D; &#39;&#39;;</span><br><span class="line">     while (num.length &gt; 3) &#123;</span><br><span class="line">         result &#x3D; &#39;,&#39; + num.slice(-3) + result;</span><br><span class="line">         num &#x3D; num.slice(0, num.length - 3);</span><br><span class="line">     &#125;</span><br><span class="line">     if (num) &#123; result &#x3D; num + result; &#125;</span><br><span class="line">     return result;</span><br><span class="line"> &#125;</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>事实上，截取末尾三个字符的功能可以通过字符串类型的slice、substr或substring方法做到。这样就可以避免使用正则表达式。</p><h2 id="方法五（分组合并法）"><a href="#方法五（分组合并法）" class="headerlink" title="方法五（分组合并法）"></a>方法五（分组合并法）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     var num &#x3D; (num || 0).toString(), temp &#x3D; num.length % 3;</span><br><span class="line">     switch (temp) &#123;</span><br><span class="line">         case 1:</span><br><span class="line">             num &#x3D; &#39;00&#39; + num;</span><br><span class="line">             break;</span><br><span class="line">         case 2:</span><br><span class="line">             num &#x3D; &#39;0&#39; + num;</span><br><span class="line">             break;</span><br><span class="line">     &#125;</span><br><span class="line">     return num.match(&#x2F;\d&#123;3&#125;&#x2F;g).join(&#39;,&#39;).replace(&#x2F;^0+&#x2F;, &#39;&#39;);</span><br><span class="line"> &#125;</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>先把数字的位数补足为3的倍数，通过正则表达式，将其切割成每三个数字一个分组，再通过join方法添加逗号，最后还要把补的0移除。</p><h2 id="方法六（懒人法）"><a href="#方法六（懒人法）" class="headerlink" title="方法六（懒人法）"></a>方法六（懒人法）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function toThousands(num) &#123;</span><br><span class="line">     return (num || 0).toString().replace(&#x2F;(\d)(?&#x3D;(?:\d&#123;3&#125;)+$)&#x2F;g, &#39;$1,&#39;);</span><br><span class="line"> &#125;</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>这个格式化是通过一条正则表达式替换做出来的，这估计是代码最短的实现。</p><p><img src="https://img-blog.csdnimg.cn/20201118102929138.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDQzOTUzOQ==,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20201118102929138.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDQzOTUzOQ==,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="在这里插入图片描述"></p><p>方法一和方法二的强烈对比表明，字符串操作的效率比数组操作的效率要高得多；方法六的测试结果告诉我们，代码长短跟性能高低没有关系。方法四的综合性能是最好的（但为何num为100的时候，性能有所降低呢，这个实在不解），主要原因是：</p><p>1.对比方法一、二，每次操作3个字符而不是1个字符，减少循环次数；<br>2.对比方法三、五、六，没有使用正则表达式，减少了消耗。</p><p>综上所述，方法四作为最终的优化方案。</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端hash和history路由以及预渲染</title>
      <link href="2022/03/01/vue-%E5%89%8D%E7%AB%AFhash%E5%92%8Chistory%E8%B7%AF%E7%94%B1%E4%BB%A5%E5%8F%8A%E9%A2%84%E6%B8%B2%E6%9F%93/"/>
      <url>2022/03/01/vue-%E5%89%8D%E7%AB%AFhash%E5%92%8Chistory%E8%B7%AF%E7%94%B1%E4%BB%A5%E5%8F%8A%E9%A2%84%E6%B8%B2%E6%9F%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>前端hash和history路由以及预渲染使用插件prerender-spa-plugin</p></blockquote><span id="more"></span><h2 id="hash模式"><a href="#hash模式" class="headerlink" title="hash模式"></a>hash模式</h2><p>原理: 在 url 中的 # 之后对应的是 hash 值, 其原理是通过hashChange() 事件监听hash值的变化, 根据路由表对应的hash值来判断加载对应的路由加载对应的组件<br>优点:</p><ol><li>只需要前端配置路由表, 不需要后端的参与</li><li>兼容性好, 浏览器都能支持</li><li>hash值改变不会向后端发送请求, 完全属于前 端路由</li></ol><p>缺点:</p><ol><li>hash值前面需要加#, 不符合url规范,也不美观<h2 id="history模式"><a href="#history模式" class="headerlink" title="history模式"></a>history模式</h2></li></ol><p>原理:history模式基于window.history对象的方法<br>优点:</p><ol><li>符合url地址规范, 不需要#, 使用起来比较美观</li></ol><p>缺点:</p><ol><li>用户手动输入地址或刷新页面时会发起url请求, 后端需要配置index.html页面用户匹配不到静态资源的情况, 否则会出现404错误</li><li>兼容性比较差, 是利用了 HTML5 History对象中新增的 pushState() 和 replaceState() 方法,需要特定浏览器的支持.</li></ol><blockquote><p>总结</p><ol><li>hash模式较丑，history模式较优雅</li><li>pushState设置的新URL可以是与当前URL同源的任意URL；而hash只可修改#后面的部分，故只可设置与当前同文档的URL</li><li>pushState设置的新URL可以与当前URL一模一样，这样也会把记录添加到栈中；而hash设置的新值必须与原来不一样才会触发记录添加到栈中</li><li>pushState通过stateObject可以添加任意类型的数据到记录中；而hash只可添加短字符串</li><li>pushState可额外设置title属性供后续使用</li><li>hash兼容IE8以上，history兼容IE10以上</li><li>history模式需要后端配合将所有访问都指向index.html，否则用户刷新页面，会导致404错误</li></ol></blockquote><h2 id="预渲染"><a href="#预渲染" class="headerlink" title="预渲染"></a>预渲染</h2><blockquote><p>项目安装 <a href="https://www.npmjs.com/package/prerender-spa-plugin">prerender-spa-plugin</a><br>npm i prerender-spa-plugin</p><p> 基于puppeteer进行预渲染网站然后生成html</p></blockquote><blockquote><p>路由模式必须为history模式（想要预渲染就会失去spa单页）</p></blockquote><blockquote><p>在vue.config.js更改配置</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PrerenderSPAPlugin = <span class="built_in">require</span>(<span class="string">&#x27;prerender-spa-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Renderer = PrerenderSPAPlugin.PuppeteerRenderer</span><br><span class="line">configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 预加载</span></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        plugins: [</span><br><span class="line">          <span class="keyword">new</span> PrerenderSPAPlugin(&#123;</span><br><span class="line">            staticDir: path.join(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">            routes: [<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;/register&#x27;</span>,<span class="string">&#x27;/login&#x27;</span>],</span><br><span class="line">            renderer: <span class="keyword">new</span> Renderer(&#123;</span><br><span class="line">              renderAfterTime: <span class="number">5000</span>,</span><br><span class="line">              inject: &#123;</span><br><span class="line">                prerendered: <span class="literal">false</span>,</span><br><span class="line">              &#125;,</span><br><span class="line">              headless: <span class="literal">true</span>,</span><br><span class="line">              renderAfterDocumentEvent: <span class="string">&#x27;render-event&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">          &#125;),</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><blockquote><p>在main.js配置</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  i18n,</span><br><span class="line">  routes,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.dispatchEvent(<span class="keyword">new</span> Event(<span class="string">&#x27;render-event&#x27;</span>))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>报错</p></blockquote><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Unable to prerender all routes!</span><br><span class="line">1. 页面过多不能打包完毕 最好在10+内的页面</span><br><span class="line">2. headless: true,设置为true</span><br><span class="line">3. hash模式可运行但是打包不成功</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> vue，route </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uniapp-搭建APP过程</title>
      <link href="2022/02/24/uniapp-%E6%90%AD%E5%BB%BAAPP%E6%9E%B6%E6%9E%84/"/>
      <url>2022/02/24/uniapp-%E6%90%AD%E5%BB%BAAPP%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<blockquote><p>uniapp-搭建APP过程</p></blockquote><span id="more"></span><p><a href="https://uniapp.dcloud.io/">uniapp文档</a></p><p><a href="https://dev.dcloud.net.cn/">开发者中心</a></p><p><img src="https://wang-z.gitee.io/img/uniapp-frame.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/uniapp-frame.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="uniapp-frame"></p><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><p>HBuilderX：<a href="https://www.dcloud.io/hbuilderx.html">官方IDE下载地址</a></p><h3 id="创建uni-app"><a href="#创建uni-app" class="headerlink" title="创建uni-app"></a>创建uni-app</h3><p><img src="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/b925a1c0-4f19-11eb-97b7-0dc4655d6e68.png" class="lazyload" data-srcset="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/b925a1c0-4f19-11eb-97b7-0dc4655d6e68.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="quick-creat"></p><p>后续查看<a href="https://uniapp.dcloud.io/quickstart-hx.html#%E8%BF%90%E8%A1%8Cuni-app">官方文档</a>。。。。</p><h2 id="打包为原生App"><a href="#打包为原生App" class="headerlink" title="打包为原生App"></a>打包为原生App</h2><blockquote><p>在HBuilderX工具栏，点击发行，选择原生app-云端打包，如下图：</p></blockquote><p><img src="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/b8332fd0-4f37-11eb-8ff1-d5dcf8779628.png" class="lazyload" data-srcset="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/b8332fd0-4f37-11eb-8ff1-d5dcf8779628.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="build-app"></p><p>云端打包支持安心打包，保护用户隐私，不会上传代码和证书，通过差量包制作方式实现安心打包。详见：<a href="https://ask.dcloud.net.cn/article/37979">https://ask.dcloud.net.cn/article/37979</a>(opens new window)</p><p>云打包也支持cli模式，通过HBuilderX的cli方式（不是uni-app的cli），可以调用命令行打包，方便持续集成。详见：<a href="https://hx.dcloud.net.cn/cli/pack">https://hx.dcloud.net.cn/cli/pack</a>(opens new window)</p><p>虽然安心打包已经满足需求，但如仍然希望自己使用 xcode 或 Android studio 进行离线打包，则在 HBuilderX 发行菜单里找到本地打包菜单，生成离线打包资源，然后参考离线打包文档操作：<a href="https://nativesupport.dcloud.net.cn/AppDocs/README">https://nativesupport.dcloud.net.cn/AppDocs/README</a> (opens new window)。</p><p>App打包时，注意如何涉及三方sdk，需进行申请并在manifest.json里配置，否则相关功能无法使用。</p><p>iOS App打包需要向Apple申请证书</p><h2 id="离线打包"><a href="#离线打包" class="headerlink" title="离线打包"></a>离线打包</h2><p><a href="https://nativesupport.dcloud.net.cn/AppDocs/README">参考文档</a></p>]]></content>
      
      
      <categories>
          
          <category> uniapp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无头浏览器基础使用</title>
      <link href="2022/02/24/puppeteer-%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BD%BF%E7%94%A8/"/>
      <url>2022/02/24/puppeteer-%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>讲述搭建博客的一切</p><p>无头浏览器 <a href="http://www.puppeteerjs.com/">文档</a></p></blockquote><blockquote><p>你在谷歌浏览器所得到的，在这也能得到</p><ol><li>生成页面 PDF</li><li>抓取 SPA（单页应用）并生成预渲染内容（即“SSR”（服务器端渲染））</li><li>自动提交表单，进行 UI 测试，键盘输入等。</li><li>爬虫</li></ol></blockquote><span id="more"></span><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir test</span><br><span class="line">npm init </span><br><span class="line">npm install puppeteer</span><br><span class="line">touch test.js</span><br></pre></td></tr></table></figure><blockquote><p>test.js部分示例<br>执行环境 node<br>执行命令 node test.js</p></blockquote><h3 id="生成页面-PDF"><a href="#生成页面-PDF" class="headerlink" title="生成页面 PDF"></a>生成页面 PDF</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch();</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&#x27;https://www.baidu.com&#x27;</span>, &#123;<span class="attr">waitUntil</span>: <span class="string">&#x27;networkidle2&#x27;</span>&#125;);</span><br><span class="line">  <span class="keyword">await</span> page.pdf(&#123;<span class="attr">path</span>: <span class="string">&#x27;baidu.pdf&#x27;</span>, <span class="attr">format</span>: <span class="string">&#x27;A4&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> browser.close();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&#x27;puppeteer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch();</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">  <span class="keyword">await</span> page.goto(<span class="string">&#x27;https://www.baidu.com&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> page.screenshot(&#123;<span class="attr">path</span>: <span class="string">&#x27;baidu.png&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> browser.close();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="自动提交表单"><a href="#自动提交表单" class="headerlink" title="自动提交表单"></a>自动提交表单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在无头浏览器自动填写表单并提交</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> puppeteer = <span class="built_in">require</span>(<span class="string">&quot;puppeteer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> autoSubmitForm = <span class="keyword">async</span> (url, path) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 启动浏览器</span></span><br><span class="line">  <span class="keyword">const</span> browser = <span class="keyword">await</span> puppeteer.launch(&#123;</span><br><span class="line">    <span class="comment">// 关闭无头模式，方便我们看到这个无头浏览器执行的过程</span></span><br><span class="line">    headless: <span class="literal">false</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 打开页面</span></span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">await</span> browser.newPage();</span><br><span class="line">  <span class="comment">// 设置浏览器视窗</span></span><br><span class="line">  page.setViewport(&#123;</span><br><span class="line">    width: <span class="number">1376</span>,</span><br><span class="line">    height: <span class="number">768</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 地址栏输入网页地址</span></span><br><span class="line">  <span class="keyword">await</span> page.goto(url);</span><br><span class="line">  <span class="comment">//   await page.type(&quot;#kw&quot;, &quot;网抑云&quot;, &#123;</span></span><br><span class="line">  <span class="comment">//       delay: 1000 // 控制 keypress 也就是每个字母输入的间隔</span></span><br><span class="line">  <span class="comment">//     &#125;);</span></span><br><span class="line">  <span class="keyword">await</span> page.focus(<span class="string">&quot;#kw&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> page.keyboard.type(<span class="string">&quot;网抑云&quot;</span>, &#123;</span><br><span class="line">    delay: <span class="number">1000</span> <span class="comment">// 控制 keypress 也就是每个字母输入的间隔</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> page.keyboard.press(<span class="string">&quot;Enter&quot;</span>);</span><br><span class="line">  <span class="comment">//   await page.press(&quot;Enter&quot;);</span></span><br><span class="line">  <span class="comment">// 不关闭浏览器，看看效果</span></span><br><span class="line">  <span class="comment">// await browser.close();</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = autoSubmitForm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">require</span>.main === <span class="built_in">module</span>) &#123;</span><br><span class="line">  <span class="comment">// for test</span></span><br><span class="line">  autoSubmitForm(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> puppeteer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> puppeteer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>能用代码解决的千万别复制粘贴</title>
      <link href="2021/09/22/js-%E8%83%BD%E7%94%A8%E4%BB%A3%E7%A0%81%E8%A7%A3%E5%86%B3%E7%9A%84%E5%8D%83%E4%B8%87%E5%88%AB%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4/"/>
      <url>2021/09/22/js-%E8%83%BD%E7%94%A8%E4%BB%A3%E7%A0%81%E8%A7%A3%E5%86%B3%E7%9A%84%E5%8D%83%E4%B8%87%E5%88%AB%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录开发中的使用 js 减少重复操作的优良代码</p></blockquote><span id="more"></span><h2 id="生成有序数组"><a href="#生成有序数组" class="headerlink" title="生成有序数组"></a>生成有序数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">orderedArray=<span class="function">(<span class="params">n</span>)=&gt;</span>[...new <span class="built_in">Array</span>(n).keys()] </span><br><span class="line">orderedArray(<span class="number">10</span>) <span class="comment">//[0, 1, 2, 3, 4, 5, 6, 7, 8, 9</span></span><br><span class="line">orderedArray(<span class="number">6</span>).map(<span class="function"><span class="params">i</span>=&gt;</span>i+<span class="number">4</span>) <span class="comment">//[4, 5, 6, 7, 8, 9]</span></span><br><span class="line">orderedArray(<span class="number">6</span>).map(<span class="function"><span class="params">i</span>=&gt;</span>(i+<span class="number">1</span>)*<span class="number">4</span>)<span class="comment">//[4, 8, 12, 16, 20, 24]</span></span><br></pre></td></tr></table></figure><h2 id="计算对象-每个值得长度"><a href="#计算对象-每个值得长度" class="headerlink" title="计算对象+=每个值得长度"></a>计算对象+=每个值得长度</h2><blockquote><p>中英文都计算为一个字符长度</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = &#123; <span class="attr">a</span>: <span class="string">&quot;hhh&quot;</span>, <span class="attr">dd</span>: <span class="string">&quot;ddd&quot;</span>, <span class="attr">e</span>: &#123; <span class="attr">f</span>: <span class="string">&quot;哈哈哈&quot;</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">let</span> length = <span class="number">0</span>;</span><br><span class="line">stringLength = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> val) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> val[key] == <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">      stringLength(val[key]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      length += val[key].length;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">stringLength(test);</span><br><span class="line"><span class="built_in">console</span>.log(length);</span><br></pre></td></tr></table></figure><h2 id="对象转为-table-显示的树状带-children-结构（可能带-bug）"><a href="#对象转为-table-显示的树状带-children-结构（可能带-bug）" class="headerlink" title="对象转为 table 显示的树状带 children 结构（可能带 bug）"></a>对象转为 table 显示的树状带 children 结构（可能带 bug）</h2><blockquote><p>data 测试数据集合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: &#123;</span><br><span class="line">    c: <span class="number">2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  d: [&#123; <span class="attr">e</span>: <span class="number">5</span> &#125;]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>index.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="built_in">require</span>(<span class="string">&quot;./data.js&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> emun = &#123;<span class="attr">id</span>:<span class="string">&#x27;&#x27;</span>,<span class="attr">describe</span>:<span class="string">&#x27;&#x27;</span>,<span class="attr">must</span>:<span class="string">&quot;是&quot;</span>&#125;</span><br><span class="line"> <span class="keyword">let</span> keyWord = <span class="string">&#x27;filed&#x27;</span></span><br><span class="line"> <span class="keyword">let</span> strType = <span class="string">&#x27;type&#x27;</span></span><br><span class="line"> <span class="keyword">let</span> typeEmun = &#123;</span><br><span class="line">   <span class="string">&#x27;number&#x27;</span>:<span class="string">&#x27;NUMBER&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;string&#x27;</span>:<span class="string">&#x27;STRING&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;boolean&#x27;</span>:<span class="string">&#x27;BOOLEAN&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;object&#x27;</span>:<span class="string">&#x27;LIST OBJECT&#x27;</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"> <span class="keyword">let</span> output = []</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">coverData</span>(<span class="params">data,output</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> d <span class="keyword">in</span> data)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> data[d] !=<span class="string">&#x27;object&#x27;</span>)&#123;</span><br><span class="line">            output.push(yuansu(d,data[d]))</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> temp = yuansu(d,data[d])</span><br><span class="line">            temp.children=[]</span><br><span class="line">           <span class="keyword">let</span> index = output.push(temp)</span><br><span class="line">           <span class="keyword">if</span>(data[d] <span class="keyword">instanceof</span> <span class="built_in">Array</span> &amp;&amp;data[d].length==<span class="number">1</span>)&#123;</span><br><span class="line">            coverData(data[d][<span class="number">0</span>],output[index-<span class="number">1</span>][<span class="string">&#x27;children&#x27;</span>])</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            coverData(data[d],output[index-<span class="number">1</span>][<span class="string">&#x27;children&#x27;</span>])</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">yuansu</span>(<span class="params">d,data</span>)</span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">        emun.id = count</span><br><span class="line">        <span class="keyword">let</span> temp = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(emun))</span><br><span class="line">        temp[keyWord] = d</span><br><span class="line">        temp[strType] = typeEmun[<span class="keyword">typeof</span> data]</span><br><span class="line">        <span class="keyword">return</span> temp</span><br><span class="line"> &#125;</span><br><span class="line">coverData(data,output)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(output))</span><br></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">describe</span>: <span class="string">&quot;&quot;</span>, <span class="attr">must</span>: <span class="string">&quot;是&quot;</span>, <span class="attr">filed</span>: <span class="string">&quot;a&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;NUMBER&quot;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    describe: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    must: <span class="string">&quot;是&quot;</span>,</span><br><span class="line">    filed: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    type: <span class="string">&quot;LIST OBJECT&quot;</span>,</span><br><span class="line">    children: [&#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">describe</span>: <span class="string">&quot;&quot;</span>, <span class="attr">must</span>: <span class="string">&quot;是&quot;</span>, <span class="attr">filed</span>: <span class="string">&quot;c&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;NUMBER&quot;</span> &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">4</span>,</span><br><span class="line">    describe: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    must: <span class="string">&quot;是&quot;</span>,</span><br><span class="line">    filed: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">    type: <span class="string">&quot;LIST OBJECT&quot;</span>,</span><br><span class="line">    children: [&#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">describe</span>: <span class="string">&quot;&quot;</span>, <span class="attr">must</span>: <span class="string">&quot;是&quot;</span>, <span class="attr">filed</span>: <span class="string">&quot;e&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;NUMBER&quot;</span> &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何搭建博客</title>
      <link href="2021/04/12/hexo-%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
      <url>2021/04/12/hexo-%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>讲述搭建博客的一切</p><p>Hexo 是一个快速、简洁且高效的博客框架。</p></blockquote><blockquote><p>作为一位前端开发者，我了解到的静态博客其实际是一份 html，hexo 使用 <a href="http://daringfireball.net/projects/markdown/">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><p>前端开发者都知开发会使用到脚手架编译，而 hexo 就是将我们平时写的笔记进行编译为 html，里面使用了主题可以优化编译效果，在此我将使用<a href="https://volantis.js.org/">volantis</a>作为主题</p></blockquote><span id="more"></span><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><blockquote><p>想要使用 hexo 那么你将要拥有前端的开发环境</p></blockquote><p><a href="https://nodejs.org/zh-cn/">Node</a> <a href="https://git-scm.com/">Git</a></p><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>查看版本 hexo -v</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="初始化-Hexo-脚手架"><a href="#初始化-Hexo-脚手架" class="headerlink" title="初始化 Hexo 脚手架"></a>初始化 Hexo 脚手架</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;blog<span class="literal">-name</span>&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;blog<span class="literal">-name</span>&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><blockquote><p>初始化的结构</p><p>本地启动为 hexo server</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── node_modules</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><blockquote><p>到此为止，如果你执行的命令没有报错，那么你的 hexo 已经初具规模，可以说是最初版，后续可以自定义主题的配置</p></blockquote><h3 id="自动部署"><a href="#自动部署" class="headerlink" title="自动部署"></a>自动部署</h3><blockquote><p>使用 hexo 推荐的自动部署的库可以连接 github gitee gitlab</p></blockquote><p>安装<a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在个人_config.yml中修改</span></span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@gitee.com:wang-z/wang-z.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h3 id="注入脚本"><a href="#注入脚本" class="headerlink" title="注入脚本"></a>注入脚本</h3><blockquote><p>可以在主题目录下 /scripts 编写 js 脚本在博客会自动注入进 html</p></blockquote><h3 id="网站图标"><a href="#网站图标" class="headerlink" title="网站图标"></a>网站图标</h3><blockquote><p>在 source/文件下加入名 favicon.ico 的图标会自动显示</p></blockquote><h2 id="修改博客文件下-config-yml"><a href="#修改博客文件下-config-yml" class="headerlink" title="修改博客文件下_config.yml"></a>修改博客文件下_config.yml</h2><blockquote><p>每个人想要部署的地方不同，这里提供 gitee 仓库的部署</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Mr.wang&#x27;blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&quot;Time flies and people come and go&quot;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;一个人的自述&quot;</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">gitee</span> <span class="string">blog</span> <span class="string">wang</span> <span class="string">js</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">wangzhibiao</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://wang-z.gitee.io/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># Apply to the whole site</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Metadata elements</span></span><br><span class="line"><span class="comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span><br><span class="line"><span class="attr">meta_generator:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"><span class="comment">## Use post&#x27;s date for updated date unless set in front-matter</span></span><br><span class="line"><span class="attr">use_date_for_updated:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line"><span class="attr">include:</span></span><br><span class="line"><span class="attr">exclude:</span></span><br><span class="line"><span class="attr">ignore:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">volantis</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@gitee.com:wang-z/wang-z.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><blockquote><p>博客的多样化，可以使用别人写好的主题模板进行编译，好看又好用</p></blockquote><h3 id="主题替换"><a href="#主题替换" class="headerlink" title="主题替换"></a>主题替换</h3><blockquote><p>在 blog 中 themes 添加博客文件，并修改个人_config.yml</p><p>在 hexo-V5 版本只需要安装主题包 npm i &lt;主题包&gt; 旧版本仍需 git clone URL themes/{主题名}</p><p>独立主题 yml 只需要在 blog 文件下创建_config.主题.yml 即可在这文件下配置主题的设置</p><p>根据每个主题的不同，请到主题网站内修改主题_config.yml</p><p>这里提供<a href="https://volantis.js.org/v4/site-settings/">volantis</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: volantis</span><br></pre></td></tr></table></figure><blockquote><p>友链不在 index.md 中定义–》在 blog/source/_data/friends.yml 写入友链</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- group: 个人博客 # 分组标题</span><br><span class="line">  description: # 分组描述</span><br><span class="line">  icon: fas fa-user-tie</span><br><span class="line">  items:</span><br><span class="line">    - title: wang’blog # 名称</span><br><span class="line">      avatar: http:<span class="comment">//www.gx8899.com/uploads/allimg/2018010408/w0pewqfx4dz.jpg # 头像</span></span><br><span class="line">      url: https:<span class="comment">//wang-zhibiao.github.io/ # 链接</span></span><br><span class="line">      screenshot: # 截图</span><br><span class="line">      keywords: [js, vue] # 关键词</span><br><span class="line">      description: 一个人的博客 # 描述</span><br><span class="line">    - title: gauhar’blog # 名称</span><br><span class="line">      avatar: https:<span class="comment">//gauhar.gitee.io/css/images/logo.jpg # 头像</span></span><br><span class="line">      url: https:<span class="comment">//gauhar.gitee.io/ # 链接</span></span><br><span class="line">      screenshot: # 截图</span><br><span class="line">      keywords: [js, vue，jQuery] # 关键词</span><br><span class="line">      description: 华仔的博客 # 描述</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改博客主题-config-yml-config-valantis-yml"><a href="#修改博客主题-config-yml-config-valantis-yml" class="headerlink" title="修改博客主题 _config.yml / _config.valantis.yml"></a>修改博客主题 _config.yml / _config.valantis.yml</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br></pre></td><td class="code"><pre><span class="line">use_cdn: <span class="literal">false</span></span><br><span class="line">navbar:</span><br><span class="line">  logo: # choose [img] or [icon + title]</span><br><span class="line">    img: #https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png</span></span><br><span class="line">    icon:</span><br><span class="line">    title: <span class="string">&quot;Mr.wang&quot;</span></span><br><span class="line">  menu:</span><br><span class="line">    - name: 博客</span><br><span class="line">      icon: fas fa-rss</span><br><span class="line">      url: /</span><br><span class="line">    - name: 分类</span><br><span class="line">      icon: fas fa-folder-open</span><br><span class="line">      url: categories/</span><br><span class="line">    - name: 标签</span><br><span class="line">      icon: fas fa-tags</span><br><span class="line">      url: tags/</span><br><span class="line">    - name: 归档</span><br><span class="line">      icon: fas fa-archive</span><br><span class="line">      url: archives/</span><br><span class="line">    - name: 友链</span><br><span class="line">      icon: fas fa-link</span><br><span class="line">      url: friends/</span><br><span class="line">    - name: 关于</span><br><span class="line">      icon: fas fa-info-circle</span><br><span class="line">      url: about/</span><br><span class="line">    - name: 暗黑模式</span><br><span class="line">      icon: fas fa-moon</span><br><span class="line">      toggle: darkmode</span><br><span class="line">    - name: 背景音乐</span><br><span class="line">      icon: fas fa-compact-disc</span><br><span class="line">cover:</span><br><span class="line">  height_scheme: full # full, half</span><br><span class="line">  title: <span class="string">&quot;Mr.wang&quot;</span></span><br><span class="line">  subtitle: <span class="string">&quot;Time flies and people come and go&quot;</span></span><br><span class="line">  display:</span><br><span class="line">    home: <span class="literal">true</span></span><br><span class="line">    archive: <span class="literal">true</span></span><br><span class="line">    others: <span class="literal">true</span></span><br><span class="line">  background: # https://bing.ioliu.cn/v1/rand?w=1920&amp;h=1200</span><br><span class="line">  features:</span><br><span class="line">    - name: 博客</span><br><span class="line">      img: https:<span class="comment">//cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4f0.svg</span></span><br><span class="line">      url: /</span><br><span class="line"></span><br><span class="line">    # - name: 文档</span><br><span class="line">    #   img: https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f516.svg</span><br><span class="line">    #   url: /v5/getting-started/</span><br><span class="line">    #   target: _self</span><br><span class="line">    # - name: 示例</span><br><span class="line">    #   img: https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4af.svg</span><br><span class="line">    #   url: /examples/</span><br><span class="line">    # - name: 帮助</span><br><span class="line">    #   img: https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4ac.svg</span><br><span class="line">    #   url: /faqs/</span><br><span class="line">    # - name: 鸣谢</span><br><span class="line">    #   img: https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f497.svg</span><br><span class="line">    #   url: /contributors/</span><br><span class="line">    - name: 归档</span><br><span class="line">      img: https:<span class="comment">//cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f5c3.svg</span></span><br><span class="line">      url: <span class="regexp">/archives/</span></span><br><span class="line">    # - name: 源码</span><br><span class="line">    #   img: https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f9ec.svg</span><br><span class="line">    #   url: https://github.com/volantis-x/hexo-theme-volantis/</span><br><span class="line">    #   target: _self</span><br><span class="line">article:</span><br><span class="line">  preview:</span><br><span class="line">    scheme: landscape # landscape</span><br><span class="line">    # pin icon for post</span><br><span class="line">    pin_icon: # https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4cc.svg</span><br><span class="line">    # auto generate title if not exist</span><br><span class="line">    auto_title: false # false, true</span><br><span class="line">    # auto generate excerpt if not exist</span><br><span class="line">    auto_excerpt: false # false, true</span><br><span class="line">    author: <span class="literal">true</span></span><br><span class="line">    # show readmore button</span><br><span class="line">    readmore: auto # auto, always</span><br><span class="line">  body:</span><br><span class="line">    meta_library:</span><br><span class="line">      author:</span><br><span class="line">        avatar: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/apple-touch-icon.png</span></span><br><span class="line">        name: Volantis Team</span><br><span class="line">        url: https:<span class="comment">//github.com/volantis-x/</span></span><br><span class="line">      updated:</span><br><span class="line">        title: <span class="string">&quot;本页文档最后更新于：&quot;</span></span><br><span class="line"></span><br><span class="line">comments:</span><br><span class="line">  title: <span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fas fa-comments&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> 评论</span><br><span class="line">  subtitle:</span><br><span class="line">  service: valine</span><br><span class="line"></span><br><span class="line">pages:</span><br><span class="line">  # 友链页面配置</span><br><span class="line">  friends:</span><br><span class="line">    layout_scheme: traditional</span><br><span class="line"></span><br><span class="line">sidebar:</span><br><span class="line">  # 主页、分类、归档等独立页面</span><br><span class="line">  for_page: [blogger, category, tagcloud, qrcode]</span><br><span class="line">  # layout: docs/post 这类文章页面</span><br><span class="line">  for_post: [toc]</span><br><span class="line">  # 侧边栏组件库</span><br><span class="line">  widget_library:</span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # blogger info widget</span><br><span class="line">    blogger:</span><br><span class="line">      class: blogger</span><br><span class="line">      display: [desktop, mobile] # [desktop, mobile]</span><br><span class="line">      avatar: https:<span class="comment">//wang-z.gitee.io/img/author.jpg</span></span><br><span class="line">      shape: rectangle # circle, rectangle</span><br><span class="line">      url: <span class="regexp">/about/</span></span><br><span class="line">      title:</span><br><span class="line">      subtitle:</span><br><span class="line">      jinrishici: true # Poetry Today. You can set a string, and it will be displayed when loading fails.</span><br><span class="line">      social: <span class="literal">true</span></span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # toc widget (valid only in articles)</span><br><span class="line">    toc:</span><br><span class="line">      class: toc</span><br><span class="line">      display: [desktop, mobile] # [desktop, mobile]</span><br><span class="line">      header:</span><br><span class="line">        icon: fas fa-list</span><br><span class="line">        title: 本文目录</span><br><span class="line">      list_number: <span class="literal">false</span></span><br><span class="line">      min_depth: <span class="number">2</span></span><br><span class="line">      max_depth: <span class="number">5</span></span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # category widget</span><br><span class="line">    category:</span><br><span class="line">      class: category</span><br><span class="line">      display: [desktop] # [desktop, mobile]</span><br><span class="line">      header:</span><br><span class="line">        icon: fas fa-folder-open</span><br><span class="line">        title: 文章分类</span><br><span class="line">        url: <span class="regexp">/blog/</span>categories/</span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # tagcloud widget</span><br><span class="line">    tagcloud:</span><br><span class="line">      class: tagcloud</span><br><span class="line">      display: [desktop, mobile] # [desktop, mobile]</span><br><span class="line">      header:</span><br><span class="line">        icon: fas fa-tags</span><br><span class="line">        title: 热门标签</span><br><span class="line">        url: <span class="regexp">/blog/</span>tags/</span><br><span class="line">      min_font: <span class="number">14</span></span><br><span class="line">      max_font: <span class="number">24</span></span><br><span class="line">      color: <span class="literal">true</span></span><br><span class="line">      start_color: <span class="string">&quot;#999&quot;</span></span><br><span class="line">      end_color: <span class="string">&quot;#555&quot;</span></span><br><span class="line"></span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # qrcode widget</span><br><span class="line">    donate:</span><br><span class="line">      class: qrcode</span><br><span class="line">      display: [desktop, mobile] # [desktop, mobile]</span><br><span class="line">      height: 64px # Automatic height if not set</span><br><span class="line">      images:</span><br><span class="line">        - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">        - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/qrcode/github@volantis.png</span></span><br><span class="line">    # ---------------------------------------</span><br><span class="line">    # webinfo widget</span><br><span class="line">    webinfo:</span><br><span class="line">      class: webinfo</span><br><span class="line">      display: [desktop]</span><br><span class="line">      header:</span><br><span class="line">        icon: fas fa-award</span><br><span class="line">        title: 站点信息</span><br><span class="line">      type:</span><br><span class="line">        article:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          text: <span class="string">&quot;文章数目：&quot;</span></span><br><span class="line">          unit: <span class="string">&quot;篇&quot;</span></span><br><span class="line">        runtime:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          data: &quot;2020/01/01&quot; # 填写建站日期</span><br><span class="line">          text: <span class="string">&quot;已运行时间：&quot;</span></span><br><span class="line">          unit: <span class="string">&quot;天&quot;</span></span><br><span class="line">        wordcount:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          text: &quot;本站总字数：&quot; # 需要启用 wordcount</span><br><span class="line">          unit: <span class="string">&quot;字&quot;</span></span><br><span class="line">        siteuv:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          text: &quot;本站访客数：&quot; # 需要启用 busuanzi</span><br><span class="line">          unit: <span class="string">&quot;人&quot;</span></span><br><span class="line">        sitepv:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          text: &quot;本站总访问量：&quot; # 需要启用 busuanzi</span><br><span class="line">          unit: <span class="string">&quot;次&quot;</span></span><br><span class="line">        lastupd:</span><br><span class="line">          enable: <span class="literal">true</span></span><br><span class="line">          friendlyShow: true # 更友好的时间显示</span><br><span class="line">          text: <span class="string">&quot;最后活动时间：&quot;</span></span><br><span class="line">          unit: <span class="string">&quot;日&quot;</span></span><br><span class="line"></span><br><span class="line">site_footer:</span><br><span class="line">  layout: [aplayer, social, source, analytics, copyright]</span><br><span class="line">  copyright: <span class="string">&quot;[Copyright © 2017-2021 Volantis Team](https://github.com/volantis-x/)&quot;</span></span><br><span class="line">  social:</span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/020-rss.svg</span></span><br><span class="line">      url: atom.xml</span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/029-github.svg</span></span><br><span class="line">      url: https:<span class="comment">//github.com/volantis-x/</span></span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/010-facebook.svg</span></span><br><span class="line">      url: /</span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/018-twitter.svg</span></span><br><span class="line">      url: /</span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/045-telegram.svg</span></span><br><span class="line">      url: /</span><br><span class="line">    - img: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-org@1.1/icon/1322024-social-media/006-youtube.svg</span></span><br><span class="line">      url: /</span><br><span class="line"></span><br><span class="line">tag_plugins:</span><br><span class="line">  # &#123;% note text %&#125;</span><br><span class="line">  note: # style for default note:</span><br><span class="line">    iconfont: <span class="string">&quot;Font Awesome 5 Pro&quot;</span></span><br><span class="line"></span><br><span class="line">plugins:</span><br><span class="line">  clipboard:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">  fontawesome: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-fontawesome-pro@master/css/all.min.css</span></span><br><span class="line">  highlightjs:</span><br><span class="line">    enable: true # Please set hexo.config.highlight.enable = false !!!</span><br><span class="line">    js: https:<span class="comment">//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10/build/highlight.min.js</span></span><br><span class="line">    css: https:<span class="comment">//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10/build/styles/solarized-light.min.css</span></span><br><span class="line">  lazyload:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    js: https:<span class="comment">//cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js</span></span><br><span class="line">    onlypost: <span class="literal">false</span></span><br><span class="line">    loadingImg: # https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@3/img/placeholder/c617bfd2497fcea598e621413e315c368f8d8e.svg</span><br><span class="line">    blurIn: true # 模糊加载效果 （loadingImg为空时有效）</span><br><span class="line">  backstretch:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    # position: cover # cover: sticky on the cover.   fixed: Fixed as background for the site.</span><br><span class="line">    duration: 20000 # Duration (ms)</span><br><span class="line">    fade: 1500 # fade duration (ms) (Not more than 1500)</span><br><span class="line">    images: # For personal use only. At your own risk if used for commercial purposes !!!</span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/001.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/002.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/003.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/004.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/005.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/006.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/012.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/016.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/019.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/033.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/034.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/035.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/038.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/039.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/042.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/046.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/051.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/052.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/054.jpg</span></span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/056.jpg</span></span><br><span class="line">  parallax:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    images:</span><br><span class="line">      - https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/042.jpg</span></span><br><span class="line">  aplayer:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    autoplay: <span class="literal">false</span></span><br><span class="line">    volume: <span class="number">0.4</span></span><br><span class="line">    order: random</span><br><span class="line">    # id: 4917530132 # vol red</span><br><span class="line">    # id: 4917524698 # vol blue</span><br><span class="line">    # id: 76244489 # vol white</span><br><span class="line">    # id: 5135845906 # for Volantis 3.0</span><br><span class="line">    id: 5062959861 # TOP 30</span><br><span class="line">  darkmodejs:</span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">analytics:</span><br><span class="line">  busuanzi: #https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js</span></span><br><span class="line">  leancloud:</span><br><span class="line">    app_id: GCYDRKI6XRkyC7EuEhJv90ia-MdYXbMMI</span><br><span class="line">    app_key: 4xKBXGBj6BgecU62vff5rJHs</span><br><span class="line">    custom_api_server: # 一般不需要写，除非自定义了 API Server</span><br><span class="line"></span><br><span class="line">custom_css:</span><br><span class="line">  font_smoothing: <span class="literal">true</span></span><br><span class="line">  sidebar:</span><br><span class="line">    effect: [shadow] # [shadow, floatable, blur]</span><br><span class="line">  body:</span><br><span class="line">    effect: [shadow] # [shadow, floatable, blur]</span><br><span class="line">  fontfamily:</span><br><span class="line">    logofont:</span><br><span class="line">      fontfamily: <span class="string">&#x27;Dosis, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      name: <span class="string">&quot;Dosis&quot;</span></span><br><span class="line">      url: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-fonts@20.5.30/Dosis/Dosis-Medium.ttf</span></span><br><span class="line">      weight: normal</span><br><span class="line">      style: normal</span><br><span class="line">    bodyfont:</span><br><span class="line">      fontfamily: <span class="string">&#x27;Dosis, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      name: <span class="string">&quot;Dosis&quot;</span></span><br><span class="line">      url: https:<span class="comment">//cdn.jsdelivr.net/gh/volantis-x/cdn-fonts@20.5.30/Dosis/Dosis-Medium.ttf</span></span><br><span class="line">      weight: normal</span><br><span class="line">      style: normal</span><br><span class="line"># # 自定义右键菜单</span><br><span class="line"># rightmenu:</span><br><span class="line">#   enable: true</span><br><span class="line">#   # hr: 分割线, music: 音乐控制器</span><br><span class="line">#   layout: [home, hr, dark_mode, hr, music]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="增加看板娘live2d插件-在主题yml修改"><a href="#增加看板娘live2d插件-在主题yml修改" class="headerlink" title="增加看板娘live2d插件(在主题yml修改)"></a>增加看板娘live2d插件(在主题yml修改)</h3><blockquote><p>使用第三方的库配置一个好看的右下角看板娘功能</p><p>需要下载一个基础live2d以及不同的看板娘</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-helper-live2d</span><br></pre></td></tr></table></figure><h4 id="我使用的看板娘"><a href="#我使用的看板娘" class="headerlink" title="我使用的看板娘"></a>我使用的看板娘</h4><p><img src="https://wang-z.gitee.io/img/hexo-live2d-koharu.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/hexo-live2d-koharu.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vue-driverjs"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i live2d-widget-model-koharu</span><br></pre></td></tr></table></figure><h3 id="网上的看板娘"><a href="#网上的看板娘" class="headerlink" title="网上的看板娘"></a>网上的看板娘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># Live2D</span><br><span class="line">## https://github.com/EYHN/hexo-helper-live2d</span><br><span class="line">## https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init</span><br><span class="line">live2d:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  #enable: <span class="literal">false</span></span><br><span class="line">  scriptFrom: local # 默认</span><br><span class="line">  pluginRootPath: live2dw/ # 插件在站点上的根目录(相对路径)</span><br><span class="line">  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径</span><br><span class="line">  pluginModelPath: assets/ # 模型文件相对与插件根目录路径</span><br><span class="line">  # scriptFrom: jsdelivr # jsdelivr CDN</span><br><span class="line">  # scriptFrom: unpkg # unpkg CDN</span><br><span class="line">  # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span><br><span class="line">  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span><br><span class="line">  debug: true # 调试, 是否在控制台输出日志</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-koharu</span><br><span class="line">    # use: live2d-widget-model-wanko # npm-module package name</span><br><span class="line">    # use: wanko # 博客根目录/live2d_models/ 下的目录名</span><br><span class="line">    # use: ./wives/wanko # 相对于博客根目录的路径</span><br><span class="line">    # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: <span class="number">145</span></span><br><span class="line">    height: <span class="number">315</span></span><br><span class="line">  mobile:</span><br><span class="line">    show: false # 是否在移动设备上显示</span><br><span class="line">    scale: 0.5 # 移动设备上的缩放       </span><br><span class="line">  react:</span><br><span class="line">    opacityDefault: <span class="number">0.7</span></span><br><span class="line">    opacityOnHover: <span class="number">0.8</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>记录当前主题的一些页面常用参数</p></blockquote><h2 id="front-matter"><a href="#front-matter" class="headerlink" title="front-matter"></a>front-matter</h2><p>front-matter 是文件最上方以 <code>---</code> 分隔的区域，用于指定个别文件的变量。更多请见 Hexo 官方文档：<a href="https://hexo.io/zh-cn/docs/front-matter">#front-matter</a></p><table><thead><tr><th>字段</th><th>含义</th><th>值类型</th><th>默认值</th></tr></thead><tbody><tr><td>layout</td><td>布局模版</td><td>String</td><td>-</td></tr><tr><td>title</td><td>页面标题</td><td>String</td><td>-</td></tr><tr><td>seo_title</td><td>网页标题</td><td>String</td><td>page.title</td></tr><tr><td>short_title</td><td>页面标题（在 group 列表中显示）</td><td>String</td><td>page.title</td></tr><tr><td>date</td><td>创建时间</td><td>Date</td><td>文件创建时间</td></tr><tr><td>updated</td><td>更新日期</td><td>Date</td><td>文件修改时间</td></tr><tr><td>link</td><td>外部文章网址</td><td>String</td><td>-</td></tr><tr><td>music</td><td>内部音乐控件</td><td>[Object]</td><td>-</td></tr><tr><td>robots</td><td>robots</td><td>String</td><td>-</td></tr><tr><td>keywords</td><td>页面关键词</td><td>String</td><td>-</td></tr><tr><td>description</td><td>页面描述、摘要</td><td>String</td><td>-</td></tr><tr><td>cover</td><td>是否显示封面</td><td>Bool</td><td>true</td></tr><tr><td>top_meta</td><td>是否显示文章或页面顶部的 meta 信息</td><td>Bool</td><td>true</td></tr><tr><td>bottom_meta</td><td>是否显示文章或页面底部的 meta 信息</td><td>Bool</td><td>true</td></tr><tr><td>sidebar</td><td>页面侧边栏</td><td>Bool, Array</td><td>theme.layout.*.sidebar</td></tr><tr><td>body</td><td>页面主体元素</td><td>Array</td><td>theme.layout.on_page.body</td></tr><tr><td>mathjax</td><td>是否渲染公式</td><td>Bool, String</td><td>false</td></tr><tr><td>thumbnail</td><td>缩略图</td><td>String</td><td>false</td></tr><tr><td>icons</td><td>图标</td><td>Array</td><td>[]</td></tr><tr><td>pin</td><td>是否置顶</td><td>Bool</td><td>false</td></tr><tr><td>headimg</td><td>文章头图</td><td>url</td><td>-</td></tr></tbody></table><p><code>layout:post</code> 时特有的字段：</p><table><thead><tr><th>字段</th><th>含义</th><th>值类型</th><th>默认值</th></tr></thead><tbody><tr><td>author</td><td>文章作者</td><td>[Object]</td><td>config.author</td></tr><tr><td>categories</td><td>分类</td><td>String, Array</td><td>-</td></tr><tr><td>tags</td><td>标签</td><td>String, Array</td><td>-</td></tr><tr><td>toc</td><td>是否生成目录</td><td>Bool</td><td>true</td></tr></tbody></table><h3 id="文章摘要"><a href="#文章摘要" class="headerlink" title="文章摘要"></a>文章摘要</h3><p>在文章中插入 <code>&lt;!-- more --&gt;</code>，前面的部分即为摘要。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-脚手架配置</title>
      <link href="2021/04/01/vue-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%85%8D%E7%BD%AE/"/>
      <url>2021/04/01/vue-%E8%84%9A%E6%89%8B%E6%9E%B6%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue-cli 的配置，由于脚手架的 vue-cli 版本不一致可能导致不适，请注意版本问题</p></blockquote><span id="more"></span><h2 id="SVG-的显示配置"><a href="#SVG-的显示配置" class="headerlink" title="SVG 的显示配置"></a>SVG 的显示配置</h2><blockquote><p>需要 npm i svg-sprite-loader</p><p>在 vue.config 中新加 babel</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  config.module.rule(<span class="string">&quot;svg&quot;</span>).exclude.add(resolve(<span class="string">&quot;src/icons&quot;</span>)).end();</span><br><span class="line">  config.module</span><br><span class="line">    .rule(<span class="string">&quot;icons&quot;</span>)</span><br><span class="line">    .test(<span class="regexp">/\.svg$/</span>)</span><br><span class="line">    .include.add(resolve(<span class="string">&quot;src/icons&quot;</span>))</span><br><span class="line">    .end()</span><br><span class="line">    .use(<span class="string">&quot;svg-sprite-loader&quot;</span>)</span><br><span class="line">    .loader(<span class="string">&quot;svg-sprite-loader&quot;</span>)</span><br><span class="line">    .options(&#123;</span><br><span class="line">      symbolId: <span class="string">&quot;icon-[name]&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    .end();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>resolve 是引入 svg 的一个函数 但是在各种配置中可能不一定相同 有可能使用 vue-cli 已有的 resolve ,最简单的就是自己写一个函数,本质是使用 path 的方法</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">&quot;./&quot;</span>, dir);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vue-配置页面预渲染（将页面静态化，便于-seo-读取）"><a href="#vue-配置页面预渲染（将页面静态化，便于-seo-读取）" class="headerlink" title="vue 配置页面预渲染（将页面静态化，便于 seo 读取）"></a>vue 配置页面预渲染（将页面静态化，便于 seo 读取）</h2><blockquote><p>在项目中安装 prerender-spa-plugin</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save prerender-spa-plugin</span><br></pre></td></tr></table></figure><blockquote><p>在 vue.config.js 中引入并配置</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PrerenderSPAPlugin = <span class="built_in">require</span>(<span class="string">&quot;prerender-spa-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> Renderer = PrerenderSPAPlugin.PuppeteerRenderer;</span><br><span class="line">configureWebpack: &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> PrerenderSPAPlugin(&#123;</span><br><span class="line">      <span class="comment">// 生成文件的路径，也可以与webpakc打包的一致。</span></span><br><span class="line">      <span class="comment">// 下面这句话非常重要！！！</span></span><br><span class="line">      <span class="comment">// 这个目录只能有一级，如果目录层次大于一级，在生成的时候不会有任何错误提示，在预渲染的时候只会卡着不动。</span></span><br><span class="line">      staticDir: path.join(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">      <span class="comment">// 对应自己的路由文件，比如a有参数，就需要写成 /a/param1。</span></span><br><span class="line">      routes: [<span class="string">&quot;/&quot;</span>, <span class="string">&quot;/team&quot;</span>, <span class="string">&quot;/analyst&quot;</span>, <span class="string">&quot;/voter&quot;</span>, <span class="string">&quot;/sponsor&quot;</span>],</span><br><span class="line">      <span class="comment">// 这个很重要，如果没有配置这段，也不会进行预编译</span></span><br><span class="line">      renderer: <span class="keyword">new</span> Renderer(&#123;</span><br><span class="line">        inject: &#123;</span><br><span class="line">          foo: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        headless: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 在 main.js 中 document.dispatchEvent(new Event(&#x27;render-event&#x27;))，两者的事件名称要对应上。</span></span><br><span class="line">        renderAfterDocumentEvent: <span class="string">&quot;render-event&quot;</span>,</span><br><span class="line">        renderAfterTime: <span class="number">10000</span>, <span class="comment">//超时时间</span></span><br><span class="line">        timeout: <span class="number">0</span>,</span><br><span class="line">        maxConcurrentRoutes: <span class="number">20</span>, <span class="comment">//打包页面的最大数</span></span><br><span class="line">        navigationParams: &#123;</span><br><span class="line">          timeout: <span class="number">0</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> vue，vue-cli </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>终端常用命令</title>
      <link href="2021/02/24/cmd-%E5%B8%B8%E7%94%A8%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/"/>
      <url>2021/02/24/cmd-%E5%B8%B8%E7%94%A8%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>终端常用命令</p></blockquote><span id="more"></span><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">touch——创建一个文件——mkdir dirname.js</span><br><span class="line">mkdir——创建一个目录——mkdir dirname</span><br><span class="line"><span class="built_in">rmdir</span>——删除一个目录——<span class="built_in">rmdir</span> dirname</span><br><span class="line">mvdir——移动或重命名一个目录——mvdir dir1 dir2</span><br><span class="line"><span class="built_in">cd</span>——改变当前目录——<span class="built_in">cd</span> dirname</span><br><span class="line"><span class="built_in">pwd</span>——显示当前目录的路径名——<span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">ls</span>——显示当前目录的内容——<span class="built_in">ls</span> <span class="literal">-la</span></span><br><span class="line">dircmp——比较两个目录的内容——dircmp dir1 dir2</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span>——显示或连接文件————<span class="built_in">cat</span> filename</span><br><span class="line">pg分页格式化显示文件内容——pg filename</span><br><span class="line">more——分屏显示文件内容——more filename</span><br><span class="line">od——显示非文本文件的内容——od <span class="literal">-c</span> filename</span><br><span class="line"><span class="built_in">cp</span>——复制文件或目录——<span class="built_in">cp</span> file1 file2</span><br><span class="line"><span class="built_in">rm</span>——删除文件或目录——<span class="built_in">rm</span> filename</span><br><span class="line"><span class="built_in">mv</span>——改变文件名或所在目录——<span class="built_in">mv</span> file1 file2</span><br><span class="line">ln——联接文件——ln <span class="literal">-s</span> file1 file2</span><br><span class="line">find——使用匹配表达式查找文件——find . <span class="literal">-name</span> “*.c” <span class="literal">-print</span></span><br><span class="line">file——显示文件类型——file filename</span><br><span class="line">open——使用默认的程序打开文件——open filename（open . 打开当前目录）</span><br><span class="line"></span><br><span class="line">head——显示文件的最初几行——head <span class="literal">-20</span> filename</span><br><span class="line">tail——显示文件的最后几行——tail <span class="literal">-15</span> filename</span><br><span class="line">cut——显示文件每行中的某些域——cut <span class="literal">-f1</span>,<span class="number">7</span> <span class="literal">-d</span>: /etc/passwd</span><br><span class="line">colrm——从标准输入中删除若干列——colrm <span class="number">8</span> <span class="number">20</span> file2</span><br><span class="line">paste——横向连接文件——paste file1 file2</span><br><span class="line"><span class="built_in">diff</span>——比较并显示两个文件的差异——<span class="built_in">diff</span> file1 file2</span><br><span class="line">sed————非交互方式流编辑器——sed “s/red/green/g” filename</span><br><span class="line">grep——在文件中按模式查找——grep “^[<span class="type">a</span>-<span class="type">zA</span>-<span class="type">Z</span>]” filename</span><br><span class="line">awk——在文件中查找并处理模式——awk ‘&#123;print <span class="number">111</span>&#125;’ filename</span><br><span class="line"><span class="built_in">sort</span>——排序或归并文件——<span class="built_in">sort</span> <span class="literal">-d</span> <span class="operator">-f</span> <span class="literal">-u</span> file1</span><br><span class="line">uniq——去掉文件中的重复行——uniq file1 file2</span><br><span class="line">comm——显示两有序文件的公共和非公共行——comm file1 file2</span><br><span class="line">wc——统计文件的字符数、词数和行数——wc filename</span><br><span class="line">nl——给文件加上行号——nl file1 &gt;file2</span><br><span class="line"></span><br><span class="line">passwd——修改用户密码——passwd</span><br><span class="line">chmod——改变文件或目录的权限——chmod ug+x filename</span><br><span class="line">umask————定义创建文件的权限掩码——umask <span class="number">027</span></span><br><span class="line">chown——改变文件或目录的属主——chown newowner filename</span><br><span class="line">chgrp——改变文件或目录的所属组——chgrp staff filename</span><br><span class="line">xlock——给终端上锁——xlock <span class="literal">-remote</span></span><br><span class="line"></span><br><span class="line">make——维护可执行程序的最新版本——make</span><br><span class="line">touch——更新文件的访问和修改时间——touch <span class="literal">-m</span> <span class="number">05202400</span> filename</span><br><span class="line">dbx——命令行界面调试工具——dbx a.out</span><br><span class="line">xde——图形用户界面调试工具——xde a.out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">ps</span>——显示进程当前状态——<span class="built_in">ps</span> u</span><br><span class="line"><span class="built_in">kill</span>——终止进程——<span class="built_in">kill</span> <span class="literal">-9</span> <span class="number">30142</span></span><br><span class="line">nice——改变待执行命令的优先级——nice cc <span class="literal">-c</span> *.c</span><br><span class="line">renice——改变已运行进程的优先级——renice +<span class="number">20</span> <span class="number">32768</span></span><br><span class="line"></span><br><span class="line">date——显示系统的当前日期和时间——date</span><br><span class="line">cal——显示日历——cal <span class="number">8</span> <span class="number">1996</span></span><br><span class="line">time——统计程序的执行时间——time a.out</span><br><span class="line"></span><br><span class="line">telnet——远程登录——telnet hpc.sp.net.edu.cn</span><br><span class="line">rlogin——远程登录——rlogin hostname <span class="literal">-l</span> username</span><br><span class="line">rsh——在远程主机执行指定命令——rsh f01n03 date</span><br><span class="line">ftp——在本地主机与远程主机之间传输文件——ftp ftp.sp.net.edu.cn</span><br><span class="line">rcp——在本地主机与远程主机 之间复制文件——rcp file1 host1:file2</span><br><span class="line">ping——给一个网络主机发送 回应请求——ping hpc.sp.net.edu.cn</span><br><span class="line">mail——阅读和发送电子邮件——mail</span><br><span class="line"><span class="built_in">write</span>——给另一用户发送报文——<span class="built_in">write</span> username pts/<span class="number">1</span></span><br><span class="line">mesg——允许或拒绝接收报文——mesg n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">history</span>——列出最近执行过的 几条命令及编号——<span class="built_in">history</span></span><br><span class="line"><span class="built_in">r</span>——重复执行最近执行过的 某条命令——<span class="built_in">r</span> <span class="literal">-2</span></span><br><span class="line">alias——给某个命令定义别名——alias <span class="built_in">del</span>=<span class="built_in">rm</span> <span class="literal">-i</span></span><br><span class="line">unalias——取消对某个别名的定义——unalias <span class="built_in">del</span></span><br><span class="line">uname——显示操作系统的有关信息——uname <span class="literal">-a</span></span><br><span class="line"><span class="built_in">clear</span>——清除屏幕或窗口内容——<span class="built_in">clear</span></span><br><span class="line">env——显示当前所有设置过的环境变量——env</span><br><span class="line">who——列出当前登录的所有用户——who</span><br><span class="line">whoami——显示当前正进行操作的用户名——whoami</span><br><span class="line">tty——显示终端或伪终端的名称——tty</span><br><span class="line">stty——显示或重置控制键定义——stty <span class="literal">-a</span></span><br><span class="line">du——查询磁盘使用情况——du <span class="literal">-k</span> subdir</span><br><span class="line">df——显示文件系统的总空间和可用空间——df /tmp</span><br><span class="line">w——显示当前系统活动的总信息——w</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p> 一些常用技巧</p></blockquote><ul><li>所以你可以使用▲（上箭头）或▼（下箭头）来上下移动，</li><li>使用　空格键 来翻页，输入/和关键字来按照关键字搜索</li><li>按Q来退出使用指南页面</li><li>tab按键自动补全唯一路径</li><li>中止一个错误的或者发疯的命令，可以使用组合键control + C。</li><li>你可以在执行前编辑命令，只需要使用箭头和键盘上的其他字母。</li><li>没有输入任何命令时，你可以用▲和▼来浏览历史命令。同样可以编辑和再次执行。</li><li>你也可以使用history命令查看历史记录。</li><li>你可以使用组合键control + L清屏。</li></ul>]]></content>
      
      
      <categories>
          
          <category> cmd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cmd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql学习笔记</title>
      <link href="2021/01/07/sql-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2021/01/07/sql-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录sql学习笔记</p></blockquote><span id="more"></span><h2 id="Mysql命名规范"><a href="#Mysql命名规范" class="headerlink" title="Mysql命名规范"></a>Mysql命名规范</h2><h3 id="数据库名"><a href="#数据库名" class="headerlink" title="数据库名"></a>数据库名</h3><blockquote><p>不可使用数据库关键字作为数据库对象</p><p>命名应该按实际开发需要建立</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w_user(用户数据库)</span><br><span class="line"> - user_account(账户表)</span><br></pre></td></tr></table></figure><blockquote><p>临时表命名</p><p>临时表以tmp为前缀并以日期为后缀</p></blockquote><blockquote><p>备份表以bak为前缀并以日期为后缀</p></blockquote><blockquote><p>所有存储相同索引的表 需要保证列名列类型必须一致</p></blockquote><blockquote><p>UTF8中的汉字占三个字节 ASCII码占1个字节</p></blockquote><blockquote><p>建表需要添加表和列的备注</p></blockquote><h3 id="数据库限制"><a href="#数据库限制" class="headerlink" title="数据库限制"></a>数据库限制</h3><blockquote><p>单表数据量大小限制为 500万以内 性能更佳</p><p>单表数据量最大行数无限制 取决存储设置和文件系统</p></blockquote><blockquote><p>限制最多存储4096列(占用内存，IO占用)</p><p>每一行数据不能超过6556字节</p><p><code>冷热数据分离</code></p></blockquote><blockquote><p><font style="color:red">禁止</font>在表中建立预留字段<br>语义不明，类型不清</p><p>修改时，会对表进行锁定</p></blockquote><blockquote><p><font style="color:red">禁止</font>在数据库存储图片，文件等二进制数据</p><p>存储链接</p></blockquote><blockquote><p><font style="color:red">禁止</font>在线上做数据库压力测试</p></blockquote><blockquote><p><font style="color:red">禁止</font>开发环境，测试环境直连生产环境</p></blockquote><h2 id="Mysql索引设计规范"><a href="#Mysql索引设计规范" class="headerlink" title="Mysql索引设计规范"></a>Mysql索引设计规范</h2><blockquote><p>每个表必须有一个主键</p><p>不使用更新频繁和多列的列</p><p>不使用<code>UUID</code>,<code>MD5</code>,<code>HASH</code>,<code>字符串</code>作为主键</p><p>建议使用自增ID值 </p></blockquote><blockquote><p>限制每个表索引数量，单表索引不超5个</p></blockquote><blockquote><p><font style="color:red">禁止</font>给表的每一列都建立单独索引</p></blockquote><blockquote><p>索引列的顺序</p><p>区分度最高的列反正联合索引的最左侧</p><p>尽量把字段长度小的放在联合索引最左侧</p><p>最频繁的列放在联合索引左侧</p></blockquote><blockquote><p>避免建立冗余和重复的索引</p></blockquote><blockquote><p>尽量避免使用外键</p></blockquote><h2 id="Mysql数据库字段设计规范"><a href="#Mysql数据库字段设计规范" class="headerlink" title="Mysql数据库字段设计规范"></a>Mysql数据库字段设计规范</h2><blockquote><p>优先存储需要的最小数据类型</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将字符串转化为数字类型存储</span><br><span class="line">INET_ATON(&quot;255.255.255.255&quot;) <span class="operator">=</span> <span class="number">4294967295</span></span><br><span class="line">INET_NTOA(<span class="number">4294967295</span>) <span class="operator">=</span> &quot;255.255.255.255&quot;</span><br></pre></td></tr></table></figure><blockquote><p>varchar(n)中的n代表是字符数，不是字节数</p></blockquote><blockquote><p>避免使用TEXT BLOB数据类型</p><p>建议将这些类型分离到单独的扩展表中</p></blockquote><blockquote><p>避免使用ENUM数据类型</p><p>修改时，需要使用ALTER语句</p><p>ORDER BY操作效率低 需要而外操作</p><p><font style="color:red">禁止</font>使用数值作为枚举值</p></blockquote><blockquote><p>尽可能把列定义为NOT NULL(非空)</p></blockquote><blockquote><p>金额相关的字段使用 <code>decimal</code>类型</p></blockquote><blockquote><p>使用datetime或timestamp类型存储时间</p></blockquote><h2 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h2><blockquote><p>预编译语句进行操作</p></blockquote><blockquote><p>避免数据类型隐式转化</p></blockquote><blockquote><p>禁止使用select *查询 及没有子段列表的insert操作</p></blockquote><blockquote><p>优先利用表上已经存在的索引</p></blockquote><h2 id="操作行为规范"><a href="#操作行为规范" class="headerlink" title="操作行为规范"></a>操作行为规范</h2><blockquote><p>超100万行的批量操作写，要分批多次进行操作</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ts学习笔记</title>
      <link href="2020/12/29/ts-ts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/12/29/ts-ts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ts学习笔记</p></blockquote><span id="more"></span><h3 id="安装typescript编译"><a href="#安装typescript编译" class="headerlink" title="安装typescript编译"></a>安装typescript编译</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm i -g typescipt</span><br><span class="line"><span class="comment">//当前版本</span></span><br><span class="line">tsc -v</span><br><span class="line"><span class="comment">//编译为js</span></span><br><span class="line">tsc &lt;ts文件&gt;</span><br></pre></td></tr></table></figure><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join</span>(<span class="params">word: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span> + word</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>参数类型错误</p><p><font color='red'> error Argument of type ‘number[]’ is not assignable to parameter of type ‘string’</font></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let word &#x3D; [0, 1];</span><br><span class="line">console.log(join(word));</span><br></pre></td></tr></table></figure><blockquote><p>多个参数错误</p><p><font color='red'> error Type ‘null’ is not assignable to type ‘number’.</font></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let word &#x3D; [0, 1];</span><br><span class="line">console.log(join(word, 1));</span><br></pre></td></tr></table></figure><blockquote><p>严格模式检查null</p><p><font color='red'> error Argument of type ‘number[]’ is not assignable to parameter of type ‘string’</font></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let n: number &#x3D; 4</span><br><span class="line">n &#x3D; null</span><br></pre></td></tr></table></figure><blockquote><p>元组报错</p><p>未定义的元组下标不能赋值，索引不能超过定义的长度  </p><p><font color='red'> error Type ‘“wang”‘ is not assignable to type ‘undefined’</font></p><p><font color='red'> Tuple type ‘[string, number]’ of length ‘2’ has no element at index ‘3’</font></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let tuple: [string, number]</span><br><span class="line">tuple[3] &#x3D; &quot;wang&quot;</span><br></pre></td></tr></table></figure><h3 id="ts接口定义参数类型"><a href="#ts接口定义参数类型" class="headerlink" title="ts接口定义参数类型"></a>ts接口定义参数类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Word &#123;</span><br><span class="line">    firstName: string,</span><br><span class="line">    lastName: string,</span><br><span class="line">&#125;</span><br><span class="line">function join(word: Word) &#123;</span><br><span class="line">    return &quot;hello &quot; + word</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ts基础类型"><a href="#ts基础类型" class="headerlink" title="ts基础类型"></a>ts基础类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">let isDone:boolean &#x3D; true&#x2F;false</span><br><span class="line">let num: number &#x3D; 20</span><br><span class="line">let str: string &#x3D; &quot;wang&quot;</span><br><span class="line">let str: string &#x3D; &#96;wang$&#123;num&#125;&#96;</span><br><span class="line">let arr: number[] &#x3D; [0, 1, 2]</span><br><span class="line">let arr:Array&lt;number&gt; &#x3D; [0,1,2]</span><br><span class="line">let arr: string[] &#x3D; [&quot;w&quot;, &quot;a&quot;, &quot;n&quot;,&quot;g&quot;]</span><br><span class="line">&#x2F;&#x2F;元祖</span><br><span class="line">let x:[string,number]</span><br><span class="line">x &#x3D; [&quot;wang&quot;,10]&#x2F;&#x2F;true</span><br><span class="line">x &#x3D; [10,&quot;wang&quot;]&#x2F;&#x2F;false</span><br><span class="line">x[0].sub(1)&#x2F;&#x2F;true(字符串上的方法)</span><br><span class="line">x[1].sub(1)&#x2F;&#x2F;false(数字没有方法)</span><br><span class="line">x[1&#x2F;0].toString()&#x2F;&#x2F;true(都有的内置方法)</span><br><span class="line">x[0] &#x3D; &quot;hello&quot;&#x2F;&#x2F;true</span><br><span class="line">x[1] &#x3D; 20&#x2F;&#x2F;true</span><br><span class="line">x[1] &#x3D; true &#x2F;&#x2F;false(只能是定义的元祖类型)</span><br><span class="line">&#x2F;&#x2F;枚举</span><br><span class="line">enum Color&#123;</span><br><span class="line">    Red,</span><br><span class="line">    Green,</span><br><span class="line">    Blue</span><br><span class="line">&#125;</span><br><span class="line">let c:Color &#x3D; Color.Green</span><br><span class="line">&#x2F;&#x2F;枚举有顺序 </span><br><span class="line">enum Color &#123;</span><br><span class="line">    Red,</span><br><span class="line">    Green,</span><br><span class="line">    Blue</span><br><span class="line">&#125;</span><br><span class="line">let colorName: string &#x3D; Color[0]</span><br><span class="line">console.log(colorName);&#x2F;&#x2F;Red</span><br><span class="line">&#x2F;&#x2F;编译结果</span><br><span class="line">var Color;</span><br><span class="line">(function (Color) &#123;</span><br><span class="line">    Color[Color[&quot;Red&quot;] &#x3D; 0] &#x3D; &quot;Red&quot;;</span><br><span class="line">    Color[Color[&quot;Green&quot;] &#x3D; 1] &#x3D; &quot;Green&quot;;</span><br><span class="line">    Color[Color[&quot;Blue&quot;] &#x3D; 2] &#x3D; &quot;Blue&quot;;</span><br><span class="line">&#125;)(Color || (Color &#x3D; &#123;&#125;));</span><br><span class="line">var colorName &#x3D; Color[0];</span><br><span class="line">console.log(colorName);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;可自定义枚举下标，下面的都按顺序递增</span><br><span class="line">enum Color &#123;</span><br><span class="line">    Red&#x3D;1,</span><br><span class="line">    Green,</span><br><span class="line">    Blue</span><br><span class="line">&#125;</span><br><span class="line">let colorName: string &#x3D; Color[2]</span><br><span class="line">console.log(colorName);&#x2F;&#x2F;Green</span><br><span class="line">&#x2F;&#x2F;any类型</span><br><span class="line">let notSure:any &#x3D; 4&#x2F;&quot;wang&quot;&#x2F;true</span><br><span class="line">let list:any[] &#x3D; [1,true,&quot;wang&quot;]</span><br><span class="line">&#x2F;&#x2F;void</span><br><span class="line">function wang():void &#123;</span><br><span class="line">    console.log(&quot;this is void&quot;)</span><br><span class="line">&#125;</span><br><span class="line">let wang:void &#x3D; null</span><br><span class="line">let wang:void &#x3D; undefined</span><br><span class="line"></span><br><span class="line">let wang:undefined &#x3D; undefined</span><br><span class="line">let wang:null &#x3D; null</span><br><span class="line">let wang:null &#x3D; undefined</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;联合类型</span><br><span class="line">let num:number | null &#x3D; 4&#x2F;null</span><br><span class="line">&#x2F;&#x2F;never</span><br><span class="line">function error(message:string):never&#123;</span><br><span class="line">    throw new Error(message)</span><br><span class="line">&#125;</span><br><span class="line">function fail()&#123;</span><br><span class="line">    return error(&quot;error&quot;)</span><br><span class="line">&#125;</span><br><span class="line">function inifiniteloop():never&#123;</span><br><span class="line">    while(true)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;object</span><br><span class="line">declare function create(o:objext|null):void</span><br><span class="line">create(o:&#123;props:0&#125;)</span><br><span class="line">create(o:null)</span><br><span class="line">create(o:&quot;wang&quot;)</span><br><span class="line">create(o:20)</span><br><span class="line">create(o:false)</span><br><span class="line">create(o:undefined)</span><br><span class="line">&#x2F;&#x2F;类型断言</span><br><span class="line">&#x2F;&#x2F;强制转化为一种类型</span><br><span class="line">let someValue:any &#x3D; &quot;wang&quot;</span><br><span class="line">let strlength:number &#x3D; (someValue as string).length</span><br></pre></td></tr></table></figure><h3 id="ts接口"><a href="#ts接口" class="headerlink" title="ts接口"></a>ts接口</h3><blockquote><p>必须的接口</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    firstName: <span class="built_in">string</span>,</span><br><span class="line">    lastName: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join</span>(<span class="params">person: Person</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span> + person.firstName + <span class="string">&quot; &quot;</span> + person.lastName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>可选属性</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    firstName: <span class="built_in">string</span>,</span><br><span class="line">    lastName: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> PersonConfig &#123;</span><br><span class="line">    firstName?: <span class="built_in">string</span>,</span><br><span class="line">    lastName?: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join</span>(<span class="params">person: PersonConfig</span>):<span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span> + person.firstName + <span class="string">&quot; &quot;</span> + person.lastName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>只读属性</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface Point &#123;</span><br><span class="line">   readonly x: number,</span><br><span class="line">   readonly y: number,</span><br><span class="line">&#125;</span><br><span class="line">let p:Point &#x3D; &#123;x:10,y:20&#125; </span><br></pre></td></tr></table></figure><blockquote><p>额外属性</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Point &#123;</span><br><span class="line">   x: number,</span><br><span class="line">   y: number,</span><br><span class="line">   [propName:number]:any</span><br><span class="line">&#125;</span><br><span class="line">let p:Point &#x3D; &#123;x:10,z:20&#125; </span><br></pre></td></tr></table></figure><blockquote><p>函数类型检查</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface PointFunc &#123;</span><br><span class="line"> (x: number,y: number):boolean</span><br><span class="line">&#125;</span><br><span class="line">let p:PointFunc</span><br><span class="line">p &#x3D; function(x: number,y: number):boolean&#123;</span><br><span class="line">let result &#x3D; x.search(y)</span><br><span class="line">return result&gt;-1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js库的使用</title>
      <link href="2020/12/08/js-js%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>2020/12/08/js-js%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>主要是关于一些vue第三方js库的使用</p></blockquote><span id="more"></span><h3 id="js库在vue的使用"><a href="#js库在vue的使用" class="headerlink" title="js库在vue的使用"></a>js库在vue的使用</h3><p><a href="https://github.com/kamranahmedse/driver.js">driver.js–github</a></p><p><img src="https://wang-z.gitee.io/img/vue-driverjs.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/vue-driverjs.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vue-driverjs"></p><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><p><img src="https://wang-z.gitee.io/img/driver-guide.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/driver-guide.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vue-driverjs"></p><p>明：使用js获取dom元素后，创建一个遮罩及指南div(可选是否添加动画),事件(关闭，上一步，下一步)</p><h3 id="docsify快速创建api文档"><a href="#docsify快速创建api文档" class="headerlink" title="docsify快速创建api文档"></a>docsify快速创建api文档</h3><blockquote><p>快速生成文档，编写markdown自动在运行时转化为html</p></blockquote><h4 id="创建index-html"><a href="#创建index-html" class="headerlink" title="创建index.html"></a>创建index.html</h4><h4 id="引入docsify"><a href="#引入docsify" class="headerlink" title="引入docsify"></a>引入docsify</h4><blockquote>   <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//cdn.jsdelivr.net/npm/docsify/themes/vue.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.$docsify = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//...</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置window-docsify"><a href="#配置window-docsify" class="headerlink" title="配置window.$docsify"></a>配置<a href="https://docsify.js.org/#/zh-cn/configuration">window.$docsify</a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.$docsify = &#123;</span><br><span class="line">      name: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      repo: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      search: &#123;</span><br><span class="line">        depth: <span class="number">6</span>,</span><br><span class="line">        paths: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">        placeholder: &#123;</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;搜索&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/en/&#x27;</span>: <span class="string">&#x27;Type to search&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      noData: &#123;</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;找不到结果&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/en/&#x27;</span>: <span class="string">&#x27;No Results&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#125;, </span><br><span class="line">      <span class="comment">// coverpage: true,//封面</span></span><br><span class="line">      loadSidebar: <span class="literal">true</span>,<span class="comment">//左侧菜单</span></span><br><span class="line">      subMaxLevel: <span class="number">3</span>,<span class="comment">//设置生成目录的最大层级</span></span><br><span class="line">      loadNavbar: <span class="literal">true</span>,<span class="comment">//导航栏</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="编写markdown（自动配置路由）"><a href="#编写markdown（自动配置路由）" class="headerlink" title="编写markdown（自动配置路由）"></a>编写markdown（自动配置路由）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-doc</span><br><span class="line">  -en(英文文档)</span><br><span class="line">  -imgs(自定义图片文件夹)</span><br><span class="line">  _coverpage.md(封面)</span><br><span class="line">  _navbar.md(导航栏对应路由****每个文件夹下都可以配置导航菜单 对应当前文档的导航)</span><br><span class="line">  _slidebar.md(左侧菜单-当开启subMaxLevel会自动将README.md的标题作为菜单)</span><br><span class="line">  README.md(文档页面)</span><br><span class="line">  other.md(可选，多页配置 https:<span class="comment">//docsify.js.org/#/zh-cn/more-pages)</span></span><br></pre></td></tr></table></figure><h4 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h4><blockquote><p>全文搜索</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="built_in">window</span>.$docsify = &#123;</span><br><span class="line">    search: <span class="string">&#x27;auto&#x27;</span>, <span class="comment">// 默认值</span></span><br><span class="line"></span><br><span class="line">    search : [</span><br><span class="line">      <span class="string">&#x27;/&#x27;</span>,            <span class="comment">// =&gt; /README.md</span></span><br><span class="line">      <span class="string">&#x27;/guide&#x27;</span>,       <span class="comment">// =&gt; /guide.md</span></span><br><span class="line">      <span class="string">&#x27;/get-started&#x27;</span>, <span class="comment">// =&gt; /get-started.md</span></span><br><span class="line">      <span class="string">&#x27;/zh-cn/&#x27;</span>,      <span class="comment">// =&gt; /zh-cn/README.md</span></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 完整配置参数</span></span><br><span class="line">    search: &#123;</span><br><span class="line">      maxAge: <span class="number">86400000</span>, <span class="comment">// 过期时间，单位毫秒，默认一天</span></span><br><span class="line">      paths: [], <span class="comment">// or &#x27;auto&#x27;</span></span><br><span class="line">      placeholder: <span class="string">&#x27;Type to search&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 支持本地化</span></span><br><span class="line">      placeholder: &#123;</span><br><span class="line">        <span class="string">&#x27;/zh-cn/&#x27;</span>: <span class="string">&#x27;搜索&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;Type to search&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      noData: <span class="string">&#x27;No Results!&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 支持本地化</span></span><br><span class="line">      noData: &#123;</span><br><span class="line">        <span class="string">&#x27;/zh-cn/&#x27;</span>: <span class="string">&#x27;找不到结果&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;No Results&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 搜索标题的最大层级, 1 - 6</span></span><br><span class="line">      depth: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">      hideOtherSidebarContent: <span class="literal">false</span>, <span class="comment">// 是否隐藏其他侧边栏内容</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 避免搜索索引冲突</span></span><br><span class="line">      <span class="comment">// 同一域下的多个网站之间</span></span><br><span class="line">      namespace: <span class="string">&#x27;website-1&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 使用不同的索引作为路径前缀（namespaces）</span></span><br><span class="line">      <span class="comment">// 注意：仅适用于 paths: &#x27;auto&#x27; 模式</span></span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      <span class="comment">// 初始化索引时，我们从侧边栏查找第一个路径</span></span><br><span class="line">      <span class="comment">// 如果它与列表中的前缀匹配，我们将切换到相应的索引</span></span><br><span class="line">      pathNamespaces: [<span class="string">&#x27;/zh-cn&#x27;</span>, <span class="string">&#x27;/ru-ru&#x27;</span>, <span class="string">&#x27;/ru-ru/v1&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 您可以提供一个正则表达式来匹配前缀。在这种情况下，</span></span><br><span class="line">      <span class="comment">// 匹配到的字符串将被用来识别索引</span></span><br><span class="line">      pathNamespaces: <span class="regexp">/^(\/(zh-cn|ru-ru))?(\/(v1|v2))?/</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;//polyfill.io/v3/polyfill.min.js?features=String.prototype.normalize&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>复制到剪贴板</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="使用第三方库"><a href="#使用第三方库" class="headerlink" title="使用第三方库"></a>使用第三方库</h4><blockquote><p>docsifyV4.xx兼容vue，直接在index内注入vuejs即可使用vue</p><p>在使用基于vue的elementUI时，有一个问题就是：注入vue但是未在index使用vue，将导致elementUI不可用</p></blockquote><blockquote><p> index.html必须使用了关于vue的配置才可以使vue生效 举例：vueGlobalOptions</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;Description&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Expires&quot;</span> <span class="attr">content</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Pragma&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-cache&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-cache&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-cache&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/docsify.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/element.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">table</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">0</span><span class="meta">!important</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/en/&quot;</span>&gt;</span>EN<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/&quot;</span>&gt;</span>中文<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./table/test.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.$docsify = &#123;</span></span><br><span class="line">      vueGlobalOptions: &#123;</span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line">            count: 0,</span><br><span class="line">            Table</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      name: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      repo: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">      search: &#123;</span><br><span class="line">        depth: 6,</span><br><span class="line"><span class="javascript">        paths: <span class="string">&#x27;auto&#x27;</span>,</span></span><br><span class="line">        placeholder: &#123;</span><br><span class="line"><span class="javascript">          <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;搜索&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;/en/&#x27;</span>: <span class="string">&#x27;Type to search&#x27;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        noData: &#123;</span><br><span class="line"><span class="javascript">          <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;找不到结果&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;/en/&#x27;</span>: <span class="string">&#x27;No Results&#x27;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      <span class="comment">// coverpage: &#x27;./docsifyConfig/_coverpage.md&#x27;,//封面</span></span></span><br><span class="line"><span class="javascript">      loadSidebar: <span class="string">&#x27;./docsifyConfig/_sidebar.md&#x27;</span>,</span></span><br><span class="line">      subMaxLevel: 3,</span><br><span class="line"><span class="javascript">      loadNavbar: <span class="string">&#x27;./docsifyConfig/_navbar.md&#x27;</span>,</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Docsify v4 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/element.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/docsify.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/search.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/docsify-copy-code.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="在markdown中使用script"><a href="#在markdown中使用script" class="headerlink" title="在markdown中使用script"></a>在markdown中使用script</h4><blockquote><p> 直接在README.md编写使用，只会执行一个script</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行脚本&#x27;</span>)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="Node-js图片处理库sharp"><a href="#Node-js图片处理库sharp" class="headerlink" title="Node.js图片处理库sharp"></a>Node.js图片处理库sharp</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><blockquote><p>npm install sharp</p><p>tips:在window下安装的sharp正常运行 但是在linux系统下需要安装二进制的sharp</p></blockquote><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Sharp = <span class="built_in">require</span>(<span class="string">&#x27;sharp&#x27;</span>)</span><br><span class="line">sharp(<span class="string">&#x27;input.jpg&#x27;</span>)</span><br><span class="line">  .rotate()</span><br><span class="line">  .resize(<span class="number">200</span>)</span><br><span class="line">  .toBuffer()</span><br><span class="line">  .then( <span class="function"><span class="params">data</span> =&gt;</span> &#123;...&#125; )</span><br><span class="line">  .catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;...&#125; );</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>window上的搜索软件Everything</title>
      <link href="2020/12/03/app-window%E4%B8%8A%E7%9A%84%E6%90%9C%E7%B4%A2%E8%BD%AF%E4%BB%B6Everything/"/>
      <url>2020/12/03/app-window%E4%B8%8A%E7%9A%84%E6%90%9C%E7%B4%A2%E8%BD%AF%E4%BB%B6Everything/</url>
      
        <content type="html"><![CDATA[<blockquote><p>一款在windows上好用的搜索文件软件</p></blockquote><span id="more"></span><h1 id="Everything的安装及使用"><a href="#Everything的安装及使用" class="headerlink" title="Everything的安装及使用"></a>Everything的安装及使用</h1><h2 id="安装地址"><a href="#安装地址" class="headerlink" title="安装地址"></a>安装地址</h2><p><a href="https://www.voidtools.com/zh-cn/downloads/">https://www.voidtools.com/zh-cn/downloads/</a></p><h2 id="搜索方法"><a href="#搜索方法" class="headerlink" title="搜索方法"></a>搜索方法</h2><p>基本</p><table><thead><tr><th>符号</th><th>解释</th><th>例子</th><th>解释</th></tr></thead><tbody><tr><td>空格</td><td>逻辑与</td><td>app a</td><td>文件(夹)名中既含app又含a</td></tr><tr><td></td><td>逻辑或</td><td>1.txt | 2.txt</td><td>文件名含1或2的txt文件</td></tr><tr><td>!</td><td>逻辑非</td><td>*.txt !b</td><td>文件名不含b的txt文件</td></tr><tr><td>&lt; &gt;</td><td>提高优先级,类似于数学的()</td><td>file:&lt;1 | 2 &gt;</td><td>文件名含1或2的文件(夹)(参见file:)</td></tr><tr><td>“”</td><td>特殊字符串</td><td>“foo bar”</td><td>如果没有””会认为是逻辑与</td></tr></tbody></table><p>修饰符：</p><ul><li>case: 匹配大小写</li><li>file:只匹配文件</li><li>folder:只匹配文件夹</li><li>path:匹配路径和文件名</li><li>regex:正则表达式</li><li>ww:  wholeword:全字匹配</li></ul><p>函数：</p><ul><li>attrib:&lt;属性&gt;      搜索特定属性的目标                             *.txt attrib:a所有存档属性的txt文件</li><li>attributes:&lt;属性&gt; 同上</li><li>datecreated:<date>     搜索特定创建日期的目标</li><li><ul><li>*.txt datecreated:lastyear 去年创建的txt文件</li></ul></li><li><ul><li>*.txt datecreated:2010-2012</li></ul></li><li>datemodified:<date>   搜索特定修改日期的目标</li><li>dc:<date>   搜索特定创建日期的目标</li><li>dm:<date>搜索特定修改日期的目标</li><li>dupe:          搜索重复目标</li><li>empty:       搜索空文件夹</li><li>ext:<list>    搜索指定后缀的目标  用分号分隔</li><li><ul><li>file:<a href="ext:bmp;txt">ext:bmp;txt</a>  bmp和txt文件</li></ul></li><li>len:<length>        筛选出特定长度的目标名</li><li><ul><li>*.txt len:5-10   文件名长5至10的txt文件</li></ul></li><li>parents:<count>  Search for files and folders with the specified number of parent folders.</li><li>size:<size> 搜索特定大小的文件</li><li><ul><li>*.txt size:large    1MB-16 MB的txt文件</li></ul></li><li><ul><li>*.txt size:7mb-8mb</li></ul></li></ul><p>函数语法：</p><table><thead><tr><th>function:value</th><th>等于value</th><th>function:&lt;=value</th><th>小于等于value</th></tr></thead><tbody><tr><td>function:&lt;value</td><td>小于value</td><td>function:=value</td><td>等于value</td></tr><tr><td>function:&gt;value</td><td>大于value</td><td>function:&gt;=value</td><td>大于或等于value</td></tr><tr><td>function:start..end</td><td>范围start到end</td><td>function:start-end</td><td>范围start到end</td></tr></tbody></table><p>大小语法：<br>  size[kb|mb|gb]</p><p>大小常数：</p><table><thead><tr><th>empty</th><th>0KB</th><th>tiny</th><th>0-10 KB</th></tr></thead><tbody><tr><td>small</td><td>10-100 KB</td><td>medium</td><td>100KB-1 MB</td></tr><tr><td>large</td><td>1MB-16 MB</td><td>gigantic</td><td>16MB-128 MB</td></tr></tbody></table><p>日期常数：<br>  Today                   yesterday            &lt;last|past|prev|current|this &gt;&lt;week|month|year&gt;</p><p>属性常数：<br>  R 只读文件  H 隐藏文件  S 系统文件  D 文件夹  A 存档文件  N 普通文件</p><h2 id="三．正则表达式-regular-expression"><a href="#三．正则表达式-regular-expression" class="headerlink" title="三．正则表达式 regular expression"></a>三．正则表达式 regular expression</h2><p>正则表达式：(觉得难的跳过，高级话题，这里简单介绍)<br>  开启正则表达式：Everything选项卡-&gt;常规-&gt;Home      Match regex:选择Enabled，新开窗口就可以使用正则表达式了。<br>  一般匹配搜索有三种方式：</p><ul><li>常规搜索：你输入什么搜索什么</li><li>通配符：使用* ?等符号</li><li>正则表达式：最复杂也最万能的搜索匹配法<br> 注意，正则表达式内部不能出现多余空格</li></ul><h2 id="四-搜索实例"><a href="#四-搜索实例" class="headerlink" title="四. 搜索实例"></a>四. 搜索实例</h2><table><thead><tr><th>目标</th><th>语法</th></tr></thead><tbody><tr><td>找到所有c:\windows目录及其下任意子目录的txt文件</td><td>c:\windows*.txt</td></tr><tr><td>找出所有bmp和jpg文件</td><td>*.bmp | *.jpg</td></tr><tr><td>找出所有名为download文件夹下的所有avi文件</td><td>download\ .avi</td></tr><tr><td>找出所有名字中含.tx的文件夹</td><td>folder:.tx</td></tr><tr><td>搜索空txt文件</td><td>*.txt file:size:0</td></tr><tr><td>搜索所有大于1MB的常见图像文件</td><td>&lt;*.bmp|*.jpg|*.png|*.tga&gt; size:&gt;1mb</td></tr><tr><td>找到所有c:\windows目录下的txt文件</td><td>regex:c:\windows[^]*.txt</td></tr><tr><td>列出所有c:\windows的N级子目录</td><td>regex:c:\windows[]<em>([]</em>){N}$</td></tr><tr><td>列出所有c:\windows的N级子目录下的txt文件</td><td>regex:c:\windows[]<em>([]</em>){N}.txt$</td></tr><tr><td>查找所有全字匹配1.txt的文件</td><td>ww:1.txt</td></tr><tr><td>查找wi开头的h文件和cpp文件</td><td>file:&lt;wi*.h|wi*.cpp&gt; or wi* <a href="ext:h|cpp">ext:h|cpp</a></td></tr><tr><td>XXX第N集.rmvb”，XXX是电视剧名，N是数字</td><td>regex:.*第[0-9]+集</td></tr><tr><td>连续的RAR压缩包 XXXX.partN.rar，XXXX是压缩包名，N是数字</td><td>regex:.*part[0-9]+.rar</td></tr><tr><td>连续的ZIP压缩包 XXXX.zN</td><td>regex:.*.z[0-9]+</td></tr><tr><td>搜索所有纯中文目标</td><td>regex:[0-9a-z]*$</td></tr><tr><td>搜索带中文字符的目标</td><td>regex:.<em>[!-~]+.</em>$</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> app </category>
          
      </categories>
      
      
        <tags>
            
            <tag> app </tag>
            
            <tag> window </tag>
            
            <tag> pc </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web移动端手机型号</title>
      <link href="2020/11/11/base-web%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%89%8B%E6%9C%BA%E5%9E%8B%E5%8F%B7/"/>
      <url>2020/11/11/base-web%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%89%8B%E6%9C%BA%E5%9E%8B%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>web移动开发中的一部分手机型号，UA，基本信息</p></blockquote><span id="more"></span><h2 id="移动端型号"><a href="#移动端型号" class="headerlink" title="移动端型号"></a>移动端型号</h2><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>手机名称</td><td>像素分辨率（px）</td><td>倍率</td><td>逻辑分辨率(pt)</td><td>物理尺寸(英寸)</td><td>屏幕密度(ppi)</td><td>DPI</td></tr><tr><td>i6 plus</td><td>1242*2208</td><td>@3x</td><td>414*736</td><td>5.5</td><td>401</td><td>154</td></tr><tr><td>I6</td><td>750*1334</td><td>@2x</td><td>375*667</td><td>4.7</td><td>330</td><td>163</td></tr><tr><td>I5s</td><td>640*1136</td><td>@2x</td><td>320*568</td><td>4</td><td>330</td><td>163</td></tr><tr><td>I5</td><td>640*1136</td><td>@2x</td><td>320*568</td><td>4</td><td>330</td><td>163</td></tr><tr><td>I4</td><td>640*960</td><td>@2x</td><td>320*480</td><td>3.5</td><td>330</td><td>163</td></tr><tr><td>I3GS</td><td>320*480</td><td>@1x</td><td>320*480</td><td>3.5</td><td>163</td><td></td></tr><tr><td>android</td><td>240*320</td><td>@0.75</td><td>320*420</td><td>120</td><td></td><td></td></tr><tr><td>android</td><td>320*480</td><td>@1x</td><td>320*480</td><td>160</td><td></td><td></td></tr><tr><td>android</td><td>480*800</td><td>@1.5x</td><td>360*500</td><td>240</td><td></td><td></td></tr><tr><td>android</td><td>640*960</td><td>@2x</td><td>320*480</td><td>320</td><td></td><td></td></tr><tr><td>android</td><td>540*960</td><td>@1.5x</td><td>360*640</td><td>360</td><td></td><td></td></tr><tr><td>android</td><td>720*1280</td><td>@2x</td><td>360*640</td><td>360</td><td></td><td></td></tr><tr><td>android</td><td>1080*1920</td><td>@3x</td><td>360*640</td><td>360</td><td></td><td></td></tr></tbody></table><h3 id="字体大小展示："><a href="#字体大小展示：" class="headerlink" title="字体大小展示："></a>字体大小展示：</h3><table><thead><tr><th>px</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th></tr></thead><tbody><tr><td>em</td><td>0.375</td><td>0.438</td><td>0.5</td><td>0.563</td><td>0.625</td><td>0.688</td><td>0.75</td><td>0.813</td><td>0.875</td><td>0.938</td><td>1</td></tr><tr><td>%</td><td>37.50</td><td>43.80</td><td>50</td><td>56.30</td><td>62.50</td><td>68.80</td><td>75</td><td>81.30</td><td>87.50</td><td>93.80</td><td>100</td></tr><tr><td>pt</td><td>5</td><td>5.5</td><td>6</td><td>7</td><td>8</td><td>8</td><td>9</td><td>10</td><td>11</td><td>11</td><td>12</td></tr></tbody></table><table><thead><tr><th>px</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th></tr></thead><tbody><tr><td>em</td><td>1.063e</td><td>1.125</td><td>1.188</td><td>1.25</td><td>1.313</td><td>1.375</td><td>1.438</td><td>1.5</td></tr><tr><td>%</td><td>106.30</td><td>112.50</td><td>118.80</td><td>125</td><td>131.30</td><td>137.50</td><td>143.80</td><td>150</td></tr><tr><td>pt</td><td>13</td><td>14</td><td>14</td><td>15</td><td>16</td><td>17</td><td>17</td><td>18</td></tr></tbody></table><p><strong>（附公式：px = pt * DPI / 72)</strong></p><h3 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h3><table><thead><tr><th>设备</th><th>系统</th><th>浏览器</th><th>User-Agent</th></tr></thead><tbody><tr><td>红米Note 5</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; Redmi Note 5 Build/PKQ1.180904.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.10.8</td></tr><tr><td>小米6</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; MI 6 Build/PKQ1.190118.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.2.3 (Baidu; P1 9)</td></tr><tr><td>华为Mate 20 X</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; EVR-AL00 Build/HUAWEIEVR-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.186 Mobile Safari/537.36 baiduboxapp/11.0.5.12 (Baidu; P1 10)</td></tr><tr><td>华为畅享9 Plus全网通高配版</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; JKM-AL00b Build/HUAWEIJKM-AL00b; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/8951 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>COR-TL10</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; COR-TL10 Build/HUAWEICOR-TL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为nova4</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; VCE-AL00 Build/HUAWEIVCE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.186 Mobile Safari/537.36 baiduboxapp/11.0.5.12 (Baidu; P1 10)</td></tr><tr><td>华为P20 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; CLT-AL00 Build/HUAWEICLT-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/1.0</td></tr><tr><td>华为Mate20</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; HMA-AL00 Build/HUAWEIHMA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/6002 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>华为nova 2s</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; HWI-AL00 Build/HUAWEIHWI-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045129 Mobile Safari/537.36 MMWEBID/6735 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>黑鲨2游戏手机</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; SKW-A0 Build/SKYW2001202CN00MQ0; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10)</td></tr><tr><td>OPPO A5</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; PBAM00 Build/OPM1.171019.026; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0) NABar/2.0</td></tr><tr><td>华为nova 2s</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; HWI-AL00 Build/HUAWEIHWI-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045129 Mobile Safari/537.36 MMWEBID/6735 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>华为Mate30 Pro</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; LIO-AN00 Build/HUAWEILIO-AN00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/67.0.3396.87 XWEB/1170 MMWEBSDK/200201 Mobile Safari/537.36 MMWEBID/3371 MicroMessenger/7.0.12.1620(0x27000C36) Process/toolsmp NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>红米Note 5</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; Redmi Note 5 Build/OPM1.171019.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0) NABar/2.0</td></tr><tr><td>华为P30</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; ELE-AL00 Build/HUAWEIELE-AL0001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/67.0.3396.87 XWEB/1170 MMWEBSDK/191201 Mobile Safari/537.36 MMWEBID/873 MicroMessenger/7.0.10.1580(0x27000AFE) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>华为Mate20</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; HMA-AL00 Build/HUAWEIHMA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/2679 MicroMessenger/7.0.10.1580(0x27000A59) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>DUB-TL00</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; DUB-TL00 Build/HUAWEIDUB-TL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0) NABar/2.0</td></tr><tr><td>魅族V8</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 8.1.0; M1813 Build/O11019; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045129 Mobile Safari/537.36 MMWEBID/1221 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>华为P20 Pro</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; CLT-AL00 Build/HUAWEICLT-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/2644 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>华为nova 2s</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; HWI-AL00 Build/HUAWEIHWI-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/10.1 Mobile Safari/537.36</td></tr><tr><td>华为P20 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; CLT-AL01 Build/HUAWEICLT-AL01; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为P30 Pro</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; VOG-AL00 Build/HUAWEIVOG-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/45016 Mobile Safari/537.36 MMWEBID/3894 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>小米4c</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 7.0; Mi-4c Build/NRD91M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/67.0.3396.87 XWEB/1169 MMWEBSDK/191201 Mobile Safari/537.36 MMWEBID/2208 MicroMessenger/7.0.10.1580(0x27010AFF) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>iPhone</td><td>IOS</td><td>QQ浏览器</td><td>Mozilla/5.0 (iPhone; CPU iPhone OS 13_0 like Mac OS X) AppleWebKit/604.3.5 (KHTML, like Gecko) Version/13.0 MQQBrowser/10.1.1 Mobile/15B87 Safari/604.1 QBWebViewUA/2 QBWebViewType/1 WKType/1</td></tr><tr><td>荣耀10</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; COL-AL10 Build/HUAWEICOL-AL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/9048 MicroMessenger/7.0.10.1580(0x27000AFE) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>iPhone</td><td>IOS</td><td>微信</td><td>Mozilla/5.0 (iPhone; CPU iPhone OS 12_4_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/7.0.11(0x17000b21) NetType/4G Language/zh_CN</td></tr><tr><td>Redmi Note 7</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; Redmi Note 7 Build/PKQ1.180904.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.8.14</td></tr><tr><td>华为nova4</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; VCE-AL00 Build/HUAWEIVCE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/1.0</td></tr><tr><td>HLK-AL10</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; HLK-AL10 Build/HONORHLK-AL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为nova5 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; SEA-AL10 Build/HUAWEISEA-AL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/1.0</td></tr><tr><td>16s Pro</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; 16s Pro Build/PKQ1.190616.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/9.1 Mobile Safari/537.36</td></tr><tr><td>vivo Z3</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; V1813BT Build/PKQ1.181030.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/63.0.3239.83 Mobile Safari/537.36 T7/11.16 lite baiduboxapp/4.11.0.10 (Baidu; P1 9)</td></tr><tr><td>OPPO A79k</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 7.1.1; OPPO A79k Build/N6F26Q; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/63.0.3239.83 Mobile Safari/537.36 T7/11.15 baiduboxapp/11.15.0.12 (Baidu; P1 7.1.1)</td></tr><tr><td>vivo X9s L</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; vivo X9s L Build/OPM1.171019.019; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>RNE-AL00</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.0.0; RNE-AL00 Build/HUAWEIRNE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.0.0)</td></tr><tr><td>M2 E</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 6.0.1; M2 E Build/MMB29U; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.2.2 (Baidu; P1 6.0.1)</td></tr><tr><td>MI PLAY</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; MI PLAY Build/O11019; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>NX606J</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; NX606J Build/OPM1.171019.026; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>OPPO A57</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 6.0.1; zh-cn; OPPO A57 Build/MMB29M) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/9.1 Mobile Safari/537.36</td></tr><tr><td>华为畅享9 Plus</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; JKM-AL00a Build/HUAWEIJKM-AL00a; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>JNY-AL10</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; JNY-AL10 Build/HUAWEIJNY-AL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/2.0</td></tr><tr><td>vivo X21</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; vivo X21 Build/PKQ1.180819.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/1.0</td></tr><tr><td>小米9</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; MI 9 Build/QKQ1.190825.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/67.0.3396.87 XWEB/1171 MMWEBSDK/200201 Mobile Safari/537.36 MMWEBID/2568 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>iPhone</td><td>IOS</td><td>微信</td><td>Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/601.3.9 (KHTML, like Gecko) Version/10.0 Mobile/15E148 MicroMessenger/7.0.0(0x27871294) NetType/WIFI Language/zh_CN</td></tr><tr><td>华为Mate20 Pro</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; LYA-AL10 Build/HUAWEILYA-AL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/7947 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>荣耀9X</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; HLK-AL00 Build/HONORHLK-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/4465 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>MI 9 SE</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; MI 9 SE Build/PKQ1.181121.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045129 Mobile Safari/537.36 MMWEBID/1500 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>华为Mate 20 X</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; EVR-AL00 Build/HUAWEIEVR-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/67.0.3396.87 XWEB/1170 MMWEBSDK/200201 Mobile Safari/537.36 MMWEBID/5192 MicroMessenger/7.0.12.1620(0x27000C36) Process/toolsmp NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>华为Mate 20 X</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; EVR-AL00 Build/HUAWEIEVR-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/1.0</td></tr><tr><td>华为Mate 9 Pro</td><td>Android</td><td>UC浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-CN; LON-AL00 Build/HUAWEILON-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 UCBrowser/12.9.0.1070 Mobile Safari/537.36</td></tr><tr><td>荣耀20</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; YAL-AL00 Build/HUAWEIYAL-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/2.0</td></tr><tr><td>V1913A</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; V1913A Build/P00610; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>CLT-TL01</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; CLT-TL01 Build/HUAWEICLT-TL01; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10)</td></tr><tr><td>三星Galaxy S10+</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; SM-G9750 Build/QP1A.190711.020; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.19 SP-engine/2.15.0 baiduboxapp/11.19.5.10 (Baidu; P1 10)</td></tr><tr><td>华为Mate30Pro</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 10; LIO-AL00 Build/HUAWEILIO-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/6203 MicroMessenger/7.0.10.1580(0x27000AFC) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>红米5 Plus</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 7.1.2; zh-cn; Redmi 5 Plus Build/N2G47H) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/9.2 Mobile Safari/537.36</td></tr><tr><td>iPhone</td><td>IOS</td><td>QQ浏览器</td><td>Mozilla/5.0 (iPhone; CPU iPhone OS 11_2_6 like Mac OS X) AppleWebKit/604.3.5 (KHTML, like Gecko) Version/11.0 MQQBrowser/10.1.0 Mobile/15B87 Safari/604.1 QBWebViewUA/2 QBWebViewType/1 WKType/1</td></tr><tr><td>一加6</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; ONEPLUS A6000 Build/PKQ1.180716.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/2.0</td></tr><tr><td>OPPO_A59S</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 4.4.2; zh-cn; OPPO_A59S Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/8.9 Mobile Safari/537.36</td></tr><tr><td>华为Mate10移动定制全网通版</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; ALP-TL00 Build/HUAWEIALP-TL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为P30</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; ELE-AL00 Build/HUAWEIELE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/8968 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>OPPO R15</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; PACT00 Build/PPR1.180610.011) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/10.1 Mobile Safari/537.36</td></tr><tr><td>Redmi K20 Pro</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 10; zh-cn; Redmi K20 Pro Build/QKQ1.190825.002) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.8.14</td></tr><tr><td>华为Mate 8</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 7.0; zh-cn; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/9.0 Mobile Safari/537.36</td></tr><tr><td>华为畅享10 Plus</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; STK-AL00 Build/HUAWEISTK-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/1.0</td></tr><tr><td>红米6 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; Redmi 6 Pro Build/PKQ1.180917.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>红米4X</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 7.1.2; Redmi 4X Build/N2G47H; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/63.0.3239.83 Mobile Safari/537.36 T7/11.12 baiduboxapp/11.12.3.2 (Baidu; P1 7.1.2)</td></tr><tr><td>M1822</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; M1822 Build/OPM1.171019.026; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>iQOO Pro 5G</td><td>Android</td><td>UC浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-CN; V1916A Build/PKQ1.190714.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 UCBrowser/12.8.2.1062 Mobile Safari/537.36</td></tr><tr><td>PBDM00</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; PBDM00 Build/PKQ1.190519.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.19 SP-engine/2.15.0 baiduboxapp/11.19.5.10 (Baidu; P1 9)</td></tr><tr><td>小米8</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; MI 8 Build/PKQ1.180729.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/2.0</td></tr><tr><td>V1836A</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; V1836A Build/PKQ1.181030.001; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为nova 2s</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; HWI-AL00 Build/HUAWEIHWI-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/1.0</td></tr><tr><td>荣耀8X</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; JSN-AL00a Build/HONORJSN-AL00a; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9) NABar/1.0</td></tr><tr><td>vivo X9s</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; vivo X9s Build/OPM1.171019.019; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>vivo Y85A</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; vivo Y85A Build/OPM1.171019.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/63.0.3239.83 Mobile Safari/537.36 T7/11.1 baiduboxapp/11.1.0.10 (Baidu; P1 8.1.0)</td></tr><tr><td>华为Mate20</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; HMA-AL00 Build/HUAWEIHMA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/2.0</td></tr><tr><td>1809-A01</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; 1809-A01 Build/OPM1; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.19 SP-engine/2.15.0 baiduboxapp/11.19.5.10 (Baidu; P1 8.1.0)</td></tr><tr><td>SM-A7050</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; SM-A7050 Build/PPR1.180610.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>小米5X</td><td>Android</td><td>UC浏览器</td><td>Mozilla/5.0 (Linux; U; Android 8.1.0; zh-CN; MI 5X Build/OPM1.171019.019) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 UCBrowser/12.1.2.992 Mobile Safari/537.36</td></tr><tr><td>华为Mate20</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; HMA-AL00 Build/HUAWEIHMA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.2.2 (Baidu; P1 10)</td></tr><tr><td>小米8 SE</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; MI 8 SE Build/QKQ1.190828.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.17 SP-engine/2.13.0 baiduboxapp/11.17.0.13 (Baidu; P1 10)</td></tr><tr><td>Redmi 7</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; Redmi 7 Build/PKQ1.181021.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.8.14</td></tr><tr><td>V1816A</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; V1816A Build/PKQ1.180819.001) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/10.1 Mobile Safari/537.36</td></tr><tr><td>华为nova 2</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 8.0.0; PIC-AL00 Build/HUAWEIPIC-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045129 Mobile Safari/537.36 MMWEBID/9451 MicroMessenger/7.0.12.1620(0x27000C37) Process/tools NetType/WIFI Language/zh_CN ABI/arm64</td></tr><tr><td>SM-C7010</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.0.0; SM-C7010 Build/R16NW; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.0.0)</td></tr><tr><td>Redmi Note 8 Pro</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 10; zh-cn; Redmi Note 8 Pro Build/QP1A.190711.020) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.8.14</td></tr><tr><td>V1732A</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; V1732A Build/O11019; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>华为Mate 10</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; ALP-AL00 Build/HUAWEIALP-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10) NABar/2.0</td></tr><tr><td>荣耀8青春版</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.0.0; PRA-TL10 Build/HONORPRA-TL10; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.0.0)</td></tr><tr><td>华为Mate20</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; HMA-AL00 Build/HUAWEIHMA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/72.0.3626.121 Mobile Safari/537.36 MMWEBID/1247 MicroMessenger/7.0.10.1561(0x27000A41) Process/tools NetType/4G Language/zh_CN ABI/arm64 GPVersion/1</td></tr><tr><td>华为nova3i</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; U; Android 9; zh-cn; INE-AL00 Build/HUAWEIINE-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/10.1 Mobile Safari/537.36</td></tr><tr><td>华为Mate 9 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; LON-AL00 Build/HUAWEILON-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr><tr><td>华为Mate10 Pro</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 10; BLA-TL00 Build/HUAWEIBLA-TL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 10)</td></tr><tr><td>OPPO R11</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 7.1.1; OPPO R11 Build/NMF26X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 7.1.1)</td></tr><tr><td>华为P30</td><td>Android</td><td>微信</td><td>Mozilla/5.0 (Linux; Android 9; ELE-AL00 Build/HUAWEIELE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 MMWEBID/8968 MicroMessenger/7.0.12.1620(0x27000C36) Process/tools NetType/4G Language/zh_CN ABI/arm64</td></tr><tr><td>小米2S</td><td>Android</td><td>MIUI浏览器</td><td>Mozilla/5.0 (Linux; U; Android 10; zh-cn; MIX 2S Build/QKQ1.190828.002) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/71.0.3578.141 Mobile Safari/537.36 XiaoMi/MiuiBrowser/11.8.14</td></tr><tr><td>vivo Y71A</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 8.1.0; vivo Y71A Build/OPM1.171019.011; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 8.1.0)</td></tr><tr><td>荣耀畅玩6X</td><td>Android</td><td>QQ浏览器</td><td>Mozilla/5.0 (Linux; Android 7.0; BLN-AL40 Build/HONORBLN-AL40; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/045130 Mobile Safari/537.36 V1_AND_SQ_8.2.7_1334_YYB_D QQ/8.2.7.4410 NetType/4G WebP/0.3.0 Pixel/1080 StatusBarHeight/72 SimpleUISwitch/0</td></tr><tr><td>华为 nova 3e</td><td>Android</td><td>手机百度</td><td>Mozilla/5.0 (Linux; Android 9; ANE-AL00 Build/HUAWEIANE-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/76.0.3809.89 Mobile Safari/537.36 T7/11.20 SP-engine/2.16.0 baiduboxapp/11.20.0.14 (Baidu; P1 9)</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
            <tag> Typora </tag>
            
            <tag> moblie </tag>
            
            <tag> UA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3-实践出真知</title>
      <link href="2020/09/27/vue-%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/"/>
      <url>2020/09/27/vue-%E5%AE%9E%E8%B7%B5%E5%87%BA%E7%9C%9F%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue3.0的实践记录</p></blockquote><span id="more"></span><h1 id="vue3-0正式版发布-2020-09-18"><a href="#vue3-0正式版发布-2020-09-18" class="headerlink" title="vue3.0正式版发布(2020-09-18)"></a>vue3.0正式版发布(2020-09-18)</h1><h2 id="diff算法改变"><a href="#diff算法改变" class="headerlink" title="diff算法改变"></a>diff算法改变</h2><blockquote><p>在需要动态绑定的dom元素上绑定静态标记，渲染层只会比较绑定了静态标记点dom节点</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">===========================</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">with</span>(<span class="params"><span class="built_in">this</span></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> _c(<span class="string">&#x27;div&#x27;</span>, &#123;</span><br><span class="line">      attrs: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="string">&quot;app&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, [_v(_s(msg))])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;Hello World!&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;</span><br><span class="line">===============================</span><br><span class="line"><span class="keyword">import</span> &#123; createVNode <span class="keyword">as</span> _createVNode, toDisplayString <span class="keyword">as</span> _toDisplayString, Fragment <span class="keyword">as</span> _Fragment, openBlock <span class="keyword">as</span> _openBlock, createBlock <span class="keyword">as</span> _createBlock &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (_openBlock(), _createBlock(_Fragment, <span class="literal">null</span>, [</span><br><span class="line">    _createVNode(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;Hello World!&quot;</span>),</span><br><span class="line">    _createVNode(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, _toDisplayString(_ctx.msg), <span class="number">1</span> <span class="comment">/* TEXT */</span>)</span><br><span class="line">  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check the console for the AST</span></span><br></pre></td></tr></table></figure><blockquote><p>flag标记值</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> enum PatchFlags &#123;</span><br><span class="line"> <span class="comment">// 插值生成的动态文本节点</span></span><br><span class="line"> TEXT = <span class="number">1</span>,</span><br><span class="line"> <span class="comment">// 动态class绑定</span></span><br><span class="line"> CLASS = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line"> <span class="comment">// 动态绑定style，需要注意一点，如果绑定的是静态object，即object不会动态变化</span></span><br><span class="line"> <span class="comment">// 将同样被当作静态属性来处理，静态属性声明会被提升到render函数体的最前端</span></span><br><span class="line"> <span class="comment">// 减少不必要的属性创建开销</span></span><br><span class="line"> <span class="comment">// e.g. style=&quot;color: red&quot; and :style=&quot;&#123; color: &#x27;red&#x27; &#125;&quot; both get hoisted as</span></span><br><span class="line"> <span class="comment">//   const style = &#123; color: &#x27;red&#x27; &#125;</span></span><br><span class="line"> <span class="comment">//   render() &#123; return e(&#x27;div&#x27;, &#123; style &#125;) &#125;</span></span><br><span class="line"> STYLE = <span class="number">1</span> &lt;&lt; <span class="number">2</span>,</span><br><span class="line"> <span class="comment">// dom元素包含除class、style之外的动态属性，或者组件包含动态属性（可以是class、style）</span></span><br><span class="line"> <span class="comment">// 动态属性在编译阶段被收集到dynamicProps中，运行时做diff操作时会只对比动态属性的变化</span></span><br><span class="line"> <span class="comment">// 省略对其他无关属性的diff（删除的属性无需关心）</span></span><br><span class="line"> PROPS = <span class="number">1</span> &lt;&lt; <span class="number">3</span>,</span><br><span class="line"> <span class="comment">// 包含动态变化的keys，需要对属性做全量diff，该标志位和</span></span><br><span class="line"> <span class="comment">// CLASS、STYLE、PROPS是互斥的，不会同时存在，有FULL_PROPS</span></span><br><span class="line"> <span class="comment">// 上面提到的三个标志位会失效</span></span><br><span class="line"> FULL_PROPS = <span class="number">1</span> &lt;&lt; <span class="number">4</span>,</span><br><span class="line"> <span class="comment">// 服务端渲染相关</span></span><br><span class="line"> HYDRATE_EVENTS = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,</span><br><span class="line"> <span class="comment">// 稳定的fragment类型，其children不会变化，元素次序固定，</span></span><br><span class="line"> <span class="comment">// 如`&lt;div v-for=&quot;item in 10&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt;`生成的fragment</span></span><br><span class="line"> STABLE_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">6</span>,</span><br><span class="line"> <span class="comment">// fragment的children全部或部分节点标记key</span></span><br><span class="line"> KEYED_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">7</span>,</span><br><span class="line"> <span class="comment">// fragment的children节点均未标记key</span></span><br><span class="line"> UNKEYED_FRAGMENT = <span class="number">1</span> &lt;&lt; <span class="number">8</span>,</span><br><span class="line"> <span class="comment">// 不需要做props的patch，比如节点包含ref或者指令 ( onVnodeXXX hooks ) ，</span></span><br><span class="line"> <span class="comment">// 但是节点会被当作动态节点收集到对应block的dynamicChildren中</span></span><br><span class="line"> NEED_PATCH = <span class="number">1</span> &lt;&lt; <span class="number">9</span>,</span><br><span class="line"> <span class="comment">// 插槽相关</span></span><br><span class="line"> DYNAMIC_SLOTS = <span class="number">1</span> &lt;&lt; <span class="number">10</span>,</span><br><span class="line"> <span class="comment">// 静态节点，由于被提升到render函数体最顶部，因此节点一旦声明就会维持在内存里</span></span><br><span class="line"> <span class="comment">// re-render时就不需要再重复创建节点了，同时diff时会跳过静态节点，因为内容不发生任何变化</span></span><br><span class="line"> HOISTED = -<span class="number">1</span>,</span><br><span class="line"> <span class="comment">// 特殊处理，具体作用可看源码注释</span></span><br><span class="line"> BAIL = -<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3学习笔记</title>
      <link href="2020/09/20/vue-vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/09/20/vue-vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue3.0来了，他改变了什么？</p></blockquote><span id="more"></span><h1 id="vue3-0正式版发布-2020-09-18"><a href="#vue3-0正式版发布-2020-09-18" class="headerlink" title="vue3.0正式版发布(2020-09-18)"></a>vue3.0正式版发布(2020-09-18)</h1><h3 id="修改了什么？"><a href="#修改了什么？" class="headerlink" title="修改了什么？"></a>修改了什么？</h3><blockquote><p><code>v-is</code> 函数像一个动态的 2.x <code>:is</code> 绑定——因此，要按注册名称渲染组件，其值应为 JavaScript 字符串文本：</p></blockquote><blockquote><p>来自组件的 <code>data()</code> 及其 mixin 或 extends 基类被合并时，现在将<em>浅层次</em>执行合并：(浅拷贝对象)</p></blockquote><blockquote><p>Attributes(2.x 和 3.x 行为的比较)</p></blockquote><table><thead><tr><th>Attributes</th><th><code>v-bind</code> value 2.x</th><th><code>v-bind</code> value 3.x</th><th>HTML 输出</th></tr></thead><tbody><tr><td>2.x “枚举attribute” i.e. <code>contenteditable</code>, <code>draggable</code> and <code>spellcheck</code>.</td><td><code>undefined</code>, <code>false</code></td><td><code>undefined</code>, <code>null</code></td><td><em>removed</em></td></tr><tr><td><code>true</code>, <code>&#39;true&#39;</code>, <code>&#39;&#39;</code>, <code>1</code>, <code>&#39;foo&#39;</code></td><td><code>true</code>, <code>&#39;true&#39;</code></td><td><code>&quot;true&quot;</code></td><td></td></tr><tr><td><code>null</code>, <code>&#39;false&#39;</code></td><td><code>false</code>, <code>&#39;false&#39;</code></td><td><code>&quot;false&quot;</code></td><td></td></tr><tr><td>其他非布尔attribute eg. <code>aria-checked</code>, <code>tabindex</code>, <code>alt</code>, etc.</td><td><code>undefined</code>, <code>null</code>, <code>false</code></td><td><code>undefined</code>, <code>null</code></td><td><em>removed</em></td></tr><tr><td><code>&#39;false&#39;</code></td><td><code>false</code>, <code>&#39;false&#39;</code></td><td><code>&quot;false&quot;</code></td><td></td></tr></tbody></table><blockquote><p>模板上的组件将支持多根组件(片段)</p></blockquote><blockquote><p>由于2.X在template只能有一个根节点（Dom元素），在3.X将会支持多个组件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;header&gt;...&lt;&#x2F;header&gt;</span><br><span class="line">    &lt;main&gt;...&lt;&#x2F;main&gt;</span><br><span class="line">    &lt;footer&gt;...&lt;&#x2F;footer&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;...&lt;&#x2F;header&gt;</span><br><span class="line">  &lt;main v-bind&#x3D;&quot;$attrs&quot;&gt;...&lt;&#x2F;main&gt;</span><br><span class="line">  &lt;footer&gt;...&lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将不会再有filters包括(全局/局部) </span><br><span class="line">可使用计算属性或者方法代替 &#123;&#123; 数据 |filter方法 &#125;&#125;=&gt;&#123;&#123; 计算方法 &#125;&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>非兼容变更：</strong><code>functional</code> attribute 在单文件组件 (SFC) ` 已被移除</p><p><strong>非兼容变更：</strong><code>&#123; functional: true &#125;</code> 选项在通过函数创建组件已被移除</p></blockquote><p>template设置key</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-for&#x3D;&quot;item in list&quot;&gt;</span><br><span class="line">  &lt;div :key&#x3D;&quot;item.id&quot;&gt;...&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;span :key&#x3D;&quot;item.id&quot;&gt;...&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">&lt;template v-for&#x3D;&quot;item in list&quot; :key&#x3D;&quot;item.id&quot;&gt;</span><br><span class="line">  &lt;div&gt;...&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;span&gt;...&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><blockquote><p>不再支持使用数字 (即键码) 作为 <code>v-on</code> 修饰符</p><p> kebab-cased (短横线) 命名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 键码版本 --&gt;</span><br><span class="line">&lt;input v-on:keyup.13&#x3D;&quot;submit&quot; &#x2F;&gt;</span><br><span class="line">&lt;!-- 别名版本 --&gt;</span><br><span class="line">&lt;input v-on:keyup.enter&#x3D;&quot;submit&quot; &#x2F;&gt;</span><br><span class="line">&lt;!-- Vue 3 在 v-on 上使用 按键修饰符 --&gt;</span><br><span class="line">&lt;input v-on:keyup.delete&#x3D;&quot;confirmDelete&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>(过渡动画)</p></blockquote><blockquote><p>由于<code>v-model</code> 和 <code>value</code> 之间的这种硬编码关系的原因，产生了如何处理原生元素和自定义元素的问题。</p><p> Vue 3 中，双向数据绑定的 API 已经标准化，减少了开发者在使用 <code>v-model</code> 指令时的混淆并且在使用 <code>v-model</code> 指令时可以更加灵活。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 2.x 中，在组件上使用 v-model 相当于绑定 value prop 和 input 事件：</span></span><br><span class="line"><span class="comment">//v-model既v-bind和v-on两者结合的语法糖</span></span><br><span class="line">&lt;ChildComponent v-model=<span class="string">&quot;pageTitle&quot;</span> /&gt;</span><br><span class="line">&lt;ChildComponent :value=<span class="string">&quot;pageTitle&quot;</span> @input=<span class="string">&quot;pageTitle = $event&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><blockquote><p> 在 3.x 中，自定义组件上的 <code>v-model</code> 相当于传递了 <code>modelValue</code> prop 并接收抛出的 <code>update:modelValue</code> 事件：</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//此项为默认绑定的值modelValue，注意子组件定义时不要写错</span><br><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">v-model</span>=<span class="string">&quot;pageTitle&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 简写: --&gt;</span></span><br><span class="line">&lt;ChildComponent</span><br><span class="line">  :modelValue=&quot;pageTitle&quot;</span><br><span class="line">  @update:modelValue=&quot;pageTitle = $event&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><blockquote><p>v-model参数可自定义</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComponent v-model:title=<span class="string">&quot;pageTitle&quot;</span> /&gt;</span><br><span class="line">&lt;!-- 简写: --&gt;</span><br><span class="line">&lt;ChildComponent :title=<span class="string">&quot;pageTitle&quot;</span> @update:title=<span class="string">&quot;pageTitle = $event&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><blockquote><p>多个v-model</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComponent v-model:title=<span class="string">&quot;pageTitle&quot;</span> v-model:content=<span class="string">&quot;pageContent&quot;</span> /&gt;</span><br><span class="line">&lt;!-- 简写： --&gt;</span><br><span class="line">&lt;ChildComponent</span><br><span class="line">  :title=<span class="string">&quot;pageTitle&quot;</span></span><br><span class="line">  @update:title=<span class="string">&quot;pageTitle = $event&quot;</span></span><br><span class="line">  :content=<span class="string">&quot;pageContent&quot;</span></span><br><span class="line">  @update:content=<span class="string">&quot;pageContent = $event&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><blockquote><p>两者作用于同一个元素上时，<code>v-if</code> 会拥有比 <code>v-for</code> 更高的优先级</p></blockquote><blockquote><p>v-bind 的绑定顺序会影响渲染结果</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- template --&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;red&quot;</span> v-bind=<span class="string">&quot;&#123; id: &#x27;blue&#x27; &#125;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- result --&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;red&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><blockquote><p>API重命名</p><p>bind → <strong>beforeMount</strong></p><p>inserted → <strong>mounted</strong></p><p><strong>beforeUpdate</strong>:新的！这是在元素本身更新之前调用的，很像组件生命周期钩子</p><p>update → 移除！有太多的相似之处要更新，所以这是多余的，请改用 <code>updated</code></p><p>componentUpdated → <strong>updated</strong></p><p>**beforeUnmount ** 新的！与组件生命周期钩子类似，它将在卸载元素之前调用。</p><p>unbind -&gt; <strong>unmounted</strong></p></blockquote><h3 id="vue3-0中的不同"><a href="#vue3-0中的不同" class="headerlink" title="vue3.0中的不同"></a>vue3.0中的不同</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = ref(<span class="number">0</span>);<span class="comment">//普通类型的定义</span></span><br><span class="line"><span class="keyword">const</span> data = reactive(&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;);<span class="comment">//复杂类型的定义</span></span><br><span class="line">ref(<span class="number">18</span>) = reactive(&#123;<span class="attr">value</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *reactive内的参数必须为对象</span></span><br><span class="line"><span class="comment"> *ref于reactive都使用递归监听，每当深度调用时，可以监听到数据的变化</span></span><br><span class="line"><span class="comment"> *利用开放的api可以只操作引用地址的数据，而不触发watcher，即Dom更新</span></span><br><span class="line"><span class="comment"> *toRaw</span></span><br><span class="line"><span class="comment"> *shalloeRef(非递归监听)，可以改变监听的变量的value键触发</span></span><br><span class="line"><span class="comment"> *主动触发Dom更新triggerRef</span></span><br><span class="line"><span class="comment"> *ref-&gt;复制 修改响应数据不会影响旧的数据，相反toRef是引用</span></span><br><span class="line"><span class="comment"> *ref数据与界面一起改变 toRef不会</span></span><br><span class="line"><span class="comment"> *markRaw可指定某个对象不被追踪(监听)</span></span><br><span class="line"><span class="comment"> *toRefs可以指定对象的多个键生成Ref对象(键名一致)</span></span><br><span class="line"><span class="comment"> *customRef-&gt;参数(track,trigger)=(追踪，触发更新)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><blockquote><p>setup()是同步执行的，不可以使用异步</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue自定义指令</title>
      <link href="2020/09/17/vue-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/"/>
      <url>2020/09/17/vue-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>好用的 vue 自定义指令，封装对于 Dom 操作的指令（相当于 v-model 语法糖）</p></blockquote><span id="more"></span><h2 id="vue-自定义指令"><a href="#vue-自定义指令" class="headerlink" title="vue 自定义指令"></a>vue 自定义指令</h2><h4 id="自定义指令的钩子函数"><a href="#自定义指令的钩子函数" class="headerlink" title="自定义指令的钩子函数"></a>自定义指令的钩子函数</h4><p>（1）bind:指令第一次绑定要元素时调用，这个自定义指令只能用一次（日抛型）</p><p>（2）unbind：指令与元素解绑时，只使用一次</p><p>（3）inserted:被绑定的元素，插入到父节点的dom上的时候调用</p><p>（4）update:组件更新时调用</p><p>（5）componentUpdated：组件和子组件更新时调用。 注意点:</p><p>（1）el指的是绑定这个指令的DOM元素，el的参数是js对象</p><p>（2）除了el,其他的都是可读的</p><p>（3）除了update和componentUpdated之外，其他的钩子函数都有el,binding,vnode这三个参数</p><p>（4）binding里有很多属性：name,value,oldValue,expression、arg、modifiers</p><p>（5）oldVnode只在update和componentUpdated这两个钩子函数中生效（Vnode是虚拟节点的意思）</p><h3 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h3><blockquote><p>全局注册</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册一个全局自定义指令 `v-focus`</span></span><br><span class="line">Vue.directive(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 当被绑定的元素插入到 DOM 中时……</span></span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 聚焦元素</span></span><br><span class="line">    el.focus();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>局部组件注册</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">directives: &#123;</span><br><span class="line">  focus: &#123;</span><br><span class="line">    <span class="comment">// 指令的定义</span></span><br><span class="line">    inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">      el.focus()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在标签中使用</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-focus&gt;</span><br></pre></td></tr></table></figure><h3 id="vue-cli-批量注册全局指令"><a href="#vue-cli-批量注册全局指令" class="headerlink" title="vue-cli 批量注册全局指令"></a>vue-cli 批量注册全局指令</h3><blockquote><p>新建<strong>directives/index.js</strong></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> modulesFiles = <span class="built_in">require</span>.context(<span class="string">&quot;./modules&quot;</span>, <span class="literal">true</span>, <span class="regexp">/\.js$/</span>); <span class="comment">//匹配此文件夹内的js文件</span></span><br><span class="line"><span class="keyword">const</span> directives = modulesFiles.keys().reduce(<span class="function">(<span class="params">modules, modulePath</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> moduleName = modulePath.replace(<span class="regexp">/^\.\/(.*)\.\w+$/</span>, <span class="string">&quot;$1&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> value = modulesFiles(modulePath);</span><br><span class="line">  modules[moduleName] = value.default;</span><br><span class="line">  <span class="keyword">return</span> modules;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.keys(directives).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">      Vue.directive(key, directives[key]);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>在 <code>main.js</code> 引入并调用</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Directives <span class="keyword">from</span> <span class="string">&quot;@/directives&quot;</span>;</span><br><span class="line">Vue.use(Directives);</span><br></pre></td></tr></table></figure><h3 id="limit-限制数字和浮点数"><a href="#limit-限制数字和浮点数" class="headerlink" title="limit 限制数字和浮点数"></a>limit 限制数字和浮点数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trigger = <span class="function">(<span class="params">el, type</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> e = <span class="built_in">document</span>.createEvent(<span class="string">&quot;HTMLEvents&quot;</span>);</span><br><span class="line">  e.initEvent(type, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">  el.dispatchEvent(e);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding, vNode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      arg = <span class="string">&quot;&quot;</span>,</span><br><span class="line">      value: decimal = <span class="string">&quot;2&quot;</span>,</span><br><span class="line">      modifiers: &#123; int, float, minus &#125;,</span><br><span class="line">    &#125; = binding;</span><br><span class="line">    <span class="keyword">const</span> handler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = el.value;</span><br><span class="line">      <span class="keyword">let</span> symbol = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (minus &amp;&amp; result.charAt(<span class="number">0</span>) == <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line">        result = el.value.slice(<span class="number">1</span>);</span><br><span class="line">        symbol = <span class="string">&quot;-&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        symbol = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (float) &#123;</span><br><span class="line">        result = result.match(</span><br><span class="line">          <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;^\\d*(\\.?\\d&#123;0,&quot;</span> + decimal + <span class="string">&quot;&#125;)&quot;</span>, <span class="string">&quot;g&quot;</span>)</span><br><span class="line">        )[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          (result.length &gt; <span class="number">1</span> &amp;&amp;</span><br><span class="line">            result.charAt(<span class="number">0</span>) == <span class="number">0</span> &amp;&amp;</span><br><span class="line">            result.charAt(<span class="number">1</span>) != <span class="string">&quot;.&quot;</span>) ||</span><br><span class="line">          result.charAt(<span class="number">0</span>) == <span class="string">&quot;.&quot;</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          result = result.slice(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        trigger(el, <span class="string">&quot;input&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (int | <span class="literal">true</span>) &#123;</span><br><span class="line">        result = result.replace(<span class="regexp">/[^\d]/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        result = result != <span class="string">&quot;0&quot;</span> ? result.replace(<span class="regexp">/^0*/g</span>, <span class="string">&quot;&quot;</span>) : <span class="number">0</span>;</span><br><span class="line">        trigger(el, <span class="string">&quot;input&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      el.value = symbol + result;</span><br><span class="line">    &#125;;</span><br><span class="line">    el.addEventListener(<span class="string">&quot;keyup&quot;</span>, handler);</span><br><span class="line">    el.addEventListener(<span class="string">&quot;blur&quot;</span>, handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&quot;keyup&quot;</span>, el.handler);</span><br><span class="line">    el.removeEventListener(<span class="string">&quot;blur&quot;</span>, el.handler);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用 v-limit 后可带多个 modifiers</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit &#x2F;&gt;&#x2F;&#x2F;默认大于0的正整数</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.int &#x2F;&gt;&#x2F;&#x2F;默认大于0的正整数</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.minus &#x2F;&gt;&#x2F;&#x2F;整数(带负号-)</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.minus.int &#x2F;&gt;&#x2F;&#x2F;整数(带负号-)</span><br><span class="line"></span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.float &#x2F;&gt;&#x2F;&#x2F;0以上浮点数,默认小数点为2位</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.float&#x3D;&quot;3&quot; &#x2F;&gt;&#x2F;&#x2F;0以上浮点数,小数点为3位</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.minus.float &#x2F;&gt;&#x2F;&#x2F;浮点数(可带负号-),默认小数点为2位</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot; v-limit.minus.float&#x3D;&quot;4&quot; &#x2F;&gt;&#x2F;&#x2F;浮点数(可带负号-),小数点为4位</span><br></pre></td></tr></table></figure><h3 id="color"><a href="#color" class="headerlink" title="color"></a>color</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> interval = binding.arg ? binding.arg : <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(binding.value)) &#123;</span><br><span class="line">      <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">      el.style.color = binding.value[i];</span><br><span class="line">      el.dataset.time = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; binding.value.length - <span class="number">1</span>) &#123;</span><br><span class="line">          i = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        el.style.color = binding.value[i];</span><br><span class="line">        i++;</span><br><span class="line">      &#125;, interval);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      el.style.color = binding.value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  componentUpdated: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(el.dataset.time);</span><br><span class="line">    <span class="keyword">const</span> interval = binding.arg ? binding.arg : <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(binding.value)) &#123;</span><br><span class="line">      <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">      el.style.color = binding.value[i];</span><br><span class="line">      el.dataset.time = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; binding.value.length - <span class="number">1</span>) &#123;</span><br><span class="line">          i = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        el.style.color = binding.value[i];</span><br><span class="line">        i++;</span><br><span class="line">      &#125;, interval);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      el.style.color = binding.value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(el.dataset.time);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Sticky-吸顶"><a href="#Sticky-吸顶" class="headerlink" title="Sticky 吸顶"></a>Sticky 吸顶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vueSticky = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> listenAction;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> params = binding.value || &#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> stickyTop = params.stickyTop || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> zIndex = params.zIndex || <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">const</span> elStyle = el.style;</span><br><span class="line"></span><br><span class="line">    elStyle.position = <span class="string">&quot;-webkit-sticky&quot;</span>;</span><br><span class="line">    elStyle.position = <span class="string">&quot;sticky&quot;</span>;</span><br><span class="line">    <span class="comment">// if the browser support css sticky（Currently Safari, Firefox and Chrome Canary）</span></span><br><span class="line">    <span class="comment">// if (~elStyle.position.indexOf(&#x27;sticky&#x27;)) &#123;</span></span><br><span class="line">    <span class="comment">//     elStyle.top = `$&#123;stickyTop&#125;px`;</span></span><br><span class="line">    <span class="comment">//     elStyle.zIndex = zIndex;</span></span><br><span class="line">    <span class="comment">//     return</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">const</span> elHeight = el.getBoundingClientRect().height;</span><br><span class="line">    <span class="keyword">const</span> elWidth = el.getBoundingClientRect().width;</span><br><span class="line">    elStyle.cssText = <span class="string">`top: <span class="subst">$&#123;stickyTop&#125;</span>px; z-index: <span class="subst">$&#123;zIndex&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> parentElm = el.parentNode || <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">const</span> placeholder = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    placeholder.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    placeholder.style.width = <span class="string">`<span class="subst">$&#123;elWidth&#125;</span>px`</span>;</span><br><span class="line">    placeholder.style.height = <span class="string">`<span class="subst">$&#123;elHeight&#125;</span>px`</span>;</span><br><span class="line">    parentElm.insertBefore(placeholder, el);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> active = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> getScroll = <span class="function">(<span class="params">target, top</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> prop = top ? <span class="string">&quot;pageYOffset&quot;</span> : <span class="string">&quot;pageXOffset&quot;</span>;</span><br><span class="line">      <span class="keyword">const</span> method = top ? <span class="string">&quot;scrollTop&quot;</span> : <span class="string">&quot;scrollLeft&quot;</span>;</span><br><span class="line">      <span class="keyword">let</span> ret = target[prop];</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> ret !== <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        ret = <span class="built_in">window</span>.document.documentElement[method];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> sticky = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (active) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!elStyle.height) &#123;</span><br><span class="line">        elStyle.height = <span class="string">`<span class="subst">$&#123;el.offsetHeight&#125;</span>px`</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      elStyle.position = <span class="string">&quot;fixed&quot;</span>;</span><br><span class="line">      elStyle.width = <span class="string">`<span class="subst">$&#123;elWidth&#125;</span>px`</span>;</span><br><span class="line">      placeholder.style.display = <span class="string">&quot;inline-block&quot;</span>;</span><br><span class="line">      active = <span class="literal">true</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> reset = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!active) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      elStyle.position = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      placeholder.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      active = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> check = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> scrollTop = getScroll(<span class="built_in">window</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">const</span> offsetTop = el.getBoundingClientRect().top;</span><br><span class="line">      <span class="keyword">if</span> (offsetTop &lt; stickyTop) &#123;</span><br><span class="line">        sticky();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (scrollTop &lt; elHeight + stickyTop) &#123;</span><br><span class="line">          reset();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    listenAction = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      check();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;scroll&quot;</span>, listenAction);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&quot;scroll&quot;</span>, listenAction);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-Sticky&gt;我在顶部&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><h3 id="copy-复制"><a href="#copy-复制" class="headerlink" title="copy 复制"></a>copy 复制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">bind</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value;</span><br><span class="line">    el.handler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!el.$value) &#123;</span><br><span class="line">        <span class="comment">// 值为空的时候，给出提示。可根据项目UI仔细设计</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;无复制内容&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 动态创建 textarea 标签</span></span><br><span class="line">      <span class="keyword">const</span> textarea = <span class="built_in">document</span>.createElement(<span class="string">&quot;textarea&quot;</span>);</span><br><span class="line">      <span class="comment">// 将该 textarea 设为 readonly 防止 iOS 下自动唤起键盘，同时将 textarea 移出可视区域</span></span><br><span class="line">      textarea.readOnly = <span class="string">&quot;readonly&quot;</span>;</span><br><span class="line">      textarea.style.position = <span class="string">&quot;absolute&quot;</span>;</span><br><span class="line">      textarea.style.left = <span class="string">&quot;-9999px&quot;</span>;</span><br><span class="line">      <span class="comment">// 将要 copy 的值赋给 textarea 标签的 value 属性</span></span><br><span class="line">      textarea.value = el.$value;</span><br><span class="line">      <span class="comment">// 将 textarea 插入到 body 中</span></span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(textarea);</span><br><span class="line">      <span class="comment">// 选中值并复制</span></span><br><span class="line">      textarea.select();</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">document</span>.execCommand(<span class="string">&quot;Copy&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;复制成功&quot;</span>); <span class="comment">// 可根据项目UI仔细设计</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(textarea);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 绑定点击事件，就是所谓的一键 copy 啦</span></span><br><span class="line">    el.addEventListener(<span class="string">&quot;click&quot;</span>, el.handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 当传进来的值更新的时候触发</span></span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 指令与元素解绑的时候，移除事件绑定</span></span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&quot;click&quot;</span>, el.handler);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button v-copy&#x3D;&quot;copyText&quot;&gt;复制&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      copyText: &quot;a copy directives&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="longpress-长按事件"><a href="#longpress-长按事件" class="headerlink" title="longpress 长按事件"></a>longpress 长按事件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding, vNode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; <span class="attr">arg</span>: delay = <span class="number">2000</span> &#125; = binding;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> binding.value !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="string">&quot;callback must be a function&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 定义变量</span></span><br><span class="line">    <span class="keyword">let</span> pressTimer = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// 创建计时器（ 2秒后执行函数 ）</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.type === <span class="string">&quot;click&quot;</span> &amp;&amp; e.button !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (pressTimer === <span class="literal">null</span>) &#123;</span><br><span class="line">        pressTimer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          handler();</span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 取消计时器</span></span><br><span class="line">    <span class="keyword">let</span> cancel = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (pressTimer !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(pressTimer);</span><br><span class="line">        pressTimer = <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 运行函数</span></span><br><span class="line">    <span class="keyword">const</span> handler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      binding.value(e);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 添加事件监听器</span></span><br><span class="line">    el.addEventListener(<span class="string">&quot;mousedown&quot;</span>, start);</span><br><span class="line">    el.addEventListener(<span class="string">&quot;touchstart&quot;</span>, start);</span><br><span class="line">    <span class="comment">// 取消计时器</span></span><br><span class="line">    el.addEventListener(<span class="string">&quot;click&quot;</span>, cancel);</span><br><span class="line">    el.addEventListener(<span class="string">&quot;mouseout&quot;</span>, cancel);</span><br><span class="line">    el.addEventListener(<span class="string">&quot;touchend&quot;</span>, cancel);</span><br><span class="line">    el.addEventListener(<span class="string">&quot;touchcancel&quot;</span>, cancel);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 当传进来的值更新的时候触发</span></span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 指令与元素解绑的时候，移除事件绑定</span></span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&quot;click&quot;</span>, el.handler);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button v-longpress&#x3D;&quot;longpress&quot;&gt;长按&lt;&#x2F;button&gt;&#x2F;&#x2F;默认两秒</span><br><span class="line">  &lt;button v-longpress:4000&#x3D;&quot;longpress&quot;&gt;长按&lt;&#x2F;button&gt;&#x2F;&#x2F;可设置4000毫秒</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    longpress() &#123;</span><br><span class="line">      alert(&quot;长按指令生效&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="debounce-按钮防抖"><a href="#debounce-按钮防抖" class="headerlink" title="debounce 按钮防抖"></a>debounce 按钮防抖</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; <span class="attr">arg</span>: delay = <span class="number">1000</span> &#125; = binding;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">const</span> handler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      &#125;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        binding.value();</span><br><span class="line">      &#125;, delay);</span><br><span class="line">    &#125;;</span><br><span class="line">    el.addEventListener(<span class="string">&quot;click&quot;</span>, handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&quot;click&quot;</span>, el.handler);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button v-debounce&#x3D;&quot;debounceClick&quot;&gt;防抖&lt;&#x2F;button&gt;&#x2F;&#x2F;默认1000毫秒内只执行一次</span><br><span class="line">  &lt;button v-debounce:400&#x3D;&quot;debounce&quot;&gt;防抖&lt;&#x2F;button&gt;&#x2F;&#x2F;400毫秒内只执行一次</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    debounceClick() &#123;</span><br><span class="line">      console.log(&quot;只触发一次&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="LazyLoad-图片懒加载"><a href="#LazyLoad-图片懒加载" class="headerlink" title="LazyLoad 图片懒加载"></a>LazyLoad 图片懒加载</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图片默认src</span></span><br><span class="line"><span class="keyword">let</span> defaultSrc = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="comment">// 加载真实图片</span></span><br><span class="line"><span class="keyword">const</span> load = <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> windowHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">  <span class="keyword">let</span> elTop = el.getBoundingClientRect().top;</span><br><span class="line">  <span class="keyword">let</span> elBtm = el.getBoundingClientRect().bottom;</span><br><span class="line">  <span class="keyword">let</span> realSrc = el.dataset.src;</span><br><span class="line">  <span class="keyword">if</span> (elTop - windowHeight &lt; <span class="number">0</span> &amp;&amp; elBtm &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (realSrc) &#123;</span><br><span class="line">      el.src = realSrc;</span><br><span class="line">      el.removeAttribute(<span class="string">&quot;data-src&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 节流</span></span><br><span class="line"><span class="keyword">const</span> throttle = <span class="function">(<span class="params">fn, delay</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">let</span> prevTime;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currTime = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (!prevTime) prevTime = currTime;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (currTime - prevTime &gt; delay) &#123;</span><br><span class="line">      prevTime = currTime;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      prevTime = <span class="built_in">Date</span>.now();</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">bind</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// data-src 储存真实src</span></span><br><span class="line">    el.setAttribute(<span class="string">&quot;data-src&quot;</span>, binding.value);</span><br><span class="line">    <span class="comment">// 设置src为loading图</span></span><br><span class="line">    el.setAttribute(<span class="string">&quot;src&quot;</span>, defaultSrc);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 兼容处理</span></span><br><span class="line">    <span class="keyword">if</span> (IntersectionObserver) &#123;</span><br><span class="line">      <span class="comment">// 利用IntersectionObserver监听el</span></span><br><span class="line">      <span class="keyword">var</span> io = <span class="keyword">new</span> IntersectionObserver(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> realSrc = el.dataset.src;</span><br><span class="line">        <span class="keyword">if</span> (entries[<span class="number">0</span>].isIntersecting) &#123;</span><br><span class="line">          <span class="keyword">if</span> (realSrc) &#123;</span><br><span class="line">            el.src = realSrc;</span><br><span class="line">            el.removeAttribute(<span class="string">&quot;data-src&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      io.observe(el);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 监听scroll事件</span></span><br><span class="line">      <span class="keyword">let</span> handler = throttle(load, <span class="number">1000</span>);</span><br><span class="line">      load(el);</span><br><span class="line">      <span class="built_in">window</span>.addEventListener(<span class="string">&quot;scroll&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        handler(el);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-lazyLoad</span>=<span class="string">&quot;&#x27;https://wang-z.gitee.io/img/author.jpg&#x27;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="draggable-拖拽指令"><a href="#draggable-拖拽指令" class="headerlink" title="draggable 拖拽指令"></a>draggable 拖拽指令</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    el.style.cursor = <span class="string">&quot;move&quot;</span>;</span><br><span class="line">    el.onmousedown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> disx = e.pageX - el.offsetLeft;</span><br><span class="line">      <span class="keyword">let</span> disy = e.pageY - el.offsetTop;</span><br><span class="line">      <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> x = e.pageX - disx;</span><br><span class="line">        <span class="keyword">let</span> y = e.pageY - disy;</span><br><span class="line">        <span class="keyword">let</span> maxX =</span><br><span class="line">          <span class="built_in">document</span>.body.clientWidth -</span><br><span class="line">          <span class="built_in">parseInt</span>(<span class="built_in">window</span>.getComputedStyle(el).width);</span><br><span class="line">        <span class="keyword">let</span> maxY =</span><br><span class="line">          <span class="built_in">document</span>.body.clientHeight -</span><br><span class="line">          <span class="built_in">parseInt</span>(<span class="built_in">window</span>.getComputedStyle(el).height);</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          x = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; maxX) &#123;</span><br><span class="line">          x = maxX;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          y = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y &gt; maxY) &#123;</span><br><span class="line">          y = maxY;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        el.style.left = x + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        el.style.top = y + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.onmousemove = <span class="built_in">document</span>.onmouseup = <span class="literal">null</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>使用</p><p>需要设置需要拖拽的元素为相对定位，其父元素为绝对定位</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;el-dialog&quot; v-draggable&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><h3 id="waterMarker添加背景水印"><a href="#waterMarker添加背景水印" class="headerlink" title="waterMarker添加背景水印"></a>waterMarker添加背景水印</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addWaterMarker</span>(<span class="params">str, parentNode, font, textColor</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 水印文字，父元素，字体，文字颜色</span></span><br><span class="line">  <span class="keyword">var</span> can = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">  parentNode.appendChild(can)</span><br><span class="line">  can.width = <span class="number">200</span></span><br><span class="line">  can.height = <span class="number">150</span></span><br><span class="line">  can.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> cans = can.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">  cans.rotate((-<span class="number">20</span> * <span class="built_in">Math</span>.PI) / <span class="number">180</span>)</span><br><span class="line">  cans.font = font || <span class="string">&#x27;16px Microsoft JhengHei&#x27;</span></span><br><span class="line">  cans.fillStyle = textColor || <span class="string">&#x27;rgba(180, 180, 180, 0.3)&#x27;</span></span><br><span class="line">  cans.textAlign = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">  cans.textBaseline = <span class="string">&#x27;Middle&#x27;</span></span><br><span class="line">  cans.fillText(str, can.width / <span class="number">10</span>, can.height / <span class="number">2</span>)</span><br><span class="line">  parentNode.style.backgroundImage = <span class="string">&#x27;url(&#x27;</span> + can.toDataURL(<span class="string">&#x27;image/png&#x27;</span>) + <span class="string">&#x27;)&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> waterMarker = &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    addWaterMarker(binding.value.text, el, binding.value.font, binding.value.textColor)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> waterMarker</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>使用<br>设置水印文案，颜色，字体大小即可</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-waterMarker=<span class="string">&quot;&#123;text:&#x27;版权所有&#x27;,textColor:&#x27;rgba(180, 180, 180, 0.4)&#x27;&#125;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reg-常用正则</title>
      <link href="2020/09/16/reg-%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99/"/>
      <url>2020/09/16/reg-%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录常用正则</p></blockquote><span id="more"></span><h2 id="常用正则"><a href="#常用正则" class="headerlink" title="常用正则"></a>常用正则</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^\d*(\.?\d&#123;<span class="number">0</span>,<span class="number">1</span>&#125;)/g; <span class="comment">//匹配小数点为一位</span></span><br></pre></td></tr></table></figure><h3 id="是否为外部链接"><a href="#是否为外部链接" class="headerlink" title="是否为外部链接"></a>是否为外部链接</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isExternal</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^(https?:|mailto:|tel:)/</span>.test(path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="不能为空且不包含"><a href="#不能为空且不包含" class="headerlink" title="不能为空且不包含(/)"></a>不能为空且不包含(/)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^\S((?!\/).)*$/</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Regexp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js学习笔记</title>
      <link href="2020/09/03/js-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/09/03/js-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>复杂函数的学习，generator，斐波那契数列，Observer（订阅模式）</p></blockquote><span id="more"></span><h3 id="简单递归"><a href="#简单递归" class="headerlink" title="简单递归"></a>简单递归</h3><h4 id="求n-即，1×2×3×4×5×······×n"><a href="#求n-即，1×2×3×4×5×······×n" class="headerlink" title="求n! 即，1×2×3×4×5×······×n"></a>求n! 即，1×2×3×4×5×······×n</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params">i</span>)</span>&#123;<span class="keyword">return</span> i&lt;<span class="number">2</span>?<span class="number">1</span>:i*n(i-<span class="number">1</span>);&#125;</span><br></pre></td></tr></table></figure><h4 id="求1-2-···-n"><a href="#求1-2-···-n" class="headerlink" title="求1+2+···+n"></a>求1+2+···+n</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">i</span>)</span>&#123;<span class="keyword">return</span> i&lt;<span class="number">2</span>?<span class="number">1</span>:i+p(i-<span class="number">1</span>);&#125;</span><br></pre></td></tr></table></figure><h4 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> sum(n - <span class="number">1</span>) + n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> temp = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> o[key] == <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      temp[key] = clone(o[key])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      temp[key] = o[key]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="求n个整数的平均值"><a href="#求n个整数的平均值" class="headerlink" title="求n个整数的平均值"></a>求n个整数的平均值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEverage</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (getEverage(n-<span class="number">1</span>)*(n-<span class="number">1</span>)+n)/n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h3><p>利用<code>for...of</code>循环，可以写出遍历任意对象（object）的方法。原生的 JavaScript 对象没有遍历接口，无法使用<code>for...of</code>循环，通过 Generator 函数为它加上这个接口，就可以用了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">objectEntries</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> propKeys = <span class="built_in">Reflect</span>.ownKeys(obj);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> propKey <span class="keyword">of</span> propKeys) &#123;</span><br><span class="line">    <span class="keyword">yield</span> [propKey, obj[propKey]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jane = &#123; <span class="attr">first</span>: <span class="string">&#x27;Jane&#x27;</span>, <span class="attr">last</span>: <span class="string">&#x27;Doe&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> objectEntries(jane)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first: Jane</span></span><br><span class="line"><span class="comment">// last: Doe</span></span><br></pre></td></tr></table></figure><p>将 Generator 函数加到对象的<code>Symbol.iterator</code>属性上面。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">objectEntries</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> propKeys = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> propKey <span class="keyword">of</span> propKeys) &#123;</span><br><span class="line">    <span class="keyword">yield</span> [propKey, <span class="built_in">this</span>[propKey]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jane = &#123; <span class="attr">first</span>: <span class="string">&#x27;Jane&#x27;</span>, <span class="attr">last</span>: <span class="string">&#x27;Doe&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line">jane[<span class="built_in">Symbol</span>.iterator] = objectEntries;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> jane) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first: Jane</span></span><br><span class="line"><span class="comment">// last: Doe</span></span><br></pre></td></tr></table></figure><h3 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibonacci</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [prev, curr] = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    <span class="keyword">yield</span> curr;</span><br><span class="line">    [prev, curr] = [curr, prev + curr];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> fibonacci()) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">1000</span>) <span class="keyword">break</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Observer（订阅-发布者）"><a href="#Observer（订阅-发布者）" class="headerlink" title="Observer（订阅-发布者）"></a>Observer（订阅-发布者）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> publisher = &#123;</span><br><span class="line">     <span class="comment">//订阅者数组上每个事件（type）有着序列化的订阅事件</span></span><br><span class="line">    subscribers: &#123;</span><br><span class="line">        any: [] <span class="comment">// event type: subscribers</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//签订订阅服务-订阅那个类型的报纸，报纸出版自动触发订阅者的fn</span></span><br><span class="line">    subscribe: <span class="function"><span class="keyword">function</span> (<span class="params">fn, type</span>) </span>&#123;</span><br><span class="line">        type = type || <span class="string">&#x27;any&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span>.subscribers[type] === <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.subscribers[type] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.subscribers[type].push(fn);</span><br><span class="line">     <span class="comment">// console.log(&quot;subscribe&quot;, this.subscribers);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    unsubscribe: <span class="function"><span class="keyword">function</span> (<span class="params">fn, type</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.visitSubscribers(<span class="string">&#x27;unsubscribe&#x27;</span>, fn, type);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//发布报纸</span></span><br><span class="line">    publish: <span class="function"><span class="keyword">function</span> (<span class="params">publication, type</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.visitSubscribers(<span class="string">&#x27;publish&#x27;</span>, publication, type);</span><br><span class="line">    &#125;,</span><br><span class="line">    visitSubscribers: <span class="function"><span class="keyword">function</span> (<span class="params">action, arg, type</span>) </span>&#123;</span><br><span class="line">         <span class="comment">//判断是哪个事件类型（pubtype）</span></span><br><span class="line">            <span class="comment">//subscribers是哪个订阅者数组subscribers（对象）—&gt;[pubtype]订阅者</span></span><br><span class="line">            <span class="comment">//事件类型的所有事件length（max）</span></span><br><span class="line">        <span class="keyword">var</span> pubtype = type || <span class="string">&#x27;any&#x27;</span>,</span><br><span class="line">            subscribers = <span class="built_in">this</span>.subscribers[pubtype],</span><br><span class="line">            i,</span><br><span class="line">            max = subscribers.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; max; i += <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (action === <span class="string">&#x27;publish&#x27;</span>) &#123;</span><br><span class="line">                 <span class="comment">//事件调用</span></span><br><span class="line">                subscribers[i](arg);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (subscribers[i] === arg) &#123;</span><br><span class="line">                    <span class="comment">//删除事件</span></span><br><span class="line">                    subscribers.splice(i, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var s1 = &#123;log: console.log&#125;,</span></span><br><span class="line"><span class="comment">    s2 = &#123;err: console.error&#125;,</span></span><br><span class="line"><span class="comment">    s3 = &#123;warn: console.warn&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">publisher.subscribe(s1.log);</span></span><br><span class="line"><span class="comment">publisher.subscribe(s2.err);</span></span><br><span class="line"><span class="comment">publisher.subscribe(s3.warn);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">publisher.publish(&#123;hello: &quot;World&quot;&#125;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">publisher.unsubscribe(s2.err);</span></span><br><span class="line"><span class="comment">publisher.publish(&quot;hello&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">publisher.subscribe(s1.log, &quot;log&quot;);</span></span><br><span class="line"><span class="comment">publisher.publish(&#123;obj: &quot;log this object&quot;&#125;, &quot;log&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//浅拷贝一个发布者 继承publisher所有事件且subscribers定义为&#123;any: []&#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makePublisher</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> publisher) &#123;</span><br><span class="line">        <span class="keyword">if</span> (publisher.hasOwnProperty(i) &amp;&amp; <span class="keyword">typeof</span> publisher[i] === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            o[i] = publisher[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    o.subscribers = &#123;<span class="attr">any</span>: []&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> paper = &#123;</span><br><span class="line">    daily: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.publish(<span class="string">&quot;big news today&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    monthly: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.publish(<span class="string">&quot;interesting analysis&quot;</span>, <span class="string">&quot;monthly&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">makePublisher(paper);</span><br><span class="line"><span class="comment">//订阅者</span></span><br><span class="line"><span class="keyword">var</span> joe = &#123;</span><br><span class="line">    drinkCoffee: <span class="function"><span class="keyword">function</span> (<span class="params">paper</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Just read &#x27;</span> + paper);</span><br><span class="line">    &#125;,</span><br><span class="line">    sundayPreNap: <span class="function"><span class="keyword">function</span> (<span class="params">monthly</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;About to fall asleep reading this &#x27;</span> + monthly);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//订阅日报和月报</span></span><br><span class="line">paper.subscribe(joe.drinkCoffee);</span><br><span class="line">paper.subscribe(joe.sundayPreNap, <span class="string">&#x27;monthly&#x27;</span>);</span><br><span class="line"><span class="comment">//paper出版报纸-&gt;将通知订阅者</span></span><br><span class="line">paper.daily();</span><br><span class="line">paper.daily();</span><br><span class="line">paper.daily();</span><br><span class="line">paper.monthly();</span><br><span class="line"></span><br><span class="line"><span class="comment">//每个订阅者可自行发布</span></span><br><span class="line">makePublisher(joe);</span><br><span class="line"><span class="comment">//一个发布的publish函数</span></span><br><span class="line">joe.tweet = <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.publish(msg);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//报纸读取这个推特</span></span><br><span class="line">paper.readTweets = <span class="function"><span class="keyword">function</span> (<span class="params">tweet</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;Call big meeting! Someone &#x27;</span> + tweet);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">joe.subscribe(paper.readTweets);</span><br><span class="line"></span><br><span class="line">joe.tweet(<span class="string">&quot;hated the paper today&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="按键游戏"><a href="#按键游戏" class="headerlink" title="按键游戏"></a>按键游戏</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> publisher = &#123;</span><br><span class="line">    subscribers: &#123;</span><br><span class="line">        any: []</span><br><span class="line">    &#125;,</span><br><span class="line">    on: <span class="function"><span class="keyword">function</span> (<span class="params">type, fn, context</span>) </span>&#123;</span><br><span class="line">        type = type || <span class="string">&#x27;any&#x27;</span>;</span><br><span class="line">        fn = <span class="keyword">typeof</span> fn === <span class="string">&quot;function&quot;</span> ? fn : context[fn];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span>.subscribers[type] === <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.subscribers[type] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.subscribers[type].push(&#123;<span class="attr">fn</span>: fn, <span class="attr">context</span>: context || <span class="built_in">this</span>&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span> (<span class="params">type, fn, context</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.visitSubscribers(<span class="string">&#x27;unsubscribe&#x27;</span>, type, fn, context);</span><br><span class="line">    &#125;,</span><br><span class="line">    fire: <span class="function"><span class="keyword">function</span> (<span class="params">type, publication</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.visitSubscribers(<span class="string">&#x27;publish&#x27;</span>, type, publication);</span><br><span class="line">    &#125;,</span><br><span class="line">    visitSubscribers: <span class="function"><span class="keyword">function</span> (<span class="params">action, type, arg, context</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> pubtype = type || <span class="string">&#x27;any&#x27;</span>,</span><br><span class="line">            subscribers = <span class="built_in">this</span>.subscribers[pubtype],</span><br><span class="line">            i,</span><br><span class="line">            max = subscribers ? subscribers.length : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; max; i += <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (action === <span class="string">&#x27;publish&#x27;</span>) &#123;</span><br><span class="line">                subscribers[i].fn.call(subscribers[i].context, arg);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (subscribers[i].fn === arg &amp;&amp; subscribers[i].context === context) &#123;</span><br><span class="line">                    subscribers.splice(i, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makePublisher</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> publisher) &#123;</span><br><span class="line">        <span class="keyword">if</span> (publisher.hasOwnProperty(i) &amp;&amp; <span class="keyword">typeof</span> publisher[i] === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            o[i] = publisher[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    o.subscribers = &#123;<span class="attr">any</span>: []&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> game = &#123;</span><br><span class="line"></span><br><span class="line">    keys: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    addPlayer: <span class="function"><span class="keyword">function</span> (<span class="params">player</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> key = player.key.toString().charCodeAt(<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.keys[key] = player;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    handleKeypress: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        e = e || <span class="built_in">window</span>.event; <span class="comment">// IE</span></span><br><span class="line">        <span class="keyword">if</span> (game.keys[e.which]) &#123;</span><br><span class="line">            game.keys[e.which].play();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    handlePlay: <span class="function"><span class="keyword">function</span> (<span class="params">player</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i, </span><br><span class="line">            players = <span class="built_in">this</span>.keys,</span><br><span class="line">            score = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> players) &#123;</span><br><span class="line">            <span class="keyword">if</span> (players.hasOwnProperty(i)) &#123;</span><br><span class="line">                score[players[i].name] = players[i].points;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.fire(<span class="string">&#x27;scorechange&#x27;</span>, score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Player</span>(<span class="params">name, key</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.points = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.key  = key;</span><br><span class="line">    <span class="built_in">this</span>.fire(<span class="string">&#x27;newplayer&#x27;</span>, <span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Player.prototype.play = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.points += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">this</span>.fire(<span class="string">&#x27;play&#x27;</span>, <span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scoreboard = &#123;</span><br><span class="line"></span><br><span class="line">    element: <span class="built_in">document</span>.getElementById(<span class="string">&#x27;results&#x27;</span>),</span><br><span class="line"></span><br><span class="line">    update: <span class="function"><span class="keyword">function</span> (<span class="params">score</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> i, msg = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> score) &#123;</span><br><span class="line">            <span class="keyword">if</span> (score.hasOwnProperty(i)) &#123;</span><br><span class="line">                msg += <span class="string">&#x27;&lt;p&gt;&lt;strong&gt;&#x27;</span> + i + <span class="string">&#x27;&lt;\/strong&gt;: &#x27;</span>;</span><br><span class="line">                msg += score[i];</span><br><span class="line">                msg += <span class="string">&#x27;&lt;\/p&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.element.innerHTML = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">makePublisher(Player.prototype);</span><br><span class="line">makePublisher(game);</span><br><span class="line"></span><br><span class="line">Player.prototype.on(<span class="string">&quot;newplayer&quot;</span>, <span class="string">&quot;addPlayer&quot;</span>, game);</span><br><span class="line">Player.prototype.on(<span class="string">&quot;play&quot;</span>,      <span class="string">&quot;handlePlay&quot;</span>, game);</span><br><span class="line"></span><br><span class="line">game.on(<span class="string">&quot;scorechange&quot;</span>, scoreboard.update, scoreboard);</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onkeypress = game.handleKeypress;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> playername, key;</span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    playername = prompt(<span class="string">&quot;Add player (name)&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!playername) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        key = prompt(<span class="string">&quot;Key for &quot;</span> + playername + <span class="string">&quot;?&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (key) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">new</span> Player(playername,  key);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用快捷键</title>
      <link href="2020/09/03/base-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>2020/09/03/base-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>谷歌，Typora（markdown编辑器）的快捷键整理</p></blockquote><span id="more"></span><h3 id="谷歌常用快捷键"><a href="#谷歌常用快捷键" class="headerlink" title="谷歌常用快捷键"></a>谷歌常用快捷键</h3><ol><li><p>ctrl + n 打开新窗口</p></li><li><p>ctrl + shift + n 打开无痕浏览窗口</p></li><li><p>ctrl + t 打开一个新的选项卡</p></li><li><p>ctrl + shift + t 重新打开最后关闭的选项卡</p></li><li><p>ctrl + 1-8 跳转到特定的选项卡</p></li><li><p>ctrl + 9 跳转到最后一个选项卡</p></li><li><p>ctrl + tab 跳转到下一个选项卡</p></li><li><p>ctrl + shift + tab 跳转到上一个选项卡</p></li><li><p>alt + home 当前位置打开主页</p></li><li><p>alt + left 在当前位置打开上一页</p></li><li><p>alt + right 在当前位置打开下一页</p></li><li><p>ctrl + w 关闭当前标签页</p></li><li><p>ctrl + shift + w 关闭当前窗口</p></li><li><p>alt + d 跳转到地址栏</p></li><li><p>ctrl + s 保存当前网页</p></li><li><p>ctrl + r 刷新</p></li><li><p>ctrl + shift + r 重新加载页面</p></li><li><p>esc 停止加载</p></li><li><p>tab 浏览可前进可点击项目</p></li><li><p>shift + tab 浏览可向后移动可点击项目</p></li><li><p>ctrl + u 显示网页源代码</p></li><li><p>ctrl + d 保存为书签</p></li><li><p>ctrl + shift + d 为所有标签页添加书签</p></li><li><p>ctrl + +/-/0 屏幕变大/变小/恢复</p></li><li><p>space/pgon 向下翻页</p></li><li><p>shift + space/pgup 向上翻页</p></li><li><p>home/end 回到行首/行尾</p></li><li><p>ctrl + click 后台打开</p></li><li><p>shift +click 新窗口打开</p></li><li><p>alt + click 下载网页</p></li><li><p>拖动标签/书签，可在新窗口打开,按esc，将标签返回原位置</p></li><li><p>shift + 鼠标滚轮 水平移动</p></li><li><p>alt + space + n/x 最大化/最小化窗口</p></li><li><p>alt + f / alt + e 打开菜单</p></li><li><p>ctrl + shift + o/b 打开/关闭书签 也常能打开输入法表情</p></li><li><p>ctrl + h 新窗口打开历史记录</p></li><li><p>f6 将光标在工具栏，标题栏，书签栏，内容之间来回切换</p></li><li><p>ctrl + f 打开搜索</p><ul><li>ctrl + g 跳到下一个</li><li>ctrl + shift + g 跳到上一个</li></ul></li><li><p>ctrl + shift + del 打开清理浏览器</p></li></ol><h3 id="Typora快捷键"><a href="#Typora快捷键" class="headerlink" title="Typora快捷键"></a>Typora快捷键</h3><p>一：菜单栏</p><p>文件：alt+F</p><p>编辑：alt+E</p><p>段落：alt+P</p><p>格式：alt+O</p><p>视图：alt+V</p><p>主题：alt+T</p><p>帮助：alt+H</p><p>二：文件</p><p>新建：Ctrl+N</p><p>新建窗口：Ctrl+Shift+N</p><p>打开：Ctrl+O</p><p>快速打开：Ctrl+P</p><p>保存：Ctrl+S</p><p>另存为：Ctrl+Shift+S</p><p>偏好：Ctrl+,</p><p>关闭：Ctrl+W</p><p>三：编辑</p><p>撤销：Ctrl+Z</p><p>重做：Ctrl+Y</p><p>剪切：Ctrl+X</p><p>复制：Ctrl+C</p><p>粘贴：Ctrl+V</p><p>复制为MarkDown：Ctrl+Shift+C</p><p>粘贴为纯文本：Ctrl+Shift+V</p><p>全选：Ctrl+A</p><p>选中当前行/句：Ctrl+L</p><p>选中当前格式文本：Ctrl+E</p><p>选中当前词：Ctrl+D</p><p>跳转到文首：Ctrl+Home</p><p>跳转到所选内容：Ctrl+J</p><p>跳转到文末：Ctrl+End</p><p>查找：Ctrl+F</p><p>查找下一个：F3</p><p>查找上一个：Shift+F3</p><p>替换：Ctrl+H</p><p>四：段落</p><p>标题：Ctrl+1/2/3/4/5</p><p>段落：Ctrl+0</p><p>增大标题级别：Ctrl+=</p><p>减少标题级别：Ctrl+-</p><p>表格：Ctrl+T</p><p>代码块：Ctrl+Alt+z（需要设置）</p><p>公式块：Ctrl+Shift+M</p><p>引用：Ctrl+Shift+Q</p><p>有序列表：Ctrl+Shift+[</p><p>无序列表：Ctrl+Shift+]</p><p>增加缩进：Ctrl+]</p><p>减少缩进：Ctrl+[</p><p>五：格式</p><p>加粗：Ctrl+B</p><p>斜体：Ctrl+I</p><p>下划线：Ctrl+U</p><p>代码：Ctrl+Shift+`</p><p>删除线：Alt+Shift+5</p><p>超链接：Ctrl+K</p><p>图像：Ctrl+Shift+I</p><p>清除样式：Ctrl+</p><p>六：视图</p><p>显示隐藏侧边栏：Ctrl+Shift+L</p><p>大纲视图：Ctrl+Shift+1</p><p>文档列表视图：Ctrl+Shift+2</p><p>文件树视图：Ctrl+Shift+3</p><p>源代码模式：Ctrl+/</p><p>专注模式：F8</p><p>打字机模式：F9</p><p>切换全屏：F11</p><p>实际大小：Ctrl+Shift+0</p><p>放大：Ctrl+Shift+=</p><p>缩小：Ctrl+Shift+-</p><p>应用内窗口切换：Ctrl+Tab</p><p>打开DevTools：Shift+F12</p>]]></content>
      
      
      <categories>
          
          <category> base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
            <tag> Typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack-学习笔记</title>
      <link href="2020/09/03/webpack-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/09/03/webpack-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>webpack是如何打包的，怎么配置？loader的使用</p></blockquote><span id="more"></span><h3 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h3><h5 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a>全局安装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli -g</span><br></pre></td></tr></table></figure><h5 id="项目安装"><a href="#项目安装" class="headerlink" title="项目安装"></a>项目安装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure><h5 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><h5 id="项目中的webpack执行打包-npx"><a href="#项目中的webpack执行打包-npx" class="headerlink" title="项目中的webpack执行打包(npx)"></a>项目中的webpack执行打包(npx)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><h5 id="es6-导入导出规范"><a href="#es6-导入导出规范" class="headerlink" title="es6 导入导出规范"></a>es6 导入导出规范</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wang = <span class="built_in">require</span>(<span class="string">&#x27;./wang.js&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="commonJS（cmd）导入导出规范"><a href="#commonJS（cmd）导入导出规范" class="headerlink" title="commonJS（cmd）导入导出规范"></a>commonJS（cmd）导入导出规范</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wang <span class="keyword">from</span> <span class="string">&#x27;./wang.js&#x27;</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;&#125; <span class="comment">// 暴露对象</span></span><br></pre></td></tr></table></figure><h5 id="四个核心概念："><a href="#四个核心概念：" class="headerlink" title="四个核心概念："></a>四个<strong>核心概念</strong>：</h5><ul><li>入口(entry)：程序的入口 就是你想要打包的目录</li><li>输出(output)：打包后的文件位置</li><li>loader：对于你想要打包的文件进行转换的配置</li><li>插件(plugins)：解决loader无法实现的事情</li></ul><p>新建文件<strong>webpack.config.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">&#x27;./src/index.js&#x27;</span>, <span class="comment">//打包的入口</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>), <span class="comment">//输出路径</span></span><br><span class="line">    filename: <span class="string">&#x27;bundle.js&#x27;</span> <span class="comment">//打包的文件</span></span><br><span class="line">  &#125;</span><br><span class="line">     mode: <span class="string">&#x27;production&#x27;</span> <span class="comment">// 打包模式为生产 或者development开发模式</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="dirname-当前路径"><a href="#dirname-当前路径" class="headerlink" title="__dirname  当前路径"></a>__dirname  当前路径</h5><p>path.resolve(__dirname, ‘dist’) 解析当前路径的绝对路径</p><p>path.join(__dirname, ‘dist’) 拼接当前路径的绝对路径</p><p>指定使用哪个文件进行打包  一个开发模式  一个生产模式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --config webpack.custom.config.js <span class="comment">// 执行mode为development开发模式</span></span><br></pre></td></tr></table></figure><p>快捷命令输出</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">     <span class="string">&quot;build&quot;</span>:<span class="string">&quot;webpack --config webpack.custom.config.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//执行时就快捷输入   npm run build</span></span><br></pre></td></tr></table></figure><h5 id="使用webpack-dev-server-推荐"><a href="#使用webpack-dev-server-推荐" class="headerlink" title="使用webpack-dev-server(推荐)"></a>使用webpack-dev-server(推荐)</h5><p>会开启服务器</p><p>安装 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server -D</span><br><span class="line"><span class="comment">//package.json</span></span><br><span class="line"> <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server&quot;</span></span><br></pre></td></tr></table></figure><p>自动编译完成时的地址是127.0.0.1：8080/</p><p>打包后的文件在内存中</p><h5 id="配置dev"><a href="#配置dev" class="headerlink" title="配置dev"></a>配置dev</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        open: <span class="literal">true</span>, <span class="comment">//自动打开</span></span><br><span class="line">        port: <span class="number">3000</span>, <span class="comment">//端口号</span></span><br><span class="line">        <span class="comment">// compress: true, //是否压缩</span></span><br><span class="line">        <span class="comment">// contentBase: &#x27;./src&#x27;, //指定路径</span></span><br><span class="line">        hot: <span class="literal">true</span>, <span class="comment">// 开启热更替，便于代码更新，快速补充，不需要再次打包生成</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="html-webpack-plugin插件-把html打包—服务器使用"><a href="#html-webpack-plugin插件-把html打包—服务器使用" class="headerlink" title="html-webpack-plugin插件(把html打包—服务器使用)"></a>html-webpack-plugin插件(把html打包—服务器使用)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure><h5 id="html-webpack-plugin插件使用"><a href="#html-webpack-plugin插件使用" class="headerlink" title="html-webpack-plugin插件使用"></a>html-webpack-plugin插件使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">            template: <span class="string">&quot;./src/index.html&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>会自动引入js文件</p><h3 id="loader使用"><a href="#loader使用" class="headerlink" title="loader使用"></a>loader使用</h3><h4 id="处理css文件"><a href="#处理css文件" class="headerlink" title="处理css文件"></a>处理css文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装</span></span><br><span class="line">npm i css-loader style-loader -D</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">//模块</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">         <span class="comment">// webpack解析文件是从右到左</span></span><br><span class="line">        test: <span class="regexp">/\.css$/i</span>,<span class="comment">//正则匹配.css文件</span></span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>], <span class="comment">// csss-loader 解析css文件 style-loader 将解析的文件放入html文件中  </span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="处理less和sass"><a href="#处理less和sass" class="headerlink" title="处理less和sass"></a>处理less和sass</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装</span></span><br><span class="line">npm i less less-loader sass-loader node-sass -D</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line"> &#123; <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, use: [<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>,], &#125;,</span><br><span class="line"> &#123;<span class="attr">test</span>: <span class="regexp">/\.s[ac]ss$/i</span>,use: [<span class="string">&#x27;style-loader&#x27;</span>,<span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>,],&#125;,</span><br></pre></td></tr></table></figure><h4 id="处理img（图片）和-字体图标"><a href="#处理img（图片）和-字体图标" class="headerlink" title="处理img（图片）和 字体图标"></a>处理img（图片）和 字体图标</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装</span></span><br><span class="line">npm i file-loader -D</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line">&#123;<span class="attr">test</span>: <span class="regexp">/\.(png|jpeg|gif|bmp|jpg)$/</span>,use: <span class="string">&quot;file-loader&quot;</span>&#125;,</span><br></pre></td></tr></table></figure><h4 id="处理字体图标"><a href="#处理字体图标" class="headerlink" title="处理字体图标"></a>处理字体图标</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|svg|ttf)$/</span>,use: <span class="string">&quot;file-loader&quot;</span>&#125;,</span><br></pre></td></tr></table></figure><h4 id="处理图片的其他高级功能（url-loader）"><a href="#处理图片的其他高级功能（url-loader）" class="headerlink" title="处理图片的其他高级功能（url-loader）"></a>处理图片的其他高级功能（url-loader）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基于file-loader安装</span></span><br><span class="line">npm i url-loader -D</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line">&#123;<span class="attr">test</span>: <span class="regexp">/\.(png|jpeg|gif|bmp|jpg)$/</span>,use: &#123;<span class="attr">loader</span>:<span class="string">&#x27;url-loader&#x27;</span>,<span class="attr">options</span>:&#123;</span><br><span class="line">    limit:<span class="number">5</span>*<span class="number">1024</span>, <span class="comment">//如果图片小于5kb大小就转换为base64格式</span></span><br><span class="line">    outputPath:<span class="string">&#x27;images&#x27;</span>, <span class="comment">//打包的路径</span></span><br><span class="line">    name:<span class="string">&#x27;[name]-[hash:8].[ext]&#x27;</span>, <span class="comment">//原图片的名字.尾缀名  [hash:数字]=&gt;哈希名字  ：后保留几位</span></span><br><span class="line">&#125;&#125;&#125;,</span><br></pre></td></tr></table></figure><h4 id="处理babel（兼容js）"><a href="#处理babel（兼容js）" class="headerlink" title="处理babel（兼容js）"></a>处理babel（兼容js）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装  @babel/core核心   @babel/preset-env 预设语法包</span></span><br><span class="line">npm install babel-loader @babel/core @babel/preset-env webpack -D</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line">&#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">     <span class="comment">// exclude: /(node_modules|bower_components)/,</span></span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [<span class="string">&#x27;@babel/preset-env&#x27;</span>], <span class="comment">//语法预设</span></span><br><span class="line">          plugins: [<span class="string">&#x27;@babel/plugin-proposal-class-properties&#x27;</span>] <span class="comment">//语法的插件，想要哪个就下载哪个</span></span><br><span class="line">        &#125;</span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>   <span class="comment">//匹配正则忽略这个文件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="处理generator函数"><a href="#处理generator函数" class="headerlink" title="处理generator函数"></a>处理generator函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @babel/plugin-transform-runtime</span><br><span class="line">npm install --save @babel/runtime</span><br><span class="line"><span class="comment">//配置</span></span><br><span class="line">&#123;<span class="string">&quot;plugins&quot;</span>: [<span class="string">&quot;@babel/plugin-transform-async-to-generator&quot;</span>]&#125;,</span><br></pre></td></tr></table></figure><h3 id="babelrc"><a href="#babelrc" class="headerlink" title="babelrc"></a>babelrc</h3><p>分配好具体的配置在哪</p>]]></content>
      
      
      <categories>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql常用指令</title>
      <link href="2020/09/01/sql-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>2020/09/01/sql-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>sql记录常用的sql查询语句</p></blockquote><span id="more"></span><h1 id="常用sql命令"><a href="#常用sql命令" class="headerlink" title="常用sql命令"></a>常用sql命令</h1><h2 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 需要连接这个数据库表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;数据表名&#x27;</span>; <span class="comment">--查询整个表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;book&#x27;</span> <span class="keyword">WHERE</span> book.id <span class="operator">=</span> <span class="number">1</span>; <span class="comment">--查询book表且根据id查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- INNER JOIN是全连接</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> book <span class="keyword">INNER</span> <span class="keyword">JOIN</span> other; <span class="comment">--book表和other表关联在一起（重复N*N）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> book <span class="keyword">INNER</span> <span class="keyword">JOIN</span> other <span class="keyword">ON</span> book.id <span class="operator">=</span> other.id; <span class="comment">--ON id相等关联在一起</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 模糊查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> book <span class="keyword">where</span> name <span class="keyword">like</span>; <span class="string">&#x27;%王%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- LEFT JOIN是左连接</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> book <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> other <span class="keyword">ON</span> book.id <span class="operator">=</span> other.id; <span class="comment">--左表的保留，匹配右表数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- RIGHT JOIN是左连接</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> book <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> other <span class="keyword">ON</span> book.id <span class="operator">=</span> other.id; <span class="comment">--右表的保留，匹配左表数据</span></span><br></pre></td></tr></table></figure><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm常用指令</title>
      <link href="2020/07/20/npm-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>2020/07/20/npm-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>常用npm命令，淘宝镜像地址</p></blockquote><span id="more"></span><h1 id="常用npm命令"><a href="#常用npm命令" class="headerlink" title="常用npm命令"></a>常用npm命令</h1><h3 id="修改版本"><a href="#修改版本" class="headerlink" title="修改版本"></a>修改版本</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">比如我想来个<span class="number">1.0</span><span class="number">.1</span>版本，注意，是最后一位修改了增<span class="number">1</span>，那么命令：npm version patch 回车就可以了；</span><br><span class="line">比如我想来个<span class="number">1.1</span><span class="number">.0</span>版本，注意，是第二位修改了增<span class="number">1</span>，那么命令： npm version minor 回车就可以了；</span><br><span class="line">比如我想来个<span class="number">2.0</span><span class="number">.0</span>版本，注意，是第一位修改了增<span class="number">1</span>，那么命令： npm version major 回车就可以了；</span><br></pre></td></tr></table></figure><h3 id="淘宝镜像"><a href="#淘宝镜像" class="headerlink" title="淘宝镜像"></a>淘宝镜像</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> npm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm踩坑日记</title>
      <link href="2020/07/20/npm-%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/"/>
      <url>2020/07/20/npm-%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>npm安装速度太慢了？怎么办？</p></blockquote><span id="more"></span><h2 id="注意npm还是cnpm"><a href="#注意npm还是cnpm" class="headerlink" title="注意npm还是cnpm"></a>注意npm还是cnpm</h2><h4 id="npm注册源的更换"><a href="#npm注册源的更换" class="headerlink" title="npm注册源的更换"></a>npm注册源的更换</h4><blockquote><p>修改源地址为淘宝 NPM 镜像</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http:<span class="comment">//registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure><blockquote><p>修改源地址为官方源</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https:<span class="comment">//registry.npmjs.org/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> npm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node-api学习笔记</title>
      <link href="2020/06/11/node-api%E5%AD%A6%E4%B9%A0/"/>
      <url>2020/06/11/node-api%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录node的API使用</p></blockquote><span id="more"></span><h2 id="fs-文件系统"><a href="#fs-文件系统" class="headerlink" title="fs-文件系统"></a>fs-文件系统</h2><blockquote><p>打开文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.open(path, flags[, mode], callback)</span><br></pre></td></tr></table></figure><p>flags 参数可以是以下值：</p><table><thead><tr><th align="left">Flag</th><th align="center">描述</th></tr></thead><tbody><tr><td align="left">r</td><td align="center">以读取模式打开文件。如果文件不存在抛出异常。</td></tr><tr><td align="left">r+</td><td align="center">以读写模式打开文件。如果文件不存在抛出异常。</td></tr><tr><td align="left">rs</td><td align="center">以同步的方式读取文件。</td></tr><tr><td align="left">rs+</td><td align="center">以同步的方式读取和写入文件。</td></tr><tr><td align="left">w</td><td align="center">以写入模式打开文件，如果文件不存在则创建。</td></tr><tr><td align="left">wx</td><td align="center">类似 ‘w’，但是如果文件路径存在，则文件写入失败。</td></tr><tr><td align="left">w+</td><td align="center">以读写模式打开文件，如果文件不存在则创建。</td></tr><tr><td align="left">wx+</td><td align="center">类似 ‘w+’， 但是如果文件路径存在，则文件读写失败。</td></tr><tr><td align="left">a</td><td align="center">以追加模式打开文件，如果文件不存在则创建。</td></tr><tr><td align="left">ax</td><td align="center">类似 ‘a’， 但是如果文件路径存在，则文件追加失败。</td></tr><tr><td align="left">a+</td><td align="center">以读取追加模式打开文件，如果文件不存在则创建。</td></tr><tr><td align="left">ax+</td><td align="center">类似 ‘a+’， 但是如果文件路径存在，则文件读取追加失败。</td></tr></tbody></table><blockquote><p>fs.stat 获取文件信息</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fs.stat(&#39;routers&#39;, (err, stats) &#x3D;&gt; &#123;</span><br><span class="line">    if(err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(stats.isFile());</span><br><span class="line">    console.log(stats.isDirectory());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>stats类中的方法有：</p><table><thead><tr><th align="left">方法</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">stats.isFile()</td><td align="left">如果是文件返回 true，否则返回 false。</td></tr><tr><td align="left">stats.isDirectory()</td><td align="left">如果是目录返回 true，否则返回 false。</td></tr><tr><td align="left">stats.isBlockDevice()</td><td align="left">如果是块设备返回 true，否则返回 false。</td></tr><tr><td align="left">stats.isCharacterDevice()</td><td align="left">如果是字符设备返回 true，否则返回 false。</td></tr><tr><td align="left">stats.isSymbolicLink()</td><td align="left">如果是软链接返回 true，否则返回 false。</td></tr><tr><td align="left">stats.isFIFO()</td><td align="left">如果是FIFO，返回true，否则返回 false。FIFO是UNIX中的一种特殊类型的命令管道。</td></tr><tr><td align="left">stats.isSocket()</td><td align="left">如果是 Socket 返回 true，否则返回 false。</td></tr></tbody></table><blockquote><p>fs.mkdir 创建目录</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.mkdir(&#39;css&#39;, (err)&#x3D;&gt; &#123;</span><br><span class="line">    if (err) throw err;</span><br><span class="line">    console.log(&#39;创建成功11&#39;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>fs.writeFile 创建写入文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(&#39;t.txt&#39;, &#39;hell world&#39;, (err) &#x3D;&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#39;写入成功&#39;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>fs.appendFile 追加文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.appendFile(&#39;.&#x2F;1.txt&#39;,Date.now()+&#39;\n&#39;,function()&#123;</span><br><span class="line">  console.log(&#39;ok&#39;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>fs.readFile 读取文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var fs &#x3D; require(&quot;fs&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 异步读取</span><br><span class="line">fs.readFile(&#39;input.txt&#39;, function (err, data) &#123;</span><br><span class="line">   if (err) &#123;</span><br><span class="line">       return console.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   console.log(&quot;异步读取: &quot; + data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 同步读取</span><br><span class="line">var data &#x3D; fs.readFileSync(&#39;input.txt&#39;);</span><br><span class="line">console.log(&quot;同步读取: &quot; + data.toString());</span><br><span class="line"></span><br><span class="line">console.log(&quot;程序执行完毕。&quot;);</span><br></pre></td></tr></table></figure><blockquote><p>fs.readdir 读取目录</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readdir(path[, options], callback)</span><br></pre></td></tr></table></figure><blockquote><p>fs.rename 重命名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.rename(&#39;html&#x2F;style.css&#39;, &#39;html.css&#x2F;base.css&#39;, (err)&#x3D;&gt;&#123;</span><br><span class="line">    if(err) throww err;</span><br><span class="line">    console.log(&#39;移动成功&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>fs.rmdir 删除目录</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>fs.unlink 删除文件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.unlink(path, callback)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>请注意前方有坑</title>
      <link href="2020/06/01/all-%E8%AF%B7%E6%B3%A8%E6%84%8F%E5%89%8D%E6%96%B9%E6%9C%89%E5%9D%91/"/>
      <url>2020/06/01/all-%E8%AF%B7%E6%B3%A8%E6%84%8F%E5%89%8D%E6%96%B9%E6%9C%89%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p>js逻辑上小概率会出现反人类的逻辑</p></blockquote><span id="more"></span><h2 id="火狐浏览器对于某些时间格式在new-Date时会Invalid-Date"><a href="#火狐浏览器对于某些时间格式在new-Date时会Invalid-Date" class="headerlink" title="火狐浏览器对于某些时间格式在new Date时会Invalid Date"></a>火狐浏览器对于某些时间格式在new Date时会Invalid Date</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021/11/08 00:00:00&#x27;</span>) <span class="comment">//正常</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021-11-08 00:00:00&#x27;</span>)  <span class="comment">//正常</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021/11/08 00:00:00.0&#x27;</span>) <span class="comment">//Invalid Date</span></span><br></pre></td></tr></table></figure><h2 id="IE浏览器出现"><a href="#IE浏览器出现" class="headerlink" title="IE浏览器出现"></a>IE浏览器出现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021-11-08 00:00:00&#x27;</span>) <span class="comment">//Invalid Date</span></span><br></pre></td></tr></table></figure><h2 id="自己手动配置方法转换"><a href="#自己手动配置方法转换" class="headerlink" title="自己手动配置方法转换"></a>自己手动配置方法转换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* JSON Date 转日期 */</span></span><br><span class="line">  <span class="function"><span class="title">jsonDate</span>(<span class="params">jsonDate</span>)</span> &#123;</span><br><span class="line">    jsonDate = jsonDate.slice(<span class="number">0</span>,<span class="number">19</span>).replace(<span class="regexp">/-/g</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (jsonDate.indexOf(<span class="string">&#x27;T&#x27;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> strDate = jsonDate</span><br><span class="line">        .replace(<span class="regexp">/T/g</span>, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        .replace(<span class="regexp">/-/g</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        .replace(<span class="regexp">/\.[\w+]*/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(strDate);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(jsonDate);</span><br><span class="line">      <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="axios请求总是跨域怎么办？"><a href="#axios请求总是跨域怎么办？" class="headerlink" title="axios请求总是跨域怎么办？"></a>axios请求总是跨域怎么办？</h2><blockquote><p>contentType: ‘application/json’ 是变成了非简单请求， 跨域配置已做，但还是报403 ，是因为网关拦截了浏览器的options请求</p><p>这个是复杂请求，后端没有对这个header做跨域配置，就会被浏览器认为是跨域。</p><p>**withCredentials:**默认情况下，跨源请求不提供凭据(cookie、HTTP认证及客户端SSL证明等)。通过将withCredentials属性设置为true，可以指定某个请求应该发送凭据。</p><ul><li>默认值为false。</li><li>true：在跨域请求时，会携带用户凭证</li><li>false：在跨域请求时，不会携带用户凭证；返回的 response 里也会忽略 cookie</li></ul><p>当配置了<code> withCredentials = true</code>时，必须在后端增加 response 头信息Access-Control-Allow-Origin，且必须指定域名，而不能指定为*！！！</p><p>这是最近遇到的问题，后端需要带cookie过去，而前端没有设置为true，所以导致cookie没有传过去，后来发现是没有设置为true</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用axios库时</span></span><br><span class="line"><span class="comment">// 是否允许跨域(此参数会导致get请求跨域)</span></span><br><span class="line"> axios.defaults.withCredentials = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//post请求请注意请求头的Content-Type</span></span><br><span class="line"><span class="comment">//使用axios跨域发送请求，同时post发送的数据格式是json格式,返回的信息提示是跨域的问题,但后台已说明已解除跨域</span></span><br><span class="line"><span class="comment">//解决办法</span></span><br><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="comment">//设置config.headers[&#x27;Content-Type&#x27;] = &#x27;text/plain&#x27;</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">data:<span class="built_in">JSON</span>.stringify(data)</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line">axios.post(url,&#123; <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,<span class="attr">data</span>: qs.stringify(data)&#125;)</span><br></pre></td></tr></table></figure><h2 id="队友不配合存储不一致localStorage"><a href="#队友不配合存储不一致localStorage" class="headerlink" title="队友不配合存储不一致localStorage"></a>队友不配合存储不一致localStorage</h2><blockquote><p>存储localStorage时，应该保证每次存储的值都是JSON.stringify过的值，每次取出都应该JSON.parse</p><p>可设置单独的utils函数专门保存存取方法的统一</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">localStorage</span>.setItem(<span class="string">&quot;token&quot;</span>,<span class="string">&quot;wang&quot;</span>)</span><br><span class="line"><span class="built_in">localStorage</span>.getItem(<span class="string">&quot;token&quot;</span>) <span class="comment">//=》&quot;wang&quot;</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&quot;token&quot;</span>))</span><br><span class="line"><span class="comment">//error  Uncaught SyntaxError: Unexpected token w in JSON at position 0</span></span><br></pre></td></tr></table></figure><h2 id="Math-round（四舍五入）（负数）"><a href="#Math-round（四舍五入）（负数）" class="headerlink" title="Math.round（四舍五入）（负数）"></a>Math.round（四舍五入）（负数）</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.round(<span class="number">1.2</span>) <span class="comment">//-&gt;1</span></span><br><span class="line"><span class="built_in">Math</span>.round(<span class="number">1.8</span>) <span class="comment">//-&gt;2</span></span><br><span class="line"><span class="built_in">Math</span>.round(<span class="number">0</span>) <span class="comment">//-&gt;0</span></span><br><span class="line"><span class="built_in">Math</span>.round(-<span class="number">1.2</span>) <span class="comment">//-&gt;-1</span></span><br><span class="line"><span class="built_in">Math</span>.round(-<span class="number">1.5</span>) <span class="comment">//-&gt;-1(奇怪)</span></span><br><span class="line"><span class="built_in">Math</span>.round(-<span class="number">1.8</span>) <span class="comment">//-&gt;-2</span></span><br><span class="line"><span class="built_in">Math</span>.round(x)等同于：<span class="built_in">Math</span>.floor(x + <span class="number">0.5</span>) floor向下取整 负数越大越小</span><br></pre></td></tr></table></figure><h2 id="别忽略parseInt的第二个参数"><a href="#别忽略parseInt的第二个参数" class="headerlink" title="别忽略parseInt的第二个参数"></a>别忽略parseInt的第二个参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>].map(<span class="built_in">parseInt</span>); <span class="comment">//-&gt;[1, NaN, NaN]</span></span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>].map(<span class="function"><span class="params">v</span>=&gt;</span><span class="built_in">parseInt</span>(v)); <span class="comment">//-&gt;[1, 2, 3]</span></span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>].map(<span class="function">(<span class="params">v,i</span>)=&gt;</span><span class="built_in">parseInt</span>(v,i)); <span class="comment">//-&gt;[1, NaN, NaN]</span></span><br></pre></td></tr></table></figure><p><img src="https://wang-z.gitee.io/img/parseInt.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/parseInt.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="parseInt"></p><h2 id="不要相信浏览器的打印"><a href="#不要相信浏览器的打印" class="headerlink" title="不要相信浏览器的打印"></a>不要相信浏览器的打印</h2><blockquote><p>某天，后台返回一个数据id：576460752305053383</p></blockquote><p>当我在控制台console.log(id)看这个数据的时候，打印出576460752305053300,结果却不是我想要的。。。</p><p>由于后端long数据类型转化为js的数字类型时，超出17位事，会自动将超出部分转化为0</p><p>解决方法：数字类型转化为字符串</p><h2 id="骚操作-如何一句话让你页面可编辑"><a href="#骚操作-如何一句话让你页面可编辑" class="headerlink" title="骚操作-如何一句话让你页面可编辑"></a>骚操作-如何一句话让你页面可编辑</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.contentEditable=<span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="windows和mac换行符不一样的原因导致很多警告"><a href="#windows和mac换行符不一样的原因导致很多警告" class="headerlink" title="windows和mac换行符不一样的原因导致很多警告"></a>windows和mac换行符不一样的原因导致很多警告</h2><p>git的问题，默认情况下，Windows上pull的时候会自动把LF转换成CRLF，然后push 的时候CRLF会转会LF，所以要么关闭git的这个自动转换，要么prettier改一下换行符的配置</p><p>执行了git config –global core.autocrlf false命令，重新clone项目</p><h2 id="fetch请求本地json"><a href="#fetch请求本地json" class="headerlink" title="fetch请求本地json"></a>fetch请求本地json</h2><blockquote><p>请求本地json 需要进行res.json 会返回一个promise 在then后返回就是数据</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;./bar.json&quot;</span>)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> res.json())</span><br><span class="line">        .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(data);</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h1 id="谷歌浏览器保留页面跳转前的请求"><a href="#谷歌浏览器保留页面跳转前的请求" class="headerlink" title="谷歌浏览器保留页面跳转前的请求"></a>谷歌浏览器保留页面跳转前的请求</h1><p>开发中往往会遇到这样的情况，调试一个请求，但是请求中有报错的跳转，结果一刷新页面就自动跳转了，也看不到请求报错，这个时候只要勾选上preserver log即可</p><h2 id="new-Date（time）"><a href="#new-Date（time）" class="headerlink" title="new Date（time）"></a>new Date（time）</h2><blockquote><p>当你想获取当前时间的时候</p><p>世界时间UTC</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021-03-05&#x27;</span>)  <span class="comment">//Fri Mar 05 2021 08:00:00 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021-03-05&#x27;</span>).getTime() <span class="comment">//1614902400000 //UTC+8:00</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021-3-05&#x27;</span>).getTime()  <span class="comment">//1614873600000 //UTC</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021/03/05&#x27;</span>).getTime() <span class="comment">//1614873600000 //UTC</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2021/3/5&#x27;</span>).getTime()   <span class="comment">//1614873600000 //UTC</span></span><br></pre></td></tr></table></figure><h2 id="Axios请求库封装问题"><a href="#Axios请求库封装问题" class="headerlink" title="Axios请求库封装问题"></a>Axios请求库封装问题</h2><blockquote><p>当我们使用axios.create创建的axios实例在使用普通的get<code>、</code>post<code>、</code>put时没问题，但是如果你使用<code>all</code>、<code>spread</code>、<code>Cancel</code>、<code>CancelToken</code>、<code>isCancel</code>方法，将会告诉你，方法不存在。</p></blockquote><blockquote><p>如果要使用all，spread，请直接引入axios进行使用</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js实用方法-字符串与日期</title>
      <link href="2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%97%A5%E6%9C%9F/"/>
      <url>2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%97%A5%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录开发中的字符串与日期处理的方法</p></blockquote><span id="more"></span><h2 id="技巧及有趣的方法"><a href="#技巧及有趣的方法" class="headerlink" title="技巧及有趣的方法"></a>技巧及有趣的方法</h2><h2 id="操作Date"><a href="#操作Date" class="headerlink" title="操作Date"></a>操作Date</h2><h3 id="检查日期是否有效"><a href="#检查日期是否有效" class="headerlink" title="检查日期是否有效"></a>检查日期是否有效</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isDateValid = <span class="function">(<span class="params">...val</span>) =&gt;</span> !<span class="built_in">Number</span>.isNaN(<span class="keyword">new</span> <span class="built_in">Date</span>(...val).valueOf());</span><br><span class="line">isDateValid(<span class="string">&quot;December 17, 1995 03:24:00&quot;</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="计算两个日期之间的间隔"><a href="#计算两个日期之间的间隔" class="headerlink" title="计算两个日期之间的间隔"></a>计算两个日期之间的间隔</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dayDif = <span class="function">(<span class="params">date1, date2</span>) =&gt;</span> <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.abs(date1.getTime() - date2.getTime()) / <span class="number">86400000</span>)    </span><br><span class="line">dayDif(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;2021-11-3&quot;</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;2022-2-1&quot;</span>))  <span class="comment">// 90</span></span><br></pre></td></tr></table></figure><p>距离过年还有90天~</p><h3 id="查找日期位于一年中的第几天"><a href="#查找日期位于一年中的第几天" class="headerlink" title="查找日期位于一年中的第几天"></a>查找日期位于一年中的第几天</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dayOfYear = <span class="function">(<span class="params">date</span>) =&gt;</span> <span class="built_in">Math</span>.floor((date - <span class="keyword">new</span> <span class="built_in">Date</span>(date.getFullYear(), <span class="number">0</span>, <span class="number">0</span>)) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line">dayOfYear(<span class="keyword">new</span> <span class="built_in">Date</span>());   <span class="comment">// 307</span></span><br></pre></td></tr></table></figure><p>2021年已经过去300多天了~</p><h3 id="时间格式化"><a href="#时间格式化" class="headerlink" title="时间格式化"></a>时间格式化</h3><h4 id="时间转化为hour-minutes-seconds的格式"><a href="#时间转化为hour-minutes-seconds的格式" class="headerlink" title="时间转化为hour:minutes:seconds的格式"></a>时间转化为hour:minutes:seconds的格式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeFromDate = <span class="function"><span class="params">date</span> =&gt;</span> date.toTimeString().slice(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">    </span><br><span class="line">timeFromDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2021</span>, <span class="number">11</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">30</span>, <span class="number">0</span>));  <span class="comment">// 12:30:00</span></span><br><span class="line">timeFromDate(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// 返回当前时间 09:00:00</span></span><br></pre></td></tr></table></figure><h3 id="js判断"><a href="#js判断" class="headerlink" title="js判断"></a>js判断</h3><blockquote><p>instanceof运算符用来判断一个构造函数的prototype属性所指向的对象是否存在另外一个要检测对象的原型链上</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Router  = <span class="built_in">require</span>(<span class="string">&#x27;Koa-router&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span>(router <span class="keyword">instanceof</span> Router) <span class="comment">//判断router是否基于Router(在Router原型链上)</span></span><br></pre></td></tr></table></figure><h3 id="提供-function-给外部调用"><a href="#提供-function-给外部调用" class="headerlink" title="提供 function 给外部调用"></a>提供 function 给外部调用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.init = <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">configs</span>) </span>&#123;</span><br><span class="line">  Vue.prototype.configs = configs;</span><br><span class="line">  <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    render: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">  &#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">init();</span><br><span class="line"><span class="comment">//调用这个html即可在window上获取这个函数且可以调用</span></span><br><span class="line"><span class="comment">//可用于原生安卓传递参数给Vue页面或控制Vue页面的渲染</span></span><br></pre></td></tr></table></figure><h3 id="调试骚技巧"><a href="#调试骚技巧" class="headerlink" title="调试骚技巧"></a>调试骚技巧</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vue文件中，将this绑定在window对象上，浏览器控制台即可直接打印vue为当前this的实例，在哪个组件上定义就在哪个组件上的this实例，在main.js中则是初始实例new Vue()</span></span><br><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.vue = <span class="built_in">this</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//在html文件中则是直接赋值</span></span><br><span class="line"><span class="built_in">window</span>.wang = <span class="string">&quot;wang&quot;</span></span><br><span class="line"><span class="comment">//我们在使用window.location.href切换链接，实则在调用浏览器的browser的api-&gt;浏览器对象模型</span></span><br></pre></td></tr></table></figure><p><img src="https://wang-z.gitee.io/img/window-location.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/window-location.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="window-location"></p><h3 id="简化事件赋值写法"><a href="#简化事件赋值写法" class="headerlink" title="简化事件赋值写法"></a>简化事件赋值写法</h3><blockquote><p>对于某些事件只需简单的赋值可不写 methods，多个赋值可使用逗号 <strong>，</strong></p><p>$event子组件返回数据使用$event</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@click=<span class="string">&quot;id=item.id,display=true&quot;</span></span><br><span class="line">@input=<span class="string">&quot;time=$event&quot;</span></span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">       id:<span class="number">0</span>,</span><br><span class="line">       display:<span class="literal">false</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="时间戳转换"><a href="#时间戳转换" class="headerlink" title="时间戳转换"></a>时间戳转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">timeStamp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(timeStamp);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear()&#125;</span>-<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">    <span class="keyword">new</span> <span class="built_in">Date</span>().getMonth() + <span class="number">1</span></span></span></span><br><span class="line"><span class="string"><span class="subst">  &#125;</span>-<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getDate()&#125;</span> <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getHours()&#125;</span>:<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getMinutes()&#125;</span>:<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getSeconds()&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="常见new-Date"><a href="#常见new-Date" class="headerlink" title="常见new Date()"></a>常见new Date()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().setTime(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)<span class="comment">//前一天时间</span></span><br></pre></td></tr></table></figure><h3 id="查询当前-localStorage-存储大小"><a href="#查询当前-localStorage-存储大小" class="headerlink" title="查询当前 localStorage 存储大小"></a>查询当前 localStorage 存储大小</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">window</span>.localStorage) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;浏览器不支持localStorage&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> size = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (item <span class="keyword">in</span> <span class="built_in">window</span>.localStorage) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.localStorage.hasOwnProperty(item)) &#123;</span><br><span class="line">      size += <span class="built_in">window</span>.localStorage.getItem(item).length;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;当前localStorage剩余容量为&quot;</span> + (size / <span class="number">1024</span>).toFixed(<span class="number">2</span>) + <span class="string">&quot;KB&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="什么是-IIFE-立即调用的函数表达式"><a href="#什么是-IIFE-立即调用的函数表达式" class="headerlink" title="什么是 IIFE (立即调用的函数表达式)"></a>什么是 IIFE (立即调用的函数表达式)</h3><p><code>IIFE</code>是一个立即调用的函数表达式，它在创建后立即执行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">IIFE</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// &quot;Hello!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="点击回到顶部的-js"><a href="#点击回到顶部的-js" class="headerlink" title="点击回到顶部的 js"></a>点击回到顶部的 js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Gotop.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//判断是否有无定时器</span></span><br><span class="line">  <span class="keyword">if</span> (c) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(c);</span><br><span class="line">  &#125;</span><br><span class="line">  c = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target = <span class="number">0</span>; <span class="comment">//顶部的距离</span></span><br><span class="line">    <span class="keyword">var</span> step = <span class="number">10</span>; <span class="comment">//每次滚动的距离</span></span><br><span class="line">    <span class="keyword">var</span> curent = getScroll().scrollTop; <span class="comment">//滚动出去的距离</span></span><br><span class="line">    <span class="comment">//判定有没有滚动</span></span><br><span class="line">    <span class="keyword">if</span> (curent &gt; target) &#123;</span><br><span class="line">      step = -<span class="built_in">Math</span>.abs(step);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使页面开始一直往上滚</span></span><br><span class="line">    curent += step;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.scrollTop = curent;</span><br><span class="line">    <span class="built_in">document</span>.body.scrollTop = curent;</span><br><span class="line">    <span class="comment">//判断最后页面是不是到了最开始的位置</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(curent) &lt;= target) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(c);</span><br><span class="line">      <span class="built_in">document</span>.documentElement.scrollTop = target;</span><br><span class="line">      <span class="built_in">document</span>.body.scrollTop = target;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 获取页面滚动出去的距离，处理兼容性</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    scrollTop: <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop,</span><br><span class="line">    scrpllLeft: <span class="built_in">document</span>.documentElement.scrpllLeft || <span class="built_in">document</span>.body.scrollLeft,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生成随机字符串-可指定长度"><a href="#生成随机字符串-可指定长度" class="headerlink" title="生成随机字符串 (可指定长度)"></a>生成随机字符串 (可指定长度)</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 生成随机字符串(可指定长度)</span><br><span class="line"> * @param len</span><br><span class="line"> * @returns &#123;string&#125;</span><br><span class="line"> */</span><br><span class="line">randomString = function(len) &#123;</span><br><span class="line">  len = len || 8;</span><br><span class="line">  var $chars = &#x27;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&#x27;;</span><br><span class="line">  /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/</span><br><span class="line">  var maxPos = $chars.length;</span><br><span class="line">  var pwd = &#x27;&#x27;;</span><br><span class="line">  for (var i = 0; i &lt; len; i++) &#123;</span><br><span class="line">    pwd += $chars.charAt(Math.floor(Math.random() * maxPos));</span><br><span class="line">  &#125;</span><br><span class="line">  return pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生成随机颜色值"><a href="#生成随机颜色值" class="headerlink" title="生成随机颜色值"></a>生成随机颜色值</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function getRandomColor () &#123;</span><br><span class="line">  const rgb = []</span><br><span class="line">  for (let i = 0 ; i &lt; 3; ++i)&#123;</span><br><span class="line">    let color = Math.floor(Math.random() * 256).toString(16)</span><br><span class="line">    color = color.length == 1 ? &#x27;0&#x27; + color : color</span><br><span class="line">    rgb.push(color)</span><br><span class="line">  &#125;</span><br><span class="line">  return &#x27;#&#x27; + rgb.join(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="city-json-城市-JSON-数据处理为级联组件适用的结构"><a href="#city-json-城市-JSON-数据处理为级联组件适用的结构" class="headerlink" title="city.json 城市 JSON 数据处理为级联组件适用的结构"></a>city.json 城市 JSON 数据处理为级联组件适用的结构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(City).forEach(<span class="function">(<span class="params">city</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (City[city].level === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> tempArr = [];</span><br><span class="line">    City[city].children.map(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">      tempArr.push(&#123; <span class="attr">id</span>: City[v].id, <span class="attr">name</span>: City[v].name &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    tempCity.push(&#123;</span><br><span class="line">      id: City[city].id,</span><br><span class="line">      name: City[city].name,</span><br><span class="line">      children: tempArr,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="计算指定数字的阶乘"><a href="#计算指定数字的阶乘" class="headerlink" title="计算指定数字的阶乘"></a>计算指定数字的阶乘</h3><blockquote><p>利用递归调用来进行数字的阶乘</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorialOfNumber = <span class="function">(<span class="params">number</span>) =&gt;</span></span><br><span class="line">  number &lt; <span class="number">0</span></span><br><span class="line">    ? (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;请输入正整数&quot;</span>);</span><br><span class="line">      &#125;)()</span><br><span class="line">    : number &lt;= <span class="number">1</span></span><br><span class="line">    ? <span class="number">1</span></span><br><span class="line">    : number * factorialOfNumber(number - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// 事例</span></span><br><span class="line">factorialOfNumber(<span class="number">4</span>); <span class="comment">// 24</span></span><br><span class="line">factorialOfNumber(<span class="number">8</span>); <span class="comment">// 40320</span></span><br></pre></td></tr></table></figure><h3 id="字符串反转"><a href="#字符串反转" class="headerlink" title="字符串反转"></a>字符串反转</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reverseString = <span class="function">(<span class="params">string</span>) =&gt;</span> [...string].reverse().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">reverseString(<span class="number">121245</span>); <span class="comment">//=&gt; 542121</span></span><br></pre></td></tr></table></figure><h3 id="测试js代码的执行耗时-performance："><a href="#测试js代码的执行耗时-performance：" class="headerlink" title="测试js代码的执行耗时:performance："></a>测试<code>js</code>代码的执行耗时:<code>performance</code>：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> start = performance.now();</span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">  sum += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> end = performance.now();</span><br><span class="line"><span class="built_in">console</span>.log(start);</span><br><span class="line"><span class="built_in">console</span>.log(end);</span><br></pre></td></tr></table></figure><h3 id="避免多条件并列"><a href="#避免多条件并列" class="headerlink" title="避免多条件并列"></a><strong>避免多条件并列</strong></h3><blockquote><p>开发中有时会遇到多个条件，执行相同的语句，也就是多个<code>||</code>这种：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(status==<span class="number">1</span>||status==<span class="number">2</span>||status==<span class="number">3</span>)&#123;</span><br><span class="line">    doSomeThing()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span>(status)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>：</span><br><span class="line">    <span class="keyword">case</span>:<span class="number">2</span></span><br><span class="line">    <span class="keyword">case</span>:<span class="number">3</span>:</span><br><span class="line">      doSomeThing()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> enum = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">if</span> (enum.includes(status)) &#123;</span><br><span class="line">  doSomething();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="和-amp-amp"><a href="#和-amp-amp" class="headerlink" title="||和&amp;&amp;"></a>||和&amp;&amp;</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wang = type || <span class="string">&quot;wang&quot;</span>; <span class="comment">//使用在方法内传递形参给予默认值</span></span><br><span class="line">type &amp;&amp; <span class="built_in">eval</span>((wang = <span class="string">&quot;wang&quot;</span>)); <span class="comment">//简单的if判断（短路运算）如果type为true 则执行&amp;&amp;后面的语句</span></span><br></pre></td></tr></table></figure><blockquote><p>注解：&amp;&amp;后的为 function（函数），可直接执行，但如果是一些 js 逻辑却不能执行，这时可以使用 eval（）欺诈</p></blockquote><h3 id="RGB-色值生成-16-进制色值"><a href="#RGB-色值生成-16-进制色值" class="headerlink" title="RGB 色值生成 16 进制色值"></a>RGB 色值生成 16 进制色值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const rgb2Hex &#x3D; rgb &#x3D;&gt; &#123;</span><br><span class="line">    let rgbList &#x3D; rgb.toString().match(&#x2F;\d+&#x2F;g)</span><br><span class="line">    let hex &#x3D; &#39;#&#39;</span><br><span class="line">    for (let i &#x3D; 0, len &#x3D; rgbList.length; i &lt; len; ++i) &#123;</span><br><span class="line">      hex +&#x3D; (&#39;0&#39; + Number(rgbList[i]).toString(16)).slice(-2)</span><br><span class="line">    &#125;</span><br><span class="line">    return hex</span><br><span class="line">&#125;;</span><br><span class="line">rgb2Hex(&#39;100, 50, 0&#39;) &#x2F;&#x2F; &#39;#643200&#39;</span><br></pre></td></tr></table></figure><h3 id="使用-处理小数"><a href="#使用-处理小数" class="headerlink" title="使用|处理小数"></a>使用|处理小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">10.9</span> | <span class="number">0</span>); <span class="comment">//-&gt;10</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">10.9</span> | <span class="number">0</span>); <span class="comment">//-&gt;-10</span></span><br><span class="line"><span class="comment">//小数点后面的都会切除</span></span><br></pre></td></tr></table></figure><blockquote><p>字符串转为对象取值（“obj.name”=&gt;eval(obj.name)）<br>当使用某个变量作为对象的键值时，可用 obj.key<br>当变量为 name 作为键值时，可用以下方法</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> val = <span class="string">&quot;wang&quot;</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">`obj.<span class="subst">$&#123;key&#125;</span> = &#x27;<span class="subst">$&#123;val&#125;</span>&#x27;`</span>)=&gt;<span class="built_in">eval</span>(<span class="string">&quot;obj.name = &#x27;wang&#x27;&quot;</span>)<span class="comment">//=&gt;obj = &#123;name: &quot;wang&quot;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="操作字符串"><a href="#操作字符串" class="headerlink" title="操作字符串"></a>操作字符串</h2><h3 id="获取两个整数之间的随机整数"><a href="#获取两个整数之间的随机整数" class="headerlink" title="获取两个整数之间的随机整数"></a>获取两个整数之间的随机整数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> random = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</span><br><span class="line">random(<span class="number">1</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><h3 id="将RGB转化为十六机制"><a href="#将RGB转化为十六机制" class="headerlink" title="将RGB转化为十六机制"></a>将RGB转化为十六机制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rgbToHex = <span class="function">(<span class="params">r, g, b</span>) =&gt;</span> <span class="string">&quot;#&quot;</span> + ((<span class="number">1</span> &lt;&lt; <span class="number">24</span>) + (r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b).toString(<span class="number">16</span>).slice(<span class="number">1</span>);</span><br><span class="line">rgbToHex(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);  <span class="comment">// &#x27;#ffffff&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="获取随机十六进制颜色"><a href="#获取随机十六进制颜色" class="headerlink" title="获取随机十六进制颜色"></a>获取随机十六进制颜色</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomHex = <span class="function">() =&gt;</span> <span class="string">`#<span class="subst">$&#123;<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>).padEnd(<span class="number">6</span>, <span class="string">&quot;0&quot;</span>)&#125;</span>`</span>;</span><br><span class="line">randomHex();</span><br></pre></td></tr></table></figure><h3 id="获取变量的类型"><a href="#获取变量的类型" class="headerlink" title="获取变量的类型"></a>获取变量的类型</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trueTypeOf = <span class="function">(<span class="params">obj</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(obj).slice(<span class="number">8</span>, -<span class="number">1</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line">trueTypeOf(<span class="string">&#x27;&#x27;</span>);     <span class="comment">// string</span></span><br><span class="line">trueTypeOf(<span class="number">0</span>);      <span class="comment">// number</span></span><br><span class="line">trueTypeOf();       <span class="comment">// undefined</span></span><br><span class="line">trueTypeOf(<span class="literal">null</span>);   <span class="comment">// null</span></span><br><span class="line">trueTypeOf(&#123;&#125;);     <span class="comment">// object</span></span><br><span class="line">trueTypeOf([]);     <span class="comment">// array</span></span><br><span class="line">trueTypeOf(<span class="number">0</span>);      <span class="comment">// number</span></span><br><span class="line">trueTypeOf(<span class="function">() =&gt;</span> &#123;&#125;);  <span class="comment">// function</span></span><br></pre></td></tr></table></figure><h3 id="字符串首字母大写"><a href="#字符串首字母大写" class="headerlink" title="字符串首字母大写"></a>字符串首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = <span class="function"><span class="params">str</span> =&gt;</span> str.charAt(<span class="number">0</span>).toUpperCase() + str.slice(<span class="number">1</span>)</span><br><span class="line">capitalize(<span class="string">&quot;hello world&quot;</span>)  <span class="comment">// Hello world</span></span><br></pre></td></tr></table></figure><h3 id="翻转字符串"><a href="#翻转字符串" class="headerlink" title="翻转字符串"></a>翻转字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reverse = <span class="function"><span class="params">str</span> =&gt;</span> str.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">reverse(<span class="string">&#x27;hello world&#x27;</span>);   <span class="comment">// &#x27;dlrow olleh&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="随机字符串-nice"><a href="#随机字符串-nice" class="headerlink" title="随机字符串(nice)"></a>随机字符串(nice)</h3><blockquote><p>tips:利用toString转换随机数但是有限制 在数字类型会失精，最终生产的随机数只有大概13位左右（此方法含小数点在第二位）</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomString = <span class="function">() =&gt;</span> <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).slice(<span class="number">2</span>);</span><br><span class="line">randomString(); <span class="comment">//&#x27;0.31ocjp24uy&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="截断字符串为…"><a href="#截断字符串为…" class="headerlink" title="截断字符串为…"></a>截断字符串为…</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> truncateString = <span class="function">(<span class="params">string, length</span>) =&gt;</span> string.length &lt; length ? string : <span class="string">`<span class="subst">$&#123;string.slice(<span class="number">0</span>, length - <span class="number">3</span>)&#125;</span>...`</span>;</span><br><span class="line">truncateString(<span class="string">&#x27;Hi, I should be truncated because I am too loooong!&#x27;</span>, <span class="number">36</span>)   <span class="comment">// &#x27;Hi, I should be truncated because...&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="生成固定字符指定次数的字符串（N-个”XXX”）"><a href="#生成固定字符指定次数的字符串（N-个”XXX”）" class="headerlink" title="生成固定字符指定次数的字符串（N 个”XXX”）"></a>生成固定字符指定次数的字符串（N 个”XXX”）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(<span class="number">10</span>).join(<span class="number">1</span>); <span class="comment">//=&gt;&quot;1111111111&quot;</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>).join(<span class="string">&quot;a&quot;</span>); <span class="comment">//=&gt;&quot;aaa&quot;</span></span><br><span class="line"><span class="string">&quot;1&quot;</span>.repeat(<span class="number">3</span>); <span class="comment">//=&gt; &quot;111&quot;</span></span><br><span class="line"><span class="string">&quot;abc&quot;</span>.repeat(<span class="number">3</span>); <span class="comment">//=&gt; &quot;abcabcabc&quot;</span></span><br></pre></td></tr></table></figure><h3 id="生成随机-0-N-的数组"><a href="#生成随机-0-N-的数组" class="headerlink" title="生成随机 0-N 的数组"></a>生成随机 0-N 的数组</h3><blockquote><p>时间 0 点到 23 点</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...new <span class="built_in">Array</span>(<span class="number">24</span>).keys()]; <span class="comment">//=&gt;[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]</span></span><br></pre></td></tr></table></figure><h3 id="数字的修饰-每三位加一逗号"><a href="#数字的修饰-每三位加一逗号" class="headerlink" title="数字的修饰-每三位加一逗号"></a>数字的修饰-每三位加一逗号</h3><blockquote><p>12000000.11 转化为 12,000,000.11</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commafy</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    num &amp;&amp;</span><br><span class="line">    num.toString().replace(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$<span class="number">1</span>, $<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $<span class="number">2</span> + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a>字符串扩展</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> word = <span class="string">&quot;wang&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> arr = [...word]; <span class="comment">//=&gt;[&quot;w&quot;,&quot;a&quot;,&quot;n&quot;,&quot;g&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="中英文判断字符串长度一致"><a href="#中英文判断字符串长度一致" class="headerlink" title="中英文判断字符串长度一致"></a>中英文判断字符串长度一致</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> word = <span class="string">&quot;w&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> chzn = <span class="string">&quot;王&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(word.length, chzn.length); <span class="comment">// 1 2</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [...word];</span><br><span class="line"><span class="keyword">let</span> arr2 = [...chzn];</span><br><span class="line"><span class="built_in">console</span>.log(arr1.length, arr2.length); <span class="comment">// 1 1</span></span><br></pre></td></tr></table></figure><h3 id="字符串首字母大写-1"><a href="#字符串首字母大写-1" class="headerlink" title="字符串首字母大写"></a>字符串首字母大写</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> word = <span class="string">&quot;wang&quot;</span>;</span><br><span class="line"></span><br><span class="line">word = word[<span class="number">0</span>].toUpperCase() + word.substr(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(word); <span class="comment">// &quot;Wang&quot;</span></span><br></pre></td></tr></table></figure><h3 id="字符串正则匹配切割"><a href="#字符串正则匹配切割" class="headerlink" title="字符串正则匹配切割"></a>字符串正则匹配切割</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> surname = <span class="string">&quot;wang,li;zhang&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> surnameArr = surname.split(<span class="regexp">/[,;]/</span>);</span><br><span class="line"><span class="built_in">console</span>.log(surnameArr); <span class="comment">// [&quot;wang&quot;, &quot;li&quot;, &quot;zhang&quot;]</span></span><br></pre></td></tr></table></figure><h3 id="转换字节单位KB-MB-GB"><a href="#转换字节单位KB-MB-GB" class="headerlink" title="转换字节单位KB MB GB"></a>转换字节单位KB MB GB</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatbyte =  <span class="function">(<span class="params">value, type = <span class="string">&#x27;GB&#x27;</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> k = <span class="number">1024</span></span><br><span class="line">  <span class="keyword">let</span> val = <span class="built_in">Number</span>(value)</span><br><span class="line">  <span class="keyword">if</span> (val == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;0 B&#x27;</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (!value) <span class="keyword">return</span> value</span><br><span class="line">  <span class="keyword">let</span> sizes = [<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;KB&#x27;</span>, <span class="string">&#x27;MB&#x27;</span>, <span class="string">&#x27;GB&#x27;</span>, <span class="string">&#x27;TB&#x27;</span>, <span class="string">&#x27;PB&#x27;</span>, <span class="string">&#x27;EB&#x27;</span>, <span class="string">&#x27;ZB&#x27;</span>, <span class="string">&#x27;YB&#x27;</span>]</span><br><span class="line">  <span class="keyword">let</span> unit = sizes.findIndex(<span class="function"><span class="params">i</span> =&gt;</span> i == type)</span><br><span class="line">  <span class="keyword">if</span> (unit) val = val * <span class="built_in">Math</span>.pow(k, unit)</span><br><span class="line">  <span class="keyword">let</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(val) / <span class="built_in">Math</span>.log(k))</span><br><span class="line">  <span class="keyword">return</span> (val / <span class="built_in">Math</span>.pow(k, i)).toPrecision(<span class="number">4</span>) + <span class="string">&#x27;&#x27;</span> + sizes[i]</span><br><span class="line">&#125;</span><br><span class="line">formatbyte(<span class="number">10000</span>) =&gt; <span class="string">&#x27;9.766TB&#x27;</span></span><br><span class="line">formatbyte(<span class="number">0.22</span>) =&gt; <span class="string">&#x27;225.3MB&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="生成包含大小写字母和数字的随机字符串？"><a href="#生成包含大小写字母和数字的随机字符串？" class="headerlink" title="生成包含大小写字母和数字的随机字符串？"></a>生成包含大小写字母和数字的随机字符串？</h2><blockquote><p> 项目中，也许我们会遇到需要使用 JS 生成特定长度随机字符串的需求，比如用来做 Hash 值、uuid、随机码等，除了可以借助一些库和插件之外，其实部分场景下，我们完全可以自定义函数实现<strong>指定长度随机字符串</strong>的生成。</p></blockquote><p>简洁版函数只需要两行代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成长度为len的包含a-z、A-Z、0-9的随机字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateStr</span>(<span class="params">len = <span class="number">18</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 一行代码生成0-9、A-Z、a-z、总长度为62的字符数组</span></span><br><span class="line">  <span class="keyword">var</span> arr = [...new <span class="built_in">Array</span>(<span class="number">62</span>)].map(<span class="function">(<span class="params">item, i</span>) =&gt;</span></span><br><span class="line">    <span class="built_in">String</span>.fromCharCode(i + (i &lt; <span class="number">10</span> ? <span class="number">0</span> : i &lt; <span class="number">36</span> ? <span class="number">7</span> : <span class="number">13</span>) + <span class="number">48</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> [...new <span class="built_in">Array</span>(len)]</span><br><span class="line">    .map(<span class="function">() =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)])</span><br><span class="line">    .join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">generateStr(<span class="number">18</span>);</span><br></pre></td></tr></table></figure><p>如果担心重复，则可以添加一个<code>Map</code>来缓存已经生成的字符串，每次返回时判断一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成长度为len的包含a-z、A-Z、0-9的随机字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> cacheMap = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// 缓存已经生成过了的字符串</span></span><br><span class="line"><span class="comment">// 一行代码生成0-9、A-Z、a-z、总长度为62的字符数组</span></span><br><span class="line"><span class="keyword">const</span> arr = [...new <span class="built_in">Array</span>(<span class="number">62</span>)].map(<span class="function">(<span class="params">item, i</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">String</span>.fromCharCode(i + (i &lt; <span class="number">10</span> ? <span class="number">0</span> : i &lt; <span class="number">36</span> ? <span class="number">7</span> : <span class="number">13</span>) + <span class="number">48</span>)</span><br><span class="line">);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateStr</span>(<span class="params">len = <span class="number">18</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str = [...new <span class="built_in">Array</span>(len)]</span><br><span class="line">    .map(<span class="function">() =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)])</span><br><span class="line">    .join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (cacheMap.has(str)) &#123;</span><br><span class="line">    <span class="comment">// 这里会有死循环的问题，比如下面的for循环，i设置的大于62</span></span><br><span class="line">    <span class="built_in">console</span>.log(cacheMap, str);</span><br><span class="line">    <span class="comment">// i 值越大，len越小，重复的概率越大</span></span><br><span class="line">    <span class="keyword">return</span> generateStr(len);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cacheMap.set(str, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// 长度选小一点，测试20次</span></span><br><span class="line">  <span class="comment">// i设置的大于62会出现死循环，可先算出排列组合数进行预防</span></span><br><span class="line">  <span class="comment">// i 值越大，len越小，重复的概率越大，执行时间越长</span></span><br><span class="line">  generateStr(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(cacheMap);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js实用方法-对象与class</title>
      <link href="2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E5%AF%B9%E8%B1%A1%E4%B8%8Eclass/"/>
      <url>2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E5%AF%B9%E8%B1%A1%E4%B8%8Eclass/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录开发中的对象的方法</p><p>class 类方法的使用</p></blockquote><span id="more"></span><h2 id="技巧及有趣的方法"><a href="#技巧及有趣的方法" class="headerlink" title="技巧及有趣的方法"></a>技巧及有趣的方法</h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> 语句以原始插入顺序迭代对象的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties">可枚举属性</a>。</p><p><code>for...of</code> 语句遍历<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Iterators_and_Generators#Iterables">可迭代对象</a>定义要迭代的数据。</p></blockquote><h3 id="对象结构之分配剩余对象"><a href="#对象结构之分配剩余对象" class="headerlink" title="对象结构之分配剩余对象"></a>对象结构之分配剩余对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="number">1</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;, <span class="number">2</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="number">1</span>: &#123;&#125;,</span><br><span class="line">  ...afterDel</span><br><span class="line">&#125; = obj;</span><br><span class="line"><span class="built_in">console</span>.log(afterDel);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: &#123;&#125;, <span class="attr">b</span>: &#123; <span class="attr">a</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; a, ...aa &#125; = obj;</span><br><span class="line"><span class="built_in">console</span>.log(aa);</span><br></pre></td></tr></table></figure><h3 id="for-in-去掉对象中为空的键值"><a href="#for-in-去掉对象中为空的键值" class="headerlink" title="for in 去掉对象中为空的键值"></a>for in 去掉对象中为空的键值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> filter) &#123;</span><br><span class="line">  <span class="keyword">if</span> (filter[key] === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">delete</span> filter[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象的键值不仅仅只是一个字符串"><a href="#对象的键值不仅仅只是一个字符串" class="headerlink" title="对象的键值不仅仅只是一个字符串"></a>对象的键值不仅仅只是一个字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  name: <span class="string">&quot;wang&quot;</span>,</span><br><span class="line">  age: <span class="number">20</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line">user[key]; <span class="comment">//=&gt;  输出wang</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//key 可以是一个变量</span></span><br><span class="line"><span class="keyword">let</span> key = prompt(<span class="string">&quot;What do you want to know about the user?&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">//prompt  浏览器的输入弹窗  在输入后会返回输入的值给key（默认输入name）</span></span><br><span class="line">user[key]; <span class="comment">//==&gt; John（如果输入 &quot;name&quot;）</span></span><br></pre></td></tr></table></figure><blockquote><p>我们对于变量的键值应该是灵活的使用</p><p>key 是一个变量可以通过变量的赋值进而改变对象的输出</p></blockquote><h3 id="对象内的计算属性"><a href="#对象内的计算属性" class="headerlink" title="对象内的计算属性"></a>对象内的计算属性</h3><blockquote><p>我们可以在对象字面量中使用方括号。这叫做 <strong>计算属性</strong>。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = prompt(<span class="string">&quot;What do you want to know about the user?&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  [key]: <span class="string">&quot;wang&quot;</span>, <span class="comment">// 属性名是从 key 变量中得到的</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(user.name); <span class="comment">// 5 如果 key=&quot;name&quot;</span></span><br></pre></td></tr></table></figure><h3 id="对象的属性判断是否存在"><a href="#对象的属性判断是否存在" class="headerlink" title="对象的属性判断是否存在"></a>对象的属性判断是否存在</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user.key === <span class="literal">undefined</span>  返回<span class="literal">true</span>表示不存在</span><br><span class="line">“key” <span class="keyword">in</span> user  返回<span class="literal">true</span>表示存在</span><br></pre></td></tr></table></figure><h3 id="过滤空值-对象"><a href="#过滤空值-对象" class="headerlink" title="过滤空值(对象)"></a>过滤空值(对象)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="string">&quot;&quot;</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="string">&quot;wang&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> target = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(obj).map(<span class="function">(<span class="params">v</span>) =&gt;</span> (obj[v] !== <span class="string">&quot;&quot;</span> ? (target[v] = obj[v]) : <span class="string">&quot;&quot;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(target); <span class="comment">//=&gt;&#123;b: 2, c: &quot;wang&quot;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="创建空对象-适用于发送请求传参"><a href="#创建空对象-适用于发送请求传参" class="headerlink" title="创建空对象(适用于发送请求传参)"></a>创建空对象(适用于发送请求传参)</h3><blockquote><p>创建一个空对象，我们可能大多数时候会使用对象字面量为<code>&#123;&#125;</code>的方式，然而这种方式创建的对象并不是纯粹的，它仍然有<code>__proto__</code>属性以及继承自<code>Object</code>原型的一些方法，这种方式创建的对象容易被修改，比如：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> p = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">Object</span>.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(o.say)</span><br><span class="line"><span class="built_in">console</span>.log(p.say)</span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="function"><span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&gt;&gt; <span class="literal">undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="对象深拷贝的处理"><a href="#对象深拷贝的处理" class="headerlink" title="对象深拷贝的处理"></a>对象深拷贝的处理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> val = &#123; <span class="number">1</span>: &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;, <span class="number">2</span>: &#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">5</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">let</span> newVal = &#123; ...val[<span class="string">&quot;1&quot;</span>], <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line">val = &#123; ...val, <span class="number">1</span>: newVal &#125;;</span><br><span class="line"><span class="comment">//outinput &#123;&quot;1&quot;:&#123;a:1,b:4&#125;,&quot;2&quot;:&#123;a:2,b:5&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="class-类使用"><a href="#class-类使用" class="headerlink" title="class 类使用"></a>class 类使用</h2><h3 id="递归-find-属性和方法"><a href="#递归-find-属性和方法" class="headerlink" title="递归 find 属性和方法"></a>递归 find 属性和方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.nameA = <span class="string">&quot;a&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">wangA</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.nameB = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">wangB</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.nameC = <span class="string">&quot;c&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">wangC</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> C();</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FindMembers</span>(<span class="params">L, att, method</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (L.__proto__) &#123;</span><br><span class="line">    <span class="keyword">let</span> Att = <span class="built_in">Object</span>.keys(L).filter(<span class="function">(<span class="params">a</span>) =&gt;</span> a.indexOf(att) &gt; -<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> Method = <span class="built_in">Object</span>.getOwnPropertyNames(L.__proto__).filter(</span><br><span class="line">      (m) =&gt; m.indexOf(method) &gt; -<span class="number">1</span></span><br><span class="line">    );</span><br><span class="line">    arr = arr.concat(Att, Method);</span><br><span class="line">    FindMembers(L.__proto__, att, method);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> members = FindMembers(c, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;wang&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;members&quot;</span>, members);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js实用方法</title>
      <link href="2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E6%95%B0%E7%BB%84/"/>
      <url>2020/05/20/js-%E5%AE%9E%E7%94%A8%E6%96%B9%E6%B3%95-%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录开发中的数组处理的方法</p></blockquote><span id="more"></span><h2 id="技巧及有趣的方法"><a href="#技巧及有趣的方法" class="headerlink" title="技巧及有趣的方法"></a>技巧及有趣的方法</h2><h2 id="数组方法"><a href="#数组方法" class="headerlink" title="数组方法"></a>数组方法</h2><h3 id="获得一组数的平均值"><a href="#获得一组数的平均值" class="headerlink" title="获得一组数的平均值"></a>获得一组数的平均值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b) / args.length;</span><br><span class="line"></span><br><span class="line">average(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);   <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h3 id="深层数组对象，递归调用找出相对于的-id"><a href="#深层数组对象，递归调用找出相对于的-id" class="headerlink" title="深层数组对象，递归调用找出相对于的 id"></a>深层数组对象，递归调用找出相对于的 id</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">children</span>: [&#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">children</span>: [&#123; <span class="attr">id</span>: <span class="number">7</span> &#125;] &#125;] &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">8</span>, <span class="attr">children</span>: [&#123; <span class="attr">id</span>: <span class="number">9</span>, <span class="attr">children</span>: [&#123; <span class="attr">id</span>: <span class="number">10</span> &#125;] &#125;] &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepId</span>(<span class="params">arr, id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">arr, id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> a <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="keyword">if</span> (a.id === id) &#123;</span><br><span class="line">        res = a;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a.children) &#123;</span><br><span class="line">        !res &amp;&amp; fn(a.children, id);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fn(arr, id);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">deepId(test, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="一个-map-函数内使用里面对某个子项进行-every-判断是否为数字"><a href="#一个-map-函数内使用里面对某个子项进行-every-判断是否为数字" class="headerlink" title="一个 map 函数内使用里面对某个子项进行 every 判断是否为数字"></a>一个 map 函数内使用里面对某个子项进行 every 判断是否为数字</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">value.mpa(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (v.every(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="built_in">isNaN</span>(item))) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="无-loop-生成指定长度的数组"><a href="#无-loop-生成指定长度的数组" class="headerlink" title="无 loop 生成指定长度的数组"></a>无 loop 生成指定长度的数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> List = <span class="function">(<span class="params">len</span>) =&gt;</span> [...new <span class="built_in">Array</span>(len).keys()];</span><br><span class="line"><span class="keyword">const</span> list = List(<span class="number">10</span>); <span class="comment">//=&gt;list=[0,1,2,3,4,5,6,7,8,9]</span></span><br></pre></td></tr></table></figure><h3 id="数组的去重"><a href="#数组的去重" class="headerlink" title="数组的去重"></a>数组的去重</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">45</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">245</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> uniqueList = [...new <span class="built_in">Set</span>(list)]; <span class="comment">//=&gt;uniqueList= [1,2,45,5,4,245]</span></span><br><span class="line"><span class="comment">// indexOf实现</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;1&quot;</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = array.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> current = array[i];</span><br><span class="line">    <span class="keyword">if</span> (res.indexOf(current) === -<span class="number">1</span>) &#123;</span><br><span class="line">      res.push(current);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// filter实现</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;1&quot;</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = array.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array.indexOf(item) === index;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(unique(array));</span><br></pre></td></tr></table></figure><blockquote><p>map 返回就是一个新的数组，也就是说 可以使用 new 进行创建一个数组</p></blockquote><h3 id="for-in-使用"><a href="#for-in-使用" class="headerlink" title="for in 使用"></a>for in 使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> object = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a,b,c</span></span><br></pre></td></tr></table></figure><h3 id="数组对象的去重"><a href="#数组对象的去重" class="headerlink" title="数组对象的去重"></a>数组对象的去重</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> TempObj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> newArr = [...arr1, ...arr2].reduce(<span class="function">(<span class="params">cru, next</span>) =&gt;</span> &#123;</span><br><span class="line">  TempObj[next.id] ? <span class="string">&quot;&quot;</span> : (TempObj[next.id] = <span class="literal">true</span> &amp;&amp; item.push(next));</span><br><span class="line">  <span class="keyword">return</span> item;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><blockquote><p>说明：其中 cru 代表的是数组的每次遍历之后的项，next 表示遍历的下一项。</p></blockquote><h3 id="数字数组的排序"><a href="#数字数组的排序" class="headerlink" title="数字数组的排序"></a>数字数组的排序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从大到小</span></span><br><span class="line"><span class="keyword">const</span> sortArr = <span class="function">(<span class="params">array, number = <span class="number">1</span></span>) =&gt;</span> [...array].sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> y - x);</span><br><span class="line"><span class="comment">//sortArr([0,5,7,87,2]) ==&gt;[87, 7, 5, 2, 0]</span></span><br><span class="line"><span class="comment">//从小到大</span></span><br><span class="line"><span class="keyword">const</span> sortArr = <span class="function">(<span class="params">array, number = <span class="number">1</span></span>) =&gt;</span> [...array].sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y);</span><br><span class="line"><span class="comment">//sortArr([0,5,7,87,2]) ==&gt;[0, 2, 5, 7, 87]</span></span><br></pre></td></tr></table></figure><h3 id="数组对象（根据对象的某个键排序）"><a href="#数组对象（根据对象的某个键排序）" class="headerlink" title="数组对象（根据对象的某个键排序）"></a>数组对象（根据对象的某个键排序）</h3><blockquote><p>sort 函数，根据返回值是一个小于 0，等于 0，大于 0，移动 ab 两者间的位置</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">txt</span>: <span class="string">&quot;是三个&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">txt</span>: <span class="string">&quot;是一个&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">txt</span>: <span class="string">&quot;是五个&quot;</span> &#125;,</span><br><span class="line">].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a.id - b.id;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="检查数组对象中的所有对象的-isChecked-键值为-true"><a href="#检查数组对象中的所有对象的-isChecked-键值为-true" class="headerlink" title="检查数组对象中的所有对象的 isChecked 键值为 true"></a>检查数组对象中的所有对象的 isChecked 键值为 true</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isChecked = <span class="function">(<span class="params">array</span>) =&gt;</span> array.every(<span class="function">(<span class="params">el</span>) =&gt;</span> el.isChecked);</span><br></pre></td></tr></table></figure><h3 id="检查数组对象中的所有元素是否有一个-isChecked-键值为-true"><a href="#检查数组对象中的所有元素是否有一个-isChecked-键值为-true" class="headerlink" title="检查数组对象中的所有元素是否有一个 isChecked 键值为 true"></a>检查数组对象中的所有元素是否有一个 isChecked 键值为 true</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isChecked = <span class="function">(<span class="params">array</span>) =&gt;</span> array.some(<span class="function">(<span class="params">el</span>) =&gt;</span> el.isChecked);</span><br></pre></td></tr></table></figure><h3 id="判断一个对象的某些键值是否有值-必须"><a href="#判断一个对象的某些键值是否有值-必须" class="headerlink" title="判断一个对象的某些键值是否有值(必须)"></a>判断一个对象的某些键值是否有值(必须)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;&quot;</span>, <span class="attr">pwd</span>: <span class="string">&quot;&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> isChecked = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;pwd&quot;</span>].every(<span class="function">(<span class="params">key</span>) =&gt;</span> !!obj[key]);</span><br></pre></td></tr></table></figure><h3 id="过滤空值-数组"><a href="#过滤空值-数组" class="headerlink" title="过滤空值(数组)"></a>过滤空值(数组)</h3><blockquote><p>空值指的是没有具体意义的一些值，比如 0，undefined，null，false，空字符串等</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> resArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">false</span>, <span class="string">&quot;&quot;</span>].filter(<span class="built_in">Boolean</span>); <span class="comment">//-&gt;1,2</span></span><br></pre></td></tr></table></figure><h3 id="删除数组里-undefined-元素"><a href="#删除数组里-undefined-元素" class="headerlink" title="删除数组里 undefined 元素"></a>删除数组里 undefined 元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEmptyArrayEle</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">      arr.splice(i, <span class="number">1</span>);</span><br><span class="line">      i = i - <span class="number">1</span>; <span class="comment">// i - 1 ,因为空元素在数组下标 2 位置，删除空之后，后面的元素要向前补位，</span></span><br><span class="line">      <span class="comment">// 这样才能真正去掉空元素,觉得这句可以删掉的连续为空试试，然后思考其中逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="简单利用-filter-删除-undefined，NaN-0，false"><a href="#简单利用-filter-删除-undefined，NaN-0，false" class="headerlink" title="简单利用 filter 删除 undefined，NaN,0，false"></a>简单利用 filter 删除 undefined，NaN,0，false</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line">compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">&quot;&quot;</span>, <span class="number">3</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;e&quot;</span> * <span class="number">23</span>, <span class="literal">NaN</span>, <span class="string">&quot;s&quot;</span>, <span class="number">34</span>]);</span><br></pre></td></tr></table></figure><h3 id="只删除数组内-undefined"><a href="#只删除数组内-undefined" class="headerlink" title="只删除数组内 undefined"></a>只删除数组内 undefined</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">v</span>) =&gt;</span> v !== <span class="string">&quot;undefined&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="reduce-删除数据对象内指定-id"><a href="#reduce-删除数据对象内指定-id" class="headerlink" title="reduce 删除数据对象内指定 id[]"></a>reduce 删除数据对象内指定 id[]</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tableData = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;1号&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;2号&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;3号&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> delSelect = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> tempArr = delSelect.reduce(<span class="function">(<span class="params">cru, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> cru.filter(<span class="function">(<span class="params">e</span>) =&gt;</span> e.id !== next);</span><br><span class="line">&#125;, tableData);</span><br><span class="line"><span class="built_in">console</span>.log(tempArr); <span class="comment">//=&gt; [&#123;id: 3, name: &#x27;3号&#x27;&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="多维数组转换成一维数组"><a href="#多维数组转换成一维数组" class="headerlink" title="多维数组转换成一维数组"></a>多维数组转换成一维数组</h3><blockquote><p>采用递归的思路处理</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]],</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> flattenArr = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> acc.concat(<span class="built_in">Array</span>.isArray(cur) ? flattenArr(cur) : cur);</span><br><span class="line">  &#125;, []);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(flattenArr(arr1));</span><br></pre></td></tr></table></figure><h3 id="数组对象根据-id-重新取值"><a href="#数组对象根据-id-重新取值" class="headerlink" title="数组对象根据 id 重新取值"></a>数组对象根据 id 重新取值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> table1 = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;选中&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;第二选中&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> table2 = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;数据1&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;数据2&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;数据3&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&quot;数据4&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">name</span>: <span class="string">&quot;数据5&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">name</span>: <span class="string">&quot;数据6&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> temp = table1.map(<span class="function">(<span class="params">t1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> table2.find(<span class="function">(<span class="params">t2</span>) =&gt;</span> t2.id == t1.id);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(temp); <span class="comment">//[&#123;id: 1, name: &quot;数据1&quot;&#125;,&#123;id: 3, name: &quot;数据3&quot;&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="打乱数组顺序"><a href="#打乱数组顺序" class="headerlink" title="打乱数组顺序"></a>打乱数组顺序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">arr = arr.sort(<span class="function">()=&gt;</span><span class="number">0.5</span>-<span class="built_in">Math</span>.random())</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure><h3 id="提取字符串中的数字"><a href="#提取字符串中的数字" class="headerlink" title="提取字符串中的数字"></a>提取字符串中的数字</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;dasd4556da7 da789&#x27;</span></span><br><span class="line"><span class="keyword">const</span> num = str.replace(<span class="regexp">/\D/g</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(num)</span><br></pre></td></tr></table></figure><h3 id="数组中随机选取"><a href="#数组中随机选取" class="headerlink" title="数组中随机选取"></a>数组中随机选取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = [<span class="string">&#x27;wa&#x27;</span>,<span class="string">&#x27;li&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;huang&#x27;</span>,<span class="string">&#x27;zi&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> random = <span class="function">(<span class="params">arr</span>)=&gt;</span>arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*arr.length)]</span><br><span class="line"><span class="keyword">const</span> whois = random(elements)</span><br><span class="line"><span class="built_in">console</span>.log(whois)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用git命令</title>
      <link href="2020/03/19/git-%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4/"/>
      <url>2020/03/19/git-%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>常用的git命令，方式使用,以及git报错解决方法</p></blockquote><span id="more"></span><h3 id="使用Github-的站内搜索，搜索：Awesome-你的关键字"><a href="#使用Github-的站内搜索，搜索：Awesome-你的关键字" class="headerlink" title="使用Github 的站内搜索，搜索：Awesome + 你的关键字"></a>使用Github 的站内搜索，搜索：<code>Awesome +</code> 你的关键字</h3><h3 id="ssh秘钥"><a href="#ssh秘钥" class="headerlink" title="ssh秘钥"></a>ssh秘钥</h3><blockquote><p>检查SSH秘钥是否存在。右击git bash打开终端执行命令 ：</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><blockquote><p>若密钥不存在，则生成SSH 密钥 。在git bash上面执行命令</p><p>window系统生成地址为 C:\Users\Administrator.ssh</p><p>私钥 id_rsa.<br>公钥 id_rsa.pub</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa <span class="literal">-C</span> <span class="string">&quot;email@163.com&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>在github或gitlab上找到Settings添加秘钥</p><p>可以使用cat 查看秘钥并复制</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h3 id="前端常用Git命令"><a href="#前端常用Git命令" class="headerlink" title="前端常用Git命令"></a>前端常用Git命令</h3><h4 id="常见信息"><a href="#常见信息" class="headerlink" title="常见信息"></a>常见信息</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master: 默认开发分支origin：默认远程版本库Head: 默认开发分支Head^:Head 的父提交</span><br></pre></td></tr></table></figure><h4 id="创建新仓库"><a href="#创建新仓库" class="headerlink" title="创建新仓库"></a>创建新仓库</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git initgit init [project-name]   # 新建一个目录，并将其初始化为git仓库</span><br><span class="line">git clone [url]           # 拷贝一个git仓库到本地</span><br></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Git 的配置文件是 .gitconfig，可以放在用户的主目录（全局配置）下或项目目录下（项目配置） 。</span><br><span class="line"># 显示当前的 git 配置</span><br><span class="line">git config --list  </span><br><span class="line"># 编辑 Git 配置</span><br><span class="line">git config -e [--global] </span><br><span class="line"># 设置用来提交代码的用户信息</span><br><span class="line">git config [--global] user.name <span class="string">&quot;[name]&quot;</span> </span><br><span class="line">git config [--global] user.email <span class="string">&quot;[email address]&quot;</span></span><br></pre></td></tr></table></figure><h4 id="添加删除文件"><a href="#添加删除文件" class="headerlink" title="添加删除文件"></a>添加删除文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 将指定文件添加到暂存区</span><br><span class="line">git add [file1] [file2] ... </span><br><span class="line"># 将指定目录添加到暂存区，包括子目录</span><br><span class="line">git add [dir]             </span><br><span class="line"># 将当前目录中的所有文件添加到暂存区</span><br><span class="line">git add .                 </span><br><span class="line"># 对同一个文件多次更改，建议分开提交</span><br><span class="line">git add -p                </span><br><span class="line"># 将指定文件从工作区删除，并将本次删除添加到暂存区</span><br><span class="line">git rm [file1] [file2] ...  </span><br><span class="line"># 停止追踪指定的文件，不会删除文件</span><br><span class="line">git rm --cached [file]    </span><br><span class="line"># 对指定文件进行重命名，并添加到暂存区中</span><br><span class="line">git mv [file-original] [file-renamed]</span><br></pre></td></tr></table></figure><h4 id="代码提交"><a href="#代码提交" class="headerlink" title="代码提交"></a>代码提交</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 将暂存区中的文件提交到代码仓库</span><br><span class="line">git commit -m [message]  </span><br><span class="line"># 将指定的文件从暂存区中提交到仓库</span><br><span class="line">git commit [file1] [file2] ... -m [message] </span><br><span class="line"># 将工作区的更改直接提交到仓库</span><br><span class="line">git commit -a </span><br><span class="line"># 提交前展示所有的变动</span><br><span class="line">git commit -v </span><br><span class="line"># 使用新提交代替上次提交，如果代码没有任何变动，将会用于重写上次提交的提交信息</span><br><span class="line">git commit --amend -m [message] </span><br><span class="line"># 重做上次的提交，并将指定的文件包含其中</span><br><span class="line">git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure><h4 id="分支相关"><a href="#分支相关" class="headerlink" title="分支相关"></a>分支相关</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 列出本地分支</span><br><span class="line">git branch  </span><br><span class="line"># 列出所有远程分支</span><br><span class="line">git branch -r </span><br><span class="line"># 列出本地和远程的所有分支</span><br><span class="line">git branch -a </span><br><span class="line"># 新建分支，并留在当前分支</span><br><span class="line">git branch [branch-name] </span><br><span class="line"># 新建分支，并切换到新建分支</span><br><span class="line">git checkout -b [branch-name] </span><br><span class="line"># 指向某次提交新建分支</span><br><span class="line">git branch [branch] [commit] </span><br><span class="line"># 创建一个新分支，并与指定的远程分支建立跟踪关系</span><br><span class="line">git branch --track [branch] [remote-branch] </span><br><span class="line"># 切换到指定分支，并更新工作区</span><br><span class="line">git checkout [branch-name] </span><br><span class="line"># 切换到上一个分支git checkout - </span><br><span class="line"># 将本地分支与指定的远程分支建立跟踪关心</span><br><span class="line">git branch --set-upstream [branch] [remote-branch]</span><br><span class="line"># 合并指定分支与当前分支git merge [branch] branch是想获取的分支 当前分支为master 执行 git merge dev</span><br><span class="line"># 将指定的提交合并到本地分支git cheery-pick [commit] </span><br><span class="line"># 删除本地指定分支</span><br><span class="line">git branch -d [branch-name] </span><br><span class="line"># 删除远程分支</span><br><span class="line">git push origin --delete [branch-name]git push -dr [remote&#x2F;branch]</span><br></pre></td></tr></table></figure><h4 id="标签操作"><a href="#标签操作" class="headerlink" title="标签操作"></a>标签操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 列出所有标签</span><br><span class="line">git tag</span><br><span class="line"># 在当前 tag 上创建一个新标签</span><br><span class="line">git tag [tag]</span><br><span class="line"># 在指定 tag 上创建一个新标签</span><br><span class="line">git tag [tag] [commit]</span><br><span class="line"># 删除本地标签</span><br><span class="line">git tag -d [tag]</span><br><span class="line"># 删除远程标签</span><br><span class="line">git push origin :refs&#x2F;tags&#x2F;[tagName]</span><br><span class="line"># 查看标签信息</span><br><span class="line">git show [tag]</span><br><span class="line"># 提交指定标签</span><br><span class="line">git push [remote] --tags</span><br><span class="line"># 创建一个新分支，指向特定的标签</span><br><span class="line">git checkout -b [branch] [tag]</span><br></pre></td></tr></table></figure><h4 id="查看信息"><a href="#查看信息" class="headerlink" title="查看信息"></a>查看信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># 显示有变动的文件</span><br><span class="line">git status</span><br><span class="line"># 显示当前分支的提交历史</span><br><span class="line">git log</span><br><span class="line"># 显示提交历史和每次提交的文件</span><br><span class="line">git log --stat</span><br><span class="line"># 指定关键字搜索提交历史</span><br><span class="line">git log -S [keyword]</span><br><span class="line"># 显示自某次提交以来的所有更改，一次提交显示一行</span><br><span class="line">git log [tag] HEAD --pretty&#x3D;format:$s</span><br><span class="line"># 显示自某次提交以来的所有更改，其提交描述必须符合搜索条件</span><br><span class="line">git log [tag] HEAD --grep feature</span><br><span class="line"># 显示指定文件的提交历史</span><br><span class="line">git log --flollow [file]git whatchanged [file]</span><br><span class="line"># 显示与指定文件相关的每个差异</span><br><span class="line">git log -p [file]</span><br><span class="line"># 显示最近 5 次提交</span><br><span class="line">git log -5 --pretty --oneline</span><br><span class="line"># 显示所有的提交用户，已提交数目多少排名</span><br><span class="line">git shortlog -sn</span><br><span class="line"># 显示指定文件何时被何人修改过</span><br><span class="line">git blame [file]</span><br><span class="line"># 显示暂存区和工作区文件差别</span><br><span class="line">git diff</span><br><span class="line"># 显示暂存区和上一次提交的差别</span><br><span class="line">git diff --cached [file]</span><br><span class="line"># 显示工作区和当前分支的最近一次提交的差别</span><br><span class="line">git diff HEAD</span><br><span class="line"># 显示指定两次提交的差别</span><br><span class="line">git diff [first-branch]...[second-branch]</span><br><span class="line"># 显示今天提交了多少代码</span><br><span class="line">git diff --shortstat &quot;@&#123;0 day ago&#125;&quot;</span><br><span class="line"># 显示特定提交的提交信息和更改的内容</span><br><span class="line">git show [commit]</span><br><span class="line"># 某次提交改动了哪些文件</span><br><span class="line">git show --name-only [commit]</span><br><span class="line"># 显示某个提交的特定文件的内容</span><br><span class="line">git show [commit]:[filename]</span><br><span class="line"># 显示当前分支的最新提交</span><br><span class="line">git reflog</span><br></pre></td></tr></table></figure><h4 id="远程同步"><a href="#远程同步" class="headerlink" title="远程同步"></a>远程同步</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 从远程分支下载所有变动</span><br><span class="line">git fetch [remote]</span><br><span class="line"># 显示所有远程仓库</span><br><span class="line">git remote -v</span><br><span class="line"># 显示某个远程参考信息</span><br><span class="line">git remote show [remote]</span><br><span class="line"># 新建一个远程仓库，并命名</span><br><span class="line">git remote add [shortname] [url]</span><br><span class="line"># 检索远程村粗库的更改，并与本地分支合并</span><br><span class="line">git pull [remote] [branch]</span><br><span class="line"># 将本地分支提交到远程仓库</span><br><span class="line">git push [remote] [branch]</span><br><span class="line"># 将当前分支强制提交到远程仓库，即使有冲突存在</span><br><span class="line">git push [remote] --force</span><br><span class="line"># 将所有分支提交到远程仓库</span><br><span class="line">git push [remote] --all</span><br><span class="line">#### 撤销操作</span><br><span class="line"># 将暂存区中的指定文件还原到工作区，保留文件变动</span><br><span class="line">git checkout [file]</span><br><span class="line"># 将指定文件从某个提交还原到暂存区和工作区</span><br><span class="line">git checkout [commit] [file]</span><br><span class="line"># 将暂存区中的所有文件还原到工作区</span><br><span class="line">git checkout .</span><br><span class="line"># 重置暂存区中的指定文件，与先前的提交保持一致，但保持工作空间的变动不变</span><br><span class="line">git reset [file]</span><br><span class="line"># 重置暂存区和工作区中的指定文件，并与最近一次提交保持一致，工作空间文件变动不会保留</span><br><span class="line">git reset --hard</span><br><span class="line"># 重置暂存区，指向指定的某次提交，工作区的内容不会被覆盖</span><br><span class="line">git reset [commit]</span><br><span class="line"># 重置暂存区和工作区中的指定文件，并与指定的某次提交保持一致，工作区的内容会被覆盖</span><br><span class="line">git reset --hard [commit]</span><br><span class="line"># 将 HEAD 重置为指定的某次提交，保持暂存区和工作区的内容不变</span><br><span class="line">git reset --keep [commit]</span><br><span class="line"># 新建新提交以撤销指定的提交</span><br><span class="line">git revert [commit]</span><br><span class="line"># 暂存为提交的变动，并在稍后移动它们</span><br><span class="line">git stashgit stash popgit stash apply</span><br></pre></td></tr></table></figure><h4 id="储藏"><a href="#储藏" class="headerlink" title="储藏"></a>储藏</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 快速储藏代码,默认储藏名称为&quot;WIP on &lt;branch_name&gt; ： &lt;latest_commit_id&gt; &lt;latest_commit_message&gt;&quot;</span><br><span class="line">git stash </span><br><span class="line"># 储藏自定义标记</span><br><span class="line">git stash save &lt;msg&gt; </span><br><span class="line"># 查看储藏列表</span><br><span class="line">git stash list</span><br><span class="line"># 查看第一个储藏做了哪些文件改动</span><br><span class="line">git stash show</span><br><span class="line"># 查看第一个储藏的改动（详情） </span><br><span class="line">git stash show -p</span><br><span class="line"># 查看其他（num）储藏做了哪些改动</span><br><span class="line">git stash show stash@&#123;num&#125;</span><br><span class="line"># 应用第一个储藏，但不会删除</span><br><span class="line">git stash apply </span><br><span class="line"># 应用&#123;num&#125;储藏</span><br><span class="line">git stash apply stash@&#123;num&#125;</span><br><span class="line"># 弹出第一个储藏，并删除</span><br><span class="line">git stash pop</span><br><span class="line"># 删除第一个储藏</span><br><span class="line">git stash drop</span><br><span class="line"># 删除&#123;num&#125;储藏</span><br><span class="line">git stash drop stash@&#123;num&#125;</span><br><span class="line"># 清空所有储藏</span><br><span class="line">git stash clear</span><br></pre></td></tr></table></figure><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 生成用于发布的存档</span><br><span class="line">git archive</span><br></pre></td></tr></table></figure><h3 id="git报错"><a href="#git报错" class="headerlink" title="git报错"></a>git报错</h3><h4 id="若git连接远程仓库时显示ssl证书不存在则可以执行以下命令"><a href="#若git连接远程仓库时显示ssl证书不存在则可以执行以下命令" class="headerlink" title="若git连接远程仓库时显示ssl证书不存在则可以执行以下命令"></a>若git连接远程仓库时显示ssl证书不存在则可以执行以下命令</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="literal">-global</span> http.sslVerify false</span><br></pre></td></tr></table></figure><h3 id="git特别输出"><a href="#git特别输出" class="headerlink" title="git特别输出"></a>git特别输出</h3><p>输出当前所有用户开发量（新增行，删除行，总行）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -<span class="literal">-format</span>=<span class="string">&#x27;%aN&#x27;</span> | <span class="built_in">sort</span> <span class="literal">-u</span> | <span class="keyword">while</span> read name; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="literal">-en</span> <span class="string">&quot;<span class="variable">$name</span>\t&quot;</span>; git log -<span class="literal">-author</span>=<span class="string">&quot;<span class="variable">$name</span>&quot;</span> -<span class="literal">-pretty</span>=tformat: -<span class="literal">-numstat</span> | awk <span class="string">&#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#x27;</span> - ; done</span><br></pre></td></tr></table></figure><blockquote><p>输出效果</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wang  added lines: <span class="number">17936</span>, removed lines: <span class="number">17929</span>, total lines: <span class="number">7</span></span><br><span class="line">li  added lines: <span class="number">30272</span>, removed lines: <span class="number">1</span>, total lines: <span class="number">30271</span></span><br><span class="line">zhang  added lines: <span class="number">1250</span>, removed lines: <span class="number">998</span>, total lines: <span class="number">252</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-cli3.x项目结构</title>
      <link href="2020/03/19/vue-vue-cli3.0%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/"/>
      <url>2020/03/19/vue-vue-cli3.0%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue-cli项目开发中的结构，打包配置，axios封装，vuex使用</p></blockquote><span id="more"></span><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p><img src="https://wang-z.gitee.io/img/vue3-project-structure.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/vue3-project-structure.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="项目结构"></p><p>解析：项目存在public（公共） favicon.ico（网站图标） index.html(入口文件)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>网站名<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but advertisement doesn&#x27;t work properly without JavaScript enabled. Please enable it to</span><br><span class="line">      continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.runtime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/vue-router/3.0.1/vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://jira.finway.com.cn/vue-source/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此入口采用cdn引入外部的element-ui  axios  vue  vue-router moment </p><h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><p>src作为项目的资源文件存放路径-包含以下的子文件夹</p><h4 id="assets"><a href="#assets" class="headerlink" title="assets"></a>assets</h4><p>存放images，JSON文件</p><p>调用时可以使用 路径 “@/assets/images/“+”图片名”</p><blockquote><p>配置vue.config.js可改变图片打包base63限制大小</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        config.module</span><br><span class="line">            .rule(<span class="string">&#x27;images&#x27;</span>)</span><br><span class="line">            .use(<span class="string">&#x27;url-loader&#x27;</span>)</span><br><span class="line">            .loader(<span class="string">&#x27;url-loader&#x27;</span>)</span><br><span class="line">            .tap(<span class="function"><span class="params">options</span> =&gt;</span> <span class="built_in">Object</span>.assign(options, &#123; <span class="attr">limit</span>: <span class="number">1000000</span> &#125;))<span class="comment">//在1000000B大小下的都转为base64</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="components（自定义公共组件）"><a href="#components（自定义公共组件）" class="headerlink" title="components（自定义公共组件）"></a>components（自定义公共组件）</h4><p>如果你创建了一些公共组件 在整个项目中多次调用时，可以拆分为单独的公共组件</p><h4 id="request（请求）-api"><a href="#request（请求）-api" class="headerlink" title="request（请求）/api"></a>request（请求）/api</h4><h5 id="对于axios的二次封装"><a href="#对于axios的二次封装" class="headerlink" title="对于axios的二次封装"></a>对于axios的二次封装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Message&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// 是否允许跨域（本地开发可关闭使用，会导致跨域）</span></span><br><span class="line">axios.defaults.withCredentials = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// axios初始化：延迟时间，主路由地址</span></span><br><span class="line"><span class="keyword">let</span> instance = axios.create(&#123;</span><br><span class="line">    baseURL: process.env.VUE_APP_BASE_API,</span><br><span class="line">    timeout: <span class="number">10000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置拦截器</span></span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">        config.headers = &#123;      <span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">    &#125; </span><br><span class="line">        <span class="comment">//在发送请求之前做某事</span></span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="comment">//请求错误时做些事</span></span><br><span class="line">        <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="comment">//响应拦截器</span></span><br><span class="line">instance.interceptors.response.use(</span><br><span class="line">    response =&gt; &#123;</span><br><span class="line">        <span class="comment">//请求结束成功</span></span><br><span class="line">        <span class="keyword">if</span> (response.status === <span class="number">200</span> || response.status === <span class="number">304</span> || response.status === <span class="number">201</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.data.data</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="comment">//请求错误时做些事</span></span><br><span class="line">        <span class="keyword">if</span> (error &amp;&amp; error.response) &#123;</span><br><span class="line">            <span class="keyword">if</span> (error.response.status === <span class="number">400</span> || <span class="built_in">String</span>(error).indexOf(<span class="string">&#x27;code 400&#x27;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">                Message.error(error.response.data.message)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error.response.data)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (error.response.status === <span class="number">401</span> || <span class="built_in">String</span>(error).indexOf(<span class="string">&#x27;code 401&#x27;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">                Message.error(error.response.data.message)</span><br><span class="line">                <span class="comment">// 函数进入then后面的第二个err函数，如果没有就进入catch函数, 表单提交就可以根据这个重置参数以及重置按钮状态，防止按钮卡滞</span></span><br><span class="line">                <span class="comment">// return Promise.reject(error)</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">String</span>(error).indexOf(<span class="string">&#x27;code 500&#x27;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (error.response.data.message) &#123;</span><br><span class="line">                    Message.error(error.response.data.message)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Message.error(<span class="string">&#x27;服务器出现问题，请刷新重试&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 终止Promise调用链</span></span><br><span class="line">            <span class="keyword">return</span> error</span><br><span class="line">            <span class="comment">// return new Promise(() =&gt; &#123;&#125;)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否销毁拦截器</span></span><br><span class="line"><span class="comment">// 1.给拦截器起个名称 var myInterceptors = instance.interceptors.requesst.use();</span></span><br><span class="line"><span class="comment">// 2.instance.interceptors.request.eject(myInterceptor);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//模块化导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">url, params = &#123;&#125;</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            params,</span><br><span class="line">            timeout: <span class="number">30000</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">post</span>(<span class="params">url, data = &#123;&#125;</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            data,</span><br><span class="line">            timeout: <span class="number">3000000</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">postFile</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            data</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">put</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            data</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">patch</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;patch&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            data</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">delete</span>(<span class="params">url, data</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">return</span> instance(&#123;</span><br><span class="line">            method: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">            url: url,</span><br><span class="line">            data,</span><br><span class="line">            timeout: <span class="number">30000</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在自定义的分类api中把请求路径进行分类</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;../axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> axios.post(<span class="string">&quot;/api/login&quot;</span>, params);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> axios.get(<span class="string">&quot;/api/logout&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    login,</span><br><span class="line">    logout</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="store"><a href="#store" class="headerlink" title="store"></a>store</h4><h5 id="store-modules"><a href="#store-modules" class="headerlink" title="store-modules"></a>store-modules</h5><p>定义 wang.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;getRegionData,&#125; <span class="keyword">from</span> <span class="string">&quot;@/request/api/addPlan&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    City: [],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="function"><span class="title">setCity</span>(<span class="params">state, payload</span>)</span> &#123;</span><br><span class="line">        state.City = payload;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="keyword">async</span> getCIty(&#123;</span><br><span class="line">        commit</span><br><span class="line">    &#125;, payload) &#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> getRegionData(&#123;</span><br><span class="line">            access_token: payload.access_token</span><br><span class="line">        &#125;);</span><br><span class="line">        commit(<span class="string">&quot;setCity&quot;</span>, res.data);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    namespaced: <span class="literal">true</span>,</span><br><span class="line">    state,</span><br><span class="line">    getters,</span><br><span class="line">    actions,</span><br><span class="line">    mutations</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>注意必须在store-index.js(入口)引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> wang <span class="keyword">from</span> <span class="string">&#x27;./modules/wang&#x27;</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    wang,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="对于getters的使用"><a href="#对于getters的使用" class="headerlink" title="对于getters的使用"></a>对于getters的使用</h5><p>定义getters.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    City: <span class="function"><span class="params">state</span> =&gt;</span> state.wang.City,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br></pre></td></tr></table></figure><p>在页面.vue使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&quot;City&quot;</span>])</span><br><span class="line">  &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line">    <span class="function"><span class="title">wang</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.City)</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="styles-css样式"><a href="#styles-css样式" class="headerlink" title="styles(css样式)"></a>styles(css样式)</h4><p>分成element.css(修改UI的样式),index.css（主要的样式）,reset.css（样式初始化）</p><p>index.js</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./reset.css&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./icon.css&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./element.css&#x27;</span>;</span><br></pre></td></tr></table></figure><p>在main.js引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化css样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/styles/index.css&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="utils-工具"><a href="#utils-工具" class="headerlink" title="utils(工具)"></a>utils(工具)</h4><p>每个项目特有的工具函数，封装了对应项目需要的公共函数</p><h4 id="views-视图"><a href="#views-视图" class="headerlink" title="views(视图)"></a>views(视图)</h4><p>包含Home.vue (主体视图窗口)  布局容器的使用及插槽</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;home&quot;</span>&gt;</span><br><span class="line">    &lt;!-- 主体框架 --&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;el-aside :style=<span class="string">&quot;isCollapse ? &#123;width:0+&#x27;px&#x27;&#125; : &#123;width:200+&#x27;px&#x27;&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;Aside /&gt;</span><br><span class="line">      &lt;/el-aside&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-header&gt;</span><br><span class="line">          &lt;Header /&gt;</span><br><span class="line">        &lt;/el-header&gt;</span><br><span class="line">        &lt;!-- router-view插槽 --&gt;</span><br><span class="line">        &lt;el-main&gt;</span><br><span class="line">          &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/el-main&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt; </span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">&quot;../components/header&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Aside <span class="keyword">from</span> <span class="string">&quot;../components/aside&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&quot;isCollapse&quot;</span>])</span><br><span class="line">  &#125;,</span><br><span class="line">  name: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      width: <span class="number">200</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Header,</span><br><span class="line">    Aside</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=<span class="string">&quot;less&quot;</span> scoped&gt;</span><br><span class="line">.home &#123;</span><br><span class="line">  min-width: 1263px;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>在views定义的模板.vue都需要在路由进行引入</p><h3 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h3><p>只有一个路由插槽</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="main-js-主要文件"><a href="#main-js-主要文件" class="headerlink" title="main.js(主要文件)"></a>main.js(主要文件)</h3><p>main用于外部资源的引入以及vue的全局绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;./request/axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span> <span class="comment">//element-ui的全部组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span> <span class="comment">//element-ui的css</span></span><br><span class="line">Vue.use(ElementUI, &#123;</span><br><span class="line">  size: <span class="string">&#x27;small&#x27;</span>,</span><br><span class="line">  zIndex: <span class="number">3000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//全局绑定axios</span></span><br><span class="line">Vue.prototype.$http = axios;</span><br><span class="line"><span class="comment">//初始化css样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/styles/index.css&#x27;</span></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="router-js-路由"><a href="#router-js-路由" class="headerlink" title="router.js(路由)"></a>router.js(路由)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;./views/Home.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决导航栏重复点击跳转报错报错</span></span><br><span class="line"><span class="keyword">const</span> originalPush = Router.prototype.push</span><br><span class="line">Router.prototype.push = <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> originalPush.call(<span class="built_in">this</span>, location).catch(<span class="function"><span class="params">err</span> =&gt;</span> err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">      component: Home,</span><br><span class="line">      redirect: <span class="string">&#x27;/popularize&#x27;</span>,</span><br><span class="line">      children: [&#123;</span><br><span class="line">          path: <span class="string">&#x27;/popularize&#x27;</span>,</span><br><span class="line">          name: <span class="string">&#x27;popularize&#x27;</span>,</span><br><span class="line">          component: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">&#x27;@/views/popularize/popularize.vue&#x27;</span>], resolve)</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p> vue-router(版本3.0.6)-&gt;vue-router(版本3.2.0)才出现这个问题</p><p>在最新的vue-router中已经解决这个问题 可删除</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决导航栏重复点击跳转报错报错</span></span><br><span class="line"><span class="keyword">const</span> originalPush = Router.prototype.push</span><br><span class="line">Router.prototype.push = <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> originalPush.call(<span class="built_in">this</span>, location).catch(<span class="function"><span class="params">err</span> =&gt;</span> err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>路由的懒加载方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">component: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">&#x27;@/views/popularize/popularize.vue&#x27;</span>], resolve)</span><br><span class="line">component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/popularize/popularize.vue&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="env-development（开发模式的环境变量）"><a href="#env-development（开发模式的环境变量）" class="headerlink" title=".env.development（开发模式的环境变量）"></a>.env.development（开发模式的环境变量）</h3><p>在开发中有一些需要单独抽离的变量</p><p>api请求的baseUrl(注意命名必须前缀带VUE_APP__)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VUE_APP_BASE_API =<span class="string">&#x27;http://dev.dsp.api.kuafugame.com&#x27;</span></span><br></pre></td></tr></table></figure><p>在axios.js中使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">process.env.VUE_APP_BASE_API</span><br></pre></td></tr></table></figure><h3 id="env-production-上线后的环境变量，为打包所使用"><a href="#env-production-上线后的环境变量，为打包所使用" class="headerlink" title=".env.production(上线后的环境变量，为打包所使用)"></a>.env.production(上线后的环境变量，为打包所使用)</h3><p>.gitignore(npm忽略清单)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">node_modules</span><br><span class="line">/dist</span><br><span class="line"></span><br><span class="line"># local env files</span><br><span class="line">.env.local</span><br><span class="line">.env.*.local</span><br><span class="line"></span><br><span class="line"># Log files</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line"></span><br><span class="line"># Editor directories and files</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">*.suo</span><br><span class="line">*.ntvs*</span><br><span class="line">*.njsproj</span><br><span class="line">*.sln</span><br><span class="line">*.sw?</span><br></pre></td></tr></table></figure><p>在项目准备上线后，请配置好vue.config.js</p><h3 id="脚手架配置"><a href="#脚手架配置" class="headerlink" title="脚手架配置"></a><a href="https://cli.vuejs.org/zh/config/">脚手架配置</a></h3><h4 id="最基本的配置"><a href="#最基本的配置" class="headerlink" title="最基本的配置"></a>最基本的配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    publicPath: process.env.NODE_ENV === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;./&quot;</span> : <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="comment">// outputDir: 在npm run build时 生成文件的目录 type:string, default:&#x27;dist&#x27;</span></span><br><span class="line">    <span class="comment">// outputDir: &#x27;dist&#x27;,</span></span><br><span class="line">    <span class="comment">// pages:&#123; type:Object,Default:undfind &#125;</span></span><br><span class="line">    assetsDir: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        port: <span class="number">80</span>, <span class="comment">// 端口号</span></span><br><span class="line">        host: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">        https: <span class="literal">false</span>, <span class="comment">// https:&#123;type:Boolean&#125;</span></span><br><span class="line">        disableHostCheck: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// open: true, //配置自动启动浏览器</span></span><br><span class="line">        <span class="comment">// proxy: &#x27;http://dev.dsp.kuafugame.com/&#x27; // 配置跨域处理,只有一个代理</span></span><br><span class="line">        <span class="comment">// proxy: &#123;</span></span><br><span class="line">        <span class="comment">//   &quot;/api&quot;: &#123;</span></span><br><span class="line">        <span class="comment">//     target: &quot;&lt;url&gt;&quot;,</span></span><br><span class="line">        <span class="comment">//     ws: true,</span></span><br><span class="line">        <span class="comment">//     changeOrigin: true</span></span><br><span class="line">        <span class="comment">//   &#125;,</span></span><br><span class="line">        <span class="comment">//   &quot;/foo&quot;: &#123;</span></span><br><span class="line">        <span class="comment">//     target: &quot;&lt;other_url&gt;&quot;</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">// &#125; // 配置多个代理</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="增加额外的配置"><a href="#增加额外的配置" class="headerlink" title="增加额外的配置"></a>增加额外的配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//压缩代码的npm包</span></span><br><span class="line"><span class="keyword">const</span> CompressionPlugin = <span class="built_in">require</span>(<span class="string">&quot;compression-webpack-plugin&quot;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 判断是在什么环境下运行</span></span><br><span class="line">    publicPath: process.env.NODE_ENV === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;./&quot;</span> : <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="comment">// outputDir: 在npm run build时 生成文件的目录 type:string, default:&#x27;dist&#x27;</span></span><br><span class="line">    <span class="comment">// outputDir: &#x27;dist&#x27;,</span></span><br><span class="line">    <span class="comment">// pages:&#123; type:Object,Default:undfind &#125;</span></span><br><span class="line">    assetsDir: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//修改端口号</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        port: <span class="number">80</span>, <span class="comment">// 端口号</span></span><br><span class="line">        host: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">        https: <span class="literal">false</span>, <span class="comment">// https:&#123;type:Boolean&#125;</span></span><br><span class="line">        <span class="comment">//内网打通</span></span><br><span class="line">        disableHostCheck: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// open: true, //配置自动启动浏览器</span></span><br><span class="line">        <span class="comment">// proxy: &#x27;http://dev.dsp.kuafugame.com/&#x27; // 配置跨域处理,只有一个代理</span></span><br><span class="line">        <span class="comment">// proxy: &#123;</span></span><br><span class="line">        <span class="comment">//   &quot;/api&quot;: &#123;</span></span><br><span class="line">        <span class="comment">//     target: &quot;&lt;url&gt;&quot;,</span></span><br><span class="line">        <span class="comment">//     ws: true,</span></span><br><span class="line">        <span class="comment">//     changeOrigin: true</span></span><br><span class="line">        <span class="comment">//   &#125;,</span></span><br><span class="line">        <span class="comment">//   &quot;/foo&quot;: &#123;</span></span><br><span class="line">        <span class="comment">//     target: &quot;&lt;other_url&gt;&quot;</span></span><br><span class="line">        <span class="comment">//   &#125;</span></span><br><span class="line">        <span class="comment">// &#125; // 配置多个代理</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//合并一下webpack的配置</span></span><br><span class="line">    configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//外部引入第三方库，不想打包进vender时</span></span><br><span class="line">        config.externals = &#123;</span><br><span class="line">            <span class="string">&#x27;vue&#x27;</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;vue-router&#x27;</span>: <span class="string">&#x27;VueRouter&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;moment&#x27;</span>: <span class="string">&#x27;moment&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;axios&#x27;</span>: <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;element-ui&#x27;</span>: <span class="string">&#x27;ELEMENT&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//第三方插件--压缩代码</span></span><br><span class="line">        config.plugins.push(<span class="keyword">new</span> CompressionPlugin(&#123;</span><br><span class="line">            test: <span class="regexp">/\.js$|\.html$|.\css/</span>, <span class="comment">//匹配文件名</span></span><br><span class="line">            threshold: <span class="number">10240</span>, <span class="comment">//对超过10k的数据压缩</span></span><br><span class="line">            deleteOriginalAssets: <span class="literal">false</span> <span class="comment">//不删除源文件</span></span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//使打包时路由不会预先加载</span></span><br><span class="line">    chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        config.plugins.delete(<span class="string">&quot;prefetch&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="vue的import导入是指向index-包含vue-js文件"><a href="#vue的import导入是指向index-包含vue-js文件" class="headerlink" title="vue的import导入是指向index(包含vue js文件)"></a>vue的import导入是指向index(包含vue js文件)</h3><blockquote><p>可以多个组件写入components，使用index.js导出</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-view</span><br><span class="line"> -components</span><br><span class="line">    -one</span><br><span class="line">      -index.vue</span><br><span class="line">    -two</span><br><span class="line">      -index.vue</span><br><span class="line">    -index.js</span><br><span class="line"> -index.vue</span><br></pre></td></tr></table></figure><blockquote><p>index.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> One &#125; <span class="keyword">from</span> <span class="string">&#x27;./one&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> Two &#125; <span class="keyword">from</span> <span class="string">&#x27;./two&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>使用组件</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; One, Two &#125; <span class="keyword">from</span> <span class="string">&quot;./components&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="vuex的模块动态注入"><a href="#vuex的模块动态注入" class="headerlink" title="vuex的模块动态注入"></a>vuex的模块动态注入</h3><blockquote><p>index.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span></span><br><span class="line"><span class="keyword">const</span> modulesFiles = <span class="built_in">require</span>.context(<span class="string">&#x27;./modules&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.js$/</span>)</span><br><span class="line"><span class="keyword">const</span> modules = modulesFiles.keys().reduce(<span class="function">(<span class="params">modules, modulePath</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> moduleName = modulePath.replace(<span class="regexp">/^\.\/(.*)\.\w+$/</span>, <span class="string">&#x27;$1&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> value = modulesFiles(modulePath)</span><br><span class="line">  modules[moduleName] = value.default</span><br><span class="line">  <span class="keyword">return</span> modules</span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules,</span><br><span class="line">  getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="css的变量导出使用"><a href="#css的变量导出使用" class="headerlink" title="css的变量导出使用"></a>css的变量导出使用</h3><blockquote><p>less</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@blue:#324157;</span><br><span class="line">@light-blue:#3A71A8;</span><br><span class="line">:export &#123;</span><br><span class="line">    blue: @blue;</span><br><span class="line">    lightBlue: @light-blue;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p> index.vue使用</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :style&#x3D;&quot;&#123;background:variables.blue&#125;&quot;&gt;            &#123;&#123;variables.lightBlue&#125;&#125;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import variables from &quot;@&#x2F;styles&#x2F;variables.less&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    variables() &#123;</span><br><span class="line">      return variables;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="一个为了刷新页面的重定向vue"><a href="#一个为了刷新页面的重定向vue" class="headerlink" title="一个为了刷新页面的重定向vue"></a>一个为了刷新页面的重定向vue</h3><blockquote><p>可以再需要刷页面的地方使用，保留了路由以及query参数</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    const &#123; params, query &#125; &#x3D; this.$route</span><br><span class="line">    const &#123; path &#125; &#x3D; params</span><br><span class="line">    this.$router.replace(&#123; path: &#39;&#x2F;&#39; + path, query &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  render: function(h) &#123;</span><br><span class="line">    return h() &#x2F;&#x2F; avoid warning message</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="进度条的使用"><a href="#进度条的使用" class="headerlink" title="进度条的使用"></a>进度条的使用</h3><blockquote><p>在主vue文件中-app.vue</p><p>主要是监听路由的变化来生成进度条</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">    &lt;vue-progress-bar /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> VueProgressBar <span class="keyword">from</span> <span class="string">&#x27;vue-progressbar&#x27;</span> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components:&#123;VueProgressBar&#125;,</span><br><span class="line">  name: <span class="string">&quot;App&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$Progress.start();</span><br><span class="line">    <span class="built_in">this</span>.$router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$Progress.start();</span><br><span class="line">      next();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">this</span>.$router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$Progress.finish();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$Progress.finish();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="路由打包名称"><a href="#路由打包名称" class="headerlink" title="路由打包名称"></a>路由打包名称</h3><blockquote><p>webpackChunkName 可以指定在打包后的模块名称</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">  name: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">  component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(</span><br><span class="line">    <span class="comment">/* webpackChunkName: &quot;home&quot; */</span> <span class="string">&#x27;@/views/home/index.vue&#x27;</span></span><br><span class="line">  ),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue学习笔记</title>
      <link href="2020/03/19/vue-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/03/19/vue-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录vue中的独有的生命周期,语法糖</p></blockquote><span id="more"></span><h3 id="自定义v-model时间名及value"><a href="#自定义v-model时间名及value" class="headerlink" title="自定义v-model时间名及value"></a>自定义v-model时间名及value</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ParentComponent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">v-model</span>=<span class="string">&quot;pageTitle&quot;</span> /&gt;</span></span><br><span class="line">=========================================</span><br><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">:title</span>=<span class="string">&quot;pageTitle&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;pageTitle = $event&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ChildComponent.vue</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  model: &#123;</span><br><span class="line">    prop: <span class="string">&#x27;title&#x27;</span>,</span><br><span class="line">    event: <span class="string">&#x27;change&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    <span class="comment">// 这将允许 `value` 属性用于其他用途</span></span><br><span class="line">    value: <span class="built_in">String</span>,</span><br><span class="line">    <span class="comment">// 使用 `title` 代替 `value` 作为 model 的 prop</span></span><br><span class="line">    title: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&#x27;Default title&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="动态的指令参数"><a href="#动态的指令参数" class="headerlink" title="动态的指令参数"></a>动态的指令参数</h3><blockquote><p>事件可以动态绑定 根据动态生成的事件名去调用相同事件</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-button @[someEvent]&#x3D;&quot;handleSomeEvent()&quot;&#x2F;&gt;</span><br><span class="line">data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      ...</span><br><span class="line">      someEvent: variable ? &quot;click&quot; : &quot;dblclick&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="hookEvent（钩子事件监听）"><a href="#hookEvent（钩子事件监听）" class="headerlink" title="hookEvent（钩子事件监听）"></a>hookEvent（钩子事件监听）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;List @hook:updated&#x3D;&quot;handleTableUpdated&quot;&gt;&lt;&#x2F;List &gt;</span><br></pre></td></tr></table></figure><blockquote><p>监听销毁事件，提高代码可读性</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vm.$on(&#39;hooks:created&#39;, cb)</span><br><span class="line">vm.$once(&#39;hooks:created&#39;, cb)</span><br><span class="line">mounted()&#123;</span><br><span class="line">this.$on(&#39;hooks:beforeDestroy&#39;),()&#x3D;&gt;&#123;</span><br><span class="line">&#x2F;&#x2F;执行销毁事件的逻辑</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="v-cloak-解决页面闪烁问题"><a href="#v-cloak-解决页面闪烁问题" class="headerlink" title="v-cloak 解决页面闪烁问题"></a>v-cloak 解决页面闪烁问题</h3><blockquote><p>页面异步加载 Dom元素未渲染完毕时先隐藏 直到元素上关联实例结束编译</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; template 中</span><br><span class="line">&lt;div class&#x3D;&quot;#app&quot; v-cloak&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;value.name&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; css 中</span><br><span class="line">[v-cloak] &#123;</span><br><span class="line">    display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#39;my-component&#39;, &#123;</span><br><span class="line">  functional: true,</span><br><span class="line">  &#x2F;&#x2F; Props 是可选的</span><br><span class="line">  props: &#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F; 为了弥补缺少的实例</span><br><span class="line">  &#x2F;&#x2F; 提供第二个参数作为上下文</span><br><span class="line">  render: function (createElement, context) &#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="this-options-filters-使用定义好的filters"><a href="#this-options-filters-使用定义好的filters" class="headerlink" title="this.$options.filters(使用定义好的filters)"></a>this.$options.filters(使用定义好的filters)</h3><h3 id="声明式指令"><a href="#声明式指令" class="headerlink" title="声明式指令"></a>声明式指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 只能输入正整数,0-9的数字</span><br><span class="line">Vue.directive(&#39;enterIntNumber&#39;, &#123;</span><br><span class="line">  inserted: function (el) &#123;</span><br><span class="line">    let trigger &#x3D; (el, type) &#x3D;&gt; &#123;</span><br><span class="line">      const e &#x3D; document.createEvent(&#39;HTMLEvents&#39;)</span><br><span class="line">      e.initEvent(type, true, true)</span><br><span class="line">      el.dispatchEvent(e)</span><br><span class="line">    &#125;</span><br><span class="line">    el.addEventListener(&quot;keyup&quot;, function (e) &#123;</span><br><span class="line">      let input &#x3D; e.target;</span><br><span class="line">      let reg &#x3D; new RegExp(&#39;^\\d&#123;1&#125;\\d*$&#39;);  &#x2F;&#x2F;正则验证是否是数字</span><br><span class="line">      let correctReg &#x3D; new RegExp(&#39;\\d&#123;1&#125;\\d*&#39;);  &#x2F;&#x2F;正则获取是数字的部分</span><br><span class="line">      let matchRes &#x3D; input.value.match(reg);</span><br><span class="line">      if (matchRes &#x3D;&#x3D;&#x3D; null) &#123;</span><br><span class="line">        &#x2F;&#x2F; 若不是纯数字 把纯数字部分用正则获取出来替换掉</span><br><span class="line">        let correctMatchRes &#x3D; input.value.match(correctReg);</span><br><span class="line">        if (correctMatchRes) &#123;</span><br><span class="line">          input.value &#x3D; correctMatchRes[0];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          input.value &#x3D; &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      trigger(input, &#39;input&#39;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F;使用指令</span><br><span class="line">&lt;!--限制输入正整数--&gt;</span><br><span class="line">&lt;input v-enterIntNumber placeholder&#x3D;&quot;0&quot; type&#x3D;&quot;number&quot;&gt;</span><br><span class="line">来源于作者：Gopal</span><br><span class="line">原文链接：https:&#x2F;&#x2F;juejin.im&#x2F;post&#x2F;6872128694639394830</span><br></pre></td></tr></table></figure><h3 id="子组件传出单个参数时："><a href="#子组件传出单个参数时：" class="headerlink" title="子组件传出单个参数时："></a>子组件传出单个参数时：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;test&#x27;</span>,<span class="built_in">this</span>.param)</span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">@test=<span class="string">&#x27;test($event,userDefined)&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="子组件传出多个参数时："><a href="#子组件传出多个参数时：" class="headerlink" title="子组件传出多个参数时："></a>子组件传出多个参数时：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;test&#x27;</span>,<span class="built_in">this</span>.param1，<span class="built_in">this</span>.param2, <span class="built_in">this</span>.param3)</span><br><span class="line"><span class="comment">// 父组件 arguments 是以数组的形式传入</span></span><br><span class="line">@test=<span class="string">&#x27;test(arguments,userDefined)&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="对于异步请求的异常处理"><a href="#对于异步请求的异常处理" class="headerlink" title="对于异步请求的异常处理"></a>对于异步请求的异常处理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getUserPageData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//请求</span></span><br><span class="line">           <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">Promise</span>()/api请求</span><br><span class="line">        &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">            <span class="comment">// 失败的情况写在catch中</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="handler方法和immediate属性"><a href="#handler方法和immediate属性" class="headerlink" title="handler方法和immediate属性"></a>handler方法和immediate属性</h3><p>这里 watch 的一个特点是，最初绑定的时候是不会执行的，要等到 <code>firstName</code> 改变时才执行监听计算。那我们想要一开始就让他最初绑定的时候就执行改怎么办呢？我们需要修改一下我们的 watch 写法，修改过后的 watch 代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  firstName: &#123;</span><br><span class="line">    <span class="function"><span class="title">handler</span>(<span class="params">newName, oldName</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.fullName = newName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.lastName;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 代表在wacth里声明了firstName这个方法之后立即先去执行handler方法</span></span><br><span class="line">    immediate: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>注意到<code>handler</code>了吗，我们给 firstName 绑定了一个<code>handler</code>方法，之前我们写的 watch 方法其实默认写的就是这个<code>handler</code>，Vue.js会去处理这个逻辑，最终编译出来其实就是这个<code>handler</code>。</p><p>而<code>immediate:true</code>代表如果在 wacth 里声明了 firstName 之后，就会立即先去执行里面的handler方法，如果为 <code>false</code>就跟我们以前的效果一样，不会在绑定的时候就执行。</p><h3 id="解决导航栏重复点击跳转报错报错"><a href="#解决导航栏重复点击跳转报错报错" class="headerlink" title="解决导航栏重复点击跳转报错报错"></a>解决导航栏重复点击跳转报错报错</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> originalPush = Router.prototype.push;</span><br><span class="line">Router.prototype.push = <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> originalPush.call(<span class="built_in">this</span>, location).catch(<span class="function"><span class="params">err</span> =&gt;</span> err);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="在组件中监听滚动事件"><a href="#在组件中监听滚动事件" class="headerlink" title="在组件中监听滚动事件"></a>在组件中监听滚动事件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="built_in">window</span>.addEventListener(<span class="string">&quot;scroll&quot;</span>, <span class="built_in">this</span>.handleScroll, <span class="literal">true</span>);</span><br><span class="line"> &#125;,</span><br><span class="line"> methods: &#123;</span><br><span class="line">   <span class="function"><span class="title">handleScroll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#main&quot;</span>).scrollTop;</span><br><span class="line">     <span class="keyword">var</span> offsetTop = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#component&quot;</span>).offsetTop;</span><br><span class="line">     <span class="keyword">var</span> clientHeight = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#component&quot;</span>).clientHeight;</span><br><span class="line">     <span class="comment">//if (scrollTop - offsetTop - clientHeight + 500 &gt; 0) &#123;</span></span><br><span class="line">     <span class="comment">//   this.ForecastFixed = false;</span></span><br><span class="line">     <span class="comment">//  &#125; else if (scrollTop &gt; offsetTop - 50) &#123;</span></span><br><span class="line">     <span class="comment">//    this.ForecastFixed = true;</span></span><br><span class="line">     <span class="comment">//&#125; else &#123;</span></span><br><span class="line">     <span class="comment">//   this.ForecastFixed = false;</span></span><br><span class="line">     <span class="comment">//  &#125;</span></span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;   </span><br><span class="line"><span class="function"><span class="title">beforeDestroy</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="built_in">window</span>.removeEventListener(<span class="string">&quot;scroll&quot;</span>, <span class="built_in">this</span>.handleScroll, <span class="literal">true</span>);</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>在 window.addEventListener 的第三个参数加上true，<strong>默认值</strong>为 <strong>false, 即冒泡传递</strong>，当值为 <strong>true 时, 事件使用捕获</strong>传递。beforeDestroy销毁也需要加上此属性</p><h3 id="vue中对于页面刷新时事件的监听"><a href="#vue中对于页面刷新时事件的监听" class="headerlink" title="vue中对于页面刷新时事件的监听"></a>vue中对于页面刷新时事件的监听</h3><h4 id="使用原生的属性onbeforeunload"><a href="#使用原生的属性onbeforeunload" class="headerlink" title="使用原生的属性onbeforeunload"></a><strong>使用原生的属性</strong><code>onbeforeunload</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"> e = e || <span class="built_in">window</span>.event;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">// 兼容IE8和Firefox 4之前的版本</span></span><br><span class="line"> <span class="keyword">if</span> (e) &#123;</span><br><span class="line"> e.returnValue = <span class="string">&#x27;关闭提示&#x27;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">// Chrome, Safari, Firefox 4+, Opera 12+ , IE 9+</span></span><br><span class="line"> <span class="keyword">return</span> <span class="string">&#x27;关闭提示&#x27;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="在methods中定义事件"><a href="#在methods中定义事件" class="headerlink" title="在methods中定义事件"></a>在methods中定义事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line"> beforeunloadHandler (e) &#123;</span><br><span class="line"> <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="在-mounted-created-钩子中注册事件"><a href="#在-mounted-created-钩子中注册事件" class="headerlink" title="在 mounted,created 钩子中注册事件"></a>在 <code>mounted</code>,<code>created</code> 钩子中注册事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">this</span>.beforeunloadHandler(e))</span><br></pre></td></tr></table></figure><h4 id="在页面销毁destroyed-时清除监听"><a href="#在页面销毁destroyed-时清除监听" class="headerlink" title="在页面销毁destroyed 时清除监听"></a>在页面销毁<code>destroyed </code>时清除监听</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">destroyed</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">this</span>.beforeunloadHandler(e))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vue中使用的防抖和节流"><a href="#vue中使用的防抖和节流" class="headerlink" title="vue中使用的防抖和节流"></a>vue中使用的防抖和节流</h3><p>定义utils.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数防抖（debounce）</span></span><br><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> start = <span class="number">0</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (timeout !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(func, delay)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数节流(Throttle)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Throttle = <span class="function">(<span class="params">func, wait, trailing</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    <span class="keyword">if</span> ((now - start) &gt;= wait) &#123;</span><br><span class="line">        timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">        start = now</span><br><span class="line">        <span class="keyword">return</span> func()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!timer &amp;&amp; trailing) &#123;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            timer = <span class="literal">null</span></span><br><span class="line">            <span class="keyword">return</span> func</span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在组件中使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;debounce,Throrrle&#125; <span class="keyword">from</span> <span class="string">&quot;@/utils.js&quot;</span></span><br><span class="line"> debounce(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//执行的防抖函数，鼠标移动事件，输入框改变事件，请求报错事件</span></span><br><span class="line">      <span class="keyword">if</span> (error.response.status === <span class="number">400</span> || <span class="built_in">String</span>(error).indexOf(<span class="string">&#x27;code 400&#x27;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">            debounce(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                 Message.error(error.response.data.message)</span><br><span class="line">           &#125;, <span class="number">100</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error.response.data)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>this.$set  为了设置一个数组的新属性添加在vm上进行响应式</p><h3 id="Proxy（vue3的响应拦截）"><a href="#Proxy（vue3的响应拦截）" class="headerlink" title="Proxy（vue3的响应拦截）"></a>Proxy（vue3的响应拦截）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">key</span>)</span> &#123; &#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">key, value</span>)</span> &#123; &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="defineProperty-vue2的响应拦截"><a href="#defineProperty-vue2的响应拦截" class="headerlink" title="defineProperty(vue2的响应拦截)"></a>defineProperty(vue2的响应拦截)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://wang-z.gitee.io/img/vue-Observer.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/vue-Observer.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue实用技巧</title>
      <link href="2020/03/19/vue-%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
      <url>2020/03/19/vue-%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue使用过程的实用技巧</p></blockquote><span id="more"></span><h2 id="记录vue使用过程的实用技巧"><a href="#记录vue使用过程的实用技巧" class="headerlink" title="记录vue使用过程的实用技巧"></a>记录vue使用过程的实用技巧</h2><h2 id="浏览器控制台调试数据"><a href="#浏览器控制台调试数据" class="headerlink" title="浏览器控制台调试数据"></a>浏览器控制台调试数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window.vue &#x3D; this</span><br><span class="line">&#x2F;&#x2F;页面显示</span><br><span class="line"> process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &quot;development&quot;?Vue.prototype.$log &#x3D; window.console.log:&#39;&#39;;</span><br><span class="line">&#x2F;&#x2F; 组件内部</span><br><span class="line">&lt;div&gt;&#123;&#123;$log(info)&#125;&#125;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><h3 id="Vue中对于style属性和class属性的使用"><a href="#Vue中对于style属性和class属性的使用" class="headerlink" title="Vue中对于style属性和class属性的使用"></a>Vue中对于style属性和class属性的使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常</span></span><br><span class="line">&lt;div style=<span class="string">&quot;width:100px&quot;</span>&gt;</span><br><span class="line">    style</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="comment">//骚操作</span></span><br><span class="line"><span class="comment">//对象写法</span></span><br><span class="line">&lt;div :style=<span class="string">&quot;&#123;width:&#x27;200px&#x27;,&#x27;text-align&#x27;:center,color: activeColor, fontSize: fontSize + &#x27;px&#x27;,color:(index==0?arr.conFontColor:&#x27;#000&#x27;)&#125;&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError, active: this.isActive &amp;&amp; !this.error,&#x27;text-danger&#x27;: this.error &amp;&amp; this.error.type === &#x27;fatal&#x27; &#125;&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="comment">//切换样式写法</span></span><br><span class="line">&lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;isActive == true ? &#x27;isFixed&#x27; :&#x27;&#x27;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[isActive ? activeClass : &#x27;&#x27;, errorClass]&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[&#123; active: isActive &#125;, errorClass]&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="comment">//数组语法</span></span><br><span class="line">&lt;div :style=<span class="string">&quot;[&#123;width:&#x27;100px&#x27;,&#x27;text-align&#x27;:center, fontSize: 100 + &#x27;px&#x27;,color:(index==0?arr.conFontColor:&#x27;#000&#x27;)&#125;,&#123;width:&#x27;200px&#x27;,&#x27;text-align&#x27;:center,color: activeColor, fontSize: fontSize + &#x27;px&#x27;,color:(index==0?arr.conFontColor:&#x27;#000&#x27;)&#125;]&quot;</span>&gt;</span><br><span class="line">    style</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="comment">//一个属性多个值时</span></span><br><span class="line">&lt;div :style=<span class="string">&quot;&#123; display: [&#x27;-webkit-box&#x27;, &#x27;-ms-flexbox&#x27;, &#x27;flex&#x27;] &#125;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">data: &#123;</span><br><span class="line">  activeColor: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">  fontSize: <span class="number">30</span></span><br><span class="line">&#125;</span><br><span class="line">data: &#123;</span><br><span class="line">  isActive: <span class="literal">true</span>,</span><br><span class="line">  hasError: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vue中对watch的利用"><a href="#vue中对watch的利用" class="headerlink" title="vue中对watch的利用"></a>vue中对watch的利用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="string">&quot;planForm.number&quot;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 解决数字键盘可以输入输入多个小数点问题</span></span><br><span class="line">    <span class="keyword">if</span> (newVal == <span class="string">&quot;&quot;</span> &amp;&amp; oldVal.toString().indexOf(<span class="string">&quot;.&quot;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.planForm.number = oldVal;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保留两位小数</span></span><br><span class="line">    <span class="keyword">if</span> (newVal) &#123;</span><br><span class="line">      newVal = newVal.toString();</span><br><span class="line">      <span class="keyword">var</span> pointIndex = newVal.indexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">      <span class="comment">//不出现两位小数点</span></span><br><span class="line">      <span class="keyword">if</span> (newVal.toString().lastIndexOf(<span class="string">&quot;.&quot;</span>) &gt; pointIndex) &#123;</span><br><span class="line">        <span class="built_in">this</span>.planForm.number = oldVal;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (pointIndex &gt; <span class="number">0</span> &amp;&amp; newVal.length - pointIndex &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.planForm.number = oldVal;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ue-elementUI使用笔记</title>
      <link href="2020/03/18/vue-elementUI%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
      <url>2020/03/18/vue-elementUI%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue-elementUI的使用记录</p></blockquote><span id="more"></span><h2 id="vue-elementUI使用笔记"><a href="#vue-elementUI使用笔记" class="headerlink" title="vue-elementUI使用笔记"></a>vue-elementUI使用笔记</h2><h3 id="elementUI的具名插槽"><a href="#elementUI的具名插槽" class="headerlink" title="elementUI的具名插槽"></a>elementUI的具名插槽</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-input placeholder=<span class="string">&quot;请输入&quot;</span> v-model.number=<span class="string">&quot;data.number&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-with-select&quot;</span>&gt;</span><br><span class="line">      &lt;el-button slot=<span class="string">&quot;prepend&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;budget&quot;</span> icon=<span class="string">&quot;el-icon-search&quot;</span>&gt;搜索&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button slot=<span class="string">&quot;append&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;budget&quot;</span> icon=<span class="string">&quot;el-icon-search&quot;</span>&gt;搜索&lt;/el-button&gt;</span><br><span class="line">&lt;/el-input&gt;</span><br></pre></td></tr></table></figure><p>slot=”preprend” 在输入框前面插入按钮(可以对应jQuery中的逻辑的prepend() 方法在被选元素的开头（仍位于内部）插入指定内容）</p><p>slot=”append” 在输入框后面面插入按钮(可以对应jQuery中的逻辑的append() 方法在被选元素的结尾（仍然在内部）插入指定内容）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item&gt;</span><br><span class="line">  &lt;span slot=<span class="string">&quot;label&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;tabs&quot;</span>&gt;</span><br><span class="line">    &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-icon-date&quot;</span>&gt;&lt;/i&gt;</span><br><span class="line">      表单项名</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">    &lt;el-input v-model=<span class="string">&quot;vlue&quot;</span>&gt;&lt;/el-input&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tab-pane name=<span class="string">&quot;keywords&quot;</span>&gt;</span><br><span class="line">    &lt;span slot=<span class="string">&quot;label&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;tabs&quot;</span>&gt;</span><br><span class="line">        &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-icon-date&quot;</span>&gt;&lt;/i&gt;</span><br><span class="line">       关键词</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br></pre></td></tr></table></figure><p>对于一些弹出框 气泡 tooltip 都需要一个参考(reference)的标签进行提示  实际作用是作为弹出框的position的绝对定位的相对定位(根据此标签进行绝对定位)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-popover</span><br><span class="line">      placement=<span class="string">&quot;top&quot;</span></span><br><span class="line">      title=<span class="string">&quot;标题</span></span><br><span class="line"><span class="string">      width=&quot;</span><span class="number">200</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">      trigger=&quot;</span>hover<span class="string">&quot;</span></span><br><span class="line"><span class="string">      content=&quot;</span>展示内容</span><br><span class="line">&gt;</span><br><span class="line">      &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;iconfont icon-wenhao&quot;</span> slot=<span class="string">&quot;reference&quot;</span>&gt;&lt;/i&gt;</span><br><span class="line">&lt;/el-popover&gt;</span><br></pre></td></tr></table></figure><h3 id="table表格"><a href="#table表格" class="headerlink" title="table表格"></a>table表格</h3><h4 id="渲染问题"><a href="#渲染问题" class="headerlink" title="渲染问题"></a>渲染问题</h4><p>table表格是根据数据源进行渲染,当你需要在请求后再次渲染数据</p><p>只需要注意对于数据源的深拷贝就可以让table组件进行再次渲染数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &lt;CustomTable</span><br><span class="line">    :dataSources&#x3D;&quot;tableData&quot;</span><br><span class="line">    :totalNumber&#x3D;&quot;totalNumber&quot;</span><br><span class="line">    @loadData&#x3D;&quot;handelGetList&quot;</span><br><span class="line">    v-loading&#x3D;&quot;loading&quot;</span><br><span class="line">&#x2F;&gt;</span><br></pre></td></tr></table></figure><p>当第一次请求已经得到数据 tableData时,再次发送请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = <span class="keyword">await</span> getData(params)</span><br><span class="line"><span class="comment">//已经赋值数据，table已渲染</span></span><br><span class="line"><span class="built_in">this</span>.tableData = data.list;</span><br><span class="line"><span class="comment">//暂存一下数据</span></span><br><span class="line"><span class="keyword">let</span> tempArr = data.list;</span><br><span class="line">getOtherData(params).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">     tempArr = &#123; ...res, ...tempArr &#125;;</span><br><span class="line">    <span class="comment">//深拷贝的方法，但是只适合数据结构嵌套不深的数据，slice和JSON都可以对数据进行深拷贝</span></span><br><span class="line">     <span class="comment">// this.tableData = JSON.parse(JSON.stringify(tempArr));</span></span><br><span class="line">    <span class="comment">// this.tableData = tempArr.slice(0, tempArr.length);</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="select选择器"><a href="#select选择器" class="headerlink" title="select选择器"></a>select选择器</h3><h4 id="v-model取值为当前对象"><a href="#v-model取值为当前对象" class="headerlink" title="v-model取值为当前对象"></a>v-model取值为当前对象</h4><p>当选择的数据需要options选中的label对应的对象数据时，使用value-key</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-select</span><br><span class="line">   v-model&#x3D;&quot;value&quot;</span><br><span class="line">   placeholder&#x3D;&quot;请选择广告主&quot;</span><br><span class="line">   value-key&#x3D;&quot;id&quot;</span><br><span class="line"> &gt;</span><br><span class="line">   &lt;el-option</span><br><span class="line">     v-for&#x3D;&quot;item in options&quot;</span><br><span class="line">     :key&#x3D;&quot;item.id&quot;</span><br><span class="line">     :label&#x3D;&quot;item.name&quot;</span><br><span class="line">     :value&#x3D;&quot;item&quot;</span><br><span class="line">   &gt;&lt;&#x2F;el-option&gt;</span><br><span class="line"> &lt;&#x2F;el-select&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;在data中定义options属性，当组件有多个选择器 可以将数据源options抽离</span><br><span class="line">&#x2F;&#x2F;使用as可自定义属性名 </span><br><span class="line">&#x2F;&#x2F;import * as Options from &quot;@&#x2F;assets&#x2F;OPTIONS&#x2F;options.js&quot;;</span><br><span class="line">import &#123;Options&#125; from &quot;@&#x2F;assets&#x2F;OPTIONS&#x2F;options.js&quot;;</span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">  Options</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当使用select组件的远程搜索且多选时，组件的再次搜索会令前面的组件显示为value实际id</p><h4 id="使用reduce保存旧值"><a href="#使用reduce保存旧值" class="headerlink" title="使用reduce保存旧值"></a>使用reduce保存旧值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-select</span><br><span class="line">  v-model=<span class="string">&quot;data&quot;</span></span><br><span class="line">  multiple</span><br><span class="line">  filterable</span><br><span class="line">  clearable</span><br><span class="line">  remote</span><br><span class="line">  reserve-keyword</span><br><span class="line">  value-key=<span class="string">&quot;id&quot;</span></span><br><span class="line">  placeholder=<span class="string">&quot;请输入搜索词&quot;</span></span><br><span class="line">  :remote-method=<span class="string">&quot;remoteMethod&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">  &lt;el-option</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;item in options&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;item.id&quot;</span></span><br><span class="line">    :label=<span class="string">&quot;item.name&quot;</span></span><br><span class="line">    :value=<span class="string">&quot;item&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &lt;span style=<span class="string">&quot;float:left&quot;</span>&gt;&#123;&#123;item.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/el-option&gt;</span><br><span class="line">&lt;/el-select&gt;</span><br><span class="line"> methods: &#123;</span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">remoteMethod</span>(<span class="params">query</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (query !== <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> params = &#123;</span><br><span class="line">          name: query</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> query = <span class="keyword">await</span> QueryData(params).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> res;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">var</span> TempObj = &#123;&#125;;</span><br><span class="line">        <span class="built_in">this</span>.options = [...query, ...this.data].reduce(</span><br><span class="line">          (item, next) =&gt; &#123;</span><br><span class="line">            TempObj[next.id]</span><br><span class="line">              ? <span class="string">&quot;&quot;</span></span><br><span class="line">              : (TempObj[next.id] = <span class="literal">true</span> &amp;&amp; item.push(next));</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">          &#125;,</span><br><span class="line">          []</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.options = [];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="form表单"><a href="#form表单" class="headerlink" title="form表单"></a>form表单</h3><h4 id="el-input-使用-回车键会刷新页面的问题"><a href="#el-input-使用-回车键会刷新页面的问题" class="headerlink" title="el-input 使用 回车键会刷新页面的问题"></a>el-input 使用 回车键会刷新页面的问题</h4><blockquote><p>当el-form内只存在一个el-input时，在输入框内回车会自动触发页面提交功能，产生刷新页面行为，需要阻止当前行为;</p><p>解决方法：<code>el-form</code>添加<code>@submit.native.prevent</code>阻止表单提交的默认行为</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="表单验证规则"><a href="#表单验证规则" class="headerlink" title="表单验证规则"></a>表单验证规则</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form</span><br><span class="line">  :model&#x3D;&quot;Form&quot;</span><br><span class="line">  :rules&#x3D;&quot;rules&quot;</span><br><span class="line">  ref&#x3D;&quot;Form&quot;</span><br><span class="line">  label-width&#x3D;&quot;150px&quot;</span><br><span class="line">  v-loading&#x3D;&quot;loading&quot;</span><br><span class="line">&gt;</span><br><span class="line"> &lt;el-form-item label&#x3D;&quot;显示名&quot; prop&#x3D;&quot;data.key&quot; class&#x3D;&quot;custom&quot;&gt;</span><br><span class="line">   &lt;el-select</span><br><span class="line">    v-model&#x3D;&quot;value&quot;</span><br><span class="line">    placeholder&#x3D;&quot;请选择广告主&quot;</span><br><span class="line">    value-key&#x3D;&quot;id&quot;</span><br><span class="line">   &gt;</span><br><span class="line">    &lt;el-option</span><br><span class="line">     v-for&#x3D;&quot;item in options&quot;</span><br><span class="line">     :key&#x3D;&quot;item.id&quot;</span><br><span class="line">     :label&#x3D;&quot;item.name&quot;</span><br><span class="line">     :value&#x3D;&quot;item&quot;</span><br><span class="line">    &gt;&lt;&#x2F;el-option&gt;</span><br><span class="line">  &lt;&#x2F;el-select&gt;</span><br><span class="line"> &lt;&#x2F;el-form-item&gt;</span><br><span class="line">&lt;&#x2F;el-form&gt;</span><br></pre></td></tr></table></figure><blockquote><p>当表单是动态加载时或验证的属性时数组对象时</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!-- el-form的data属性为obj prop的属性为 obj.content<span class="number">.0</span> --&gt;</span><br><span class="line">&lt;el-form-item :prop=<span class="string">&quot;&#x27;content.&#x27; + index&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(item, index) in content&quot;</span> :key=<span class="string">&quot;item.id&quot;</span>&gt;</span><br><span class="line">          &lt;el-row <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span> :gutter=<span class="string">&quot;20&quot;</span>&gt;</span><br><span class="line">            &lt;el-col :span=<span class="string">&quot;i.span&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;i in tableHead&quot;</span> :key=<span class="string">&quot;i.key&quot;</span>&gt;</span><br><span class="line">              &lt;span v-<span class="keyword">if</span>=<span class="string">&quot;i.key == &#x27;number&#x27;&quot;</span> style=<span class="string">&quot;line-height:32px&quot;</span>&gt;&#123;&#123; index + <span class="number">1</span> &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;!-- el-form-item内的el-form-item需要触发验证规则且提示则需要在:prop=<span class="string">&quot;&#x27;content.&#x27; + index + &#x27;.name&#x27;&quot;</span>--&gt;   </span><br><span class="line">              &lt;!-- rules规则提供验证且validator的value参数为当前输入的表单 obj.content<span class="number">.0</span>.name--&gt;   </span><br><span class="line">              &lt;el-form-item</span><br><span class="line">                :prop=<span class="string">&quot;&#x27;content.&#x27; + index + &#x27;.name&#x27;&quot;</span></span><br><span class="line">                v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">&quot;i.key == &#x27;name&#x27;&quot;</span></span><br><span class="line">                :rules=<span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">                  required: true,</span></span><br><span class="line"><span class="string">                  message: &#x27;name&#x27; + $t(&#x27;rule.required&#x27;),</span></span><br><span class="line"><span class="string">                  trigger: &#x27;blur&#x27;</span></span><br><span class="line"><span class="string">                &#125;&quot;</span></span><br><span class="line">              &gt;</span><br><span class="line">                &lt;base-input v-model=<span class="string">&quot;item.name&quot;</span>&gt;&lt;/base-input&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item</span><br><span class="line">                :prop=<span class="string">&quot;&#x27;content.&#x27; + index + &#x27;.email&#x27;&quot;</span></span><br><span class="line">                v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">&quot;i.key == &#x27;email&#x27;&quot;</span></span><br><span class="line">                :rules=<span class="string">&quot;&#123;</span></span><br><span class="line"><span class="string">                  required: true,</span></span><br><span class="line"><span class="string">                  validator: FormRule.email,</span></span><br><span class="line"><span class="string">                  trigger: &#x27;blur&#x27;</span></span><br><span class="line"><span class="string">                &#125;&quot;</span></span><br><span class="line">              &gt;</span><br><span class="line">                &lt;base-input v-model=<span class="string">&quot;item.email&quot;</span>&gt;&lt;/base-input&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure><p>rules.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> rules = &#123;</span><br><span class="line">    <span class="comment">//当from中的数据level为一层 Form：&#123;one：&quot;1&quot;&#125;</span></span><br><span class="line">    one：: [&#123;</span><br><span class="line">        required: <span class="literal">true</span>,</span><br><span class="line">        message: <span class="string">&#x27;请选择&#x27;</span>,</span><br><span class="line">        trigger: <span class="string">&#x27;change&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">    <span class="comment">//当数据为多层时。 Form:&#123;first:&#123;secend:&#x27;1&#x27;&#125;&#125; 需要在el-form-item标签中定义 prop=&quot;first.secend&quot;</span></span><br><span class="line">    <span class="string">&quot;first.secend&quot;</span>: [&#123;</span><br><span class="line">        required: <span class="literal">true</span>,</span><br><span class="line">        message: <span class="string">&#x27;请选择&#x27;</span>,</span><br><span class="line">        trigger: <span class="string">&#x27;change&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如何解决rule验证规则在提示后切换影响其他验证规则(实际是验证规则会在el-form-item标签下生成一个div 提示el-form-item__error 但是在渲染时候v-if判断某个条件时无法再次重渲染)</span><br><span class="line">在el-form-item上加入  :key=&quot;ruleskeys&quot; data定义为 ruleskeys：1 其他受影响的加上 :key=&quot;ruleskeys+1&quot;</span><br><span class="line">在保证key值不一致的情况下 当v-if判断后会重新渲染</span><br></pre></td></tr></table></figure><h3 id="dialog对话框"><a href="#dialog对话框" class="headerlink" title="dialog对话框"></a>dialog对话框</h3><h4 id="对话框显示隐藏"><a href="#对话框显示隐藏" class="headerlink" title="对话框显示隐藏"></a>对话框显示隐藏</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog :visible=<span class="string">&quot;ShowdialogVisible&quot;</span>  @hideDialog=<span class="string">&quot;ShowdialogVisible = false&quot;</span>/&gt;</span><br><span class="line"><span class="comment">//组件内</span></span><br><span class="line"> &lt;el-dialog title=<span class="string">&quot;标题&quot;</span> :visible.sync=<span class="string">&quot;showDialog&quot;</span> width=<span class="string">&quot;500px&quot;</span> @closed=<span class="string">&quot;$emit(&#x27;hideDialog&#x27;)&quot;</span>&gt;&lt;/el-dialog&gt;</span><br><span class="line"> props: &#123;</span><br><span class="line">    visible: <span class="built_in">Boolean</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      showDialog: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="vue计算属性实现Table表格模糊搜索（表格数据源不变）"><a href="#vue计算属性实现Table表格模糊搜索（表格数据源不变）" class="headerlink" title="vue计算属性实现Table表格模糊搜索（表格数据源不变）"></a>vue计算属性实现Table表格模糊搜索（表格数据源不变）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-input placeholder&#x3D;&quot;请输入名称或ID&quot; v-model&#x3D;&quot;search&quot; class&#x3D;&quot;input-with-select&quot;&gt;</span><br><span class="line">      &lt;el-button slot&#x3D;&quot;append&quot; icon&#x3D;&quot;el-icon-search&quot;&gt;搜索&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      ref&#x3D;&quot;multipleTable&quot;</span><br><span class="line">      :data&#x3D;&quot;tables&quot;</span><br><span class="line">      height&#x3D;&quot;280&quot;</span><br><span class="line">      tooltip-effect&#x3D;&quot;light&quot;</span><br><span class="line">      row-key&#x3D;&quot;id&quot;</span><br><span class="line">     &gt;</span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;名字&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; scope.row.name &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    &lt;&#x2F;el-table&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">computed: &#123;</span><br><span class="line"> &#x2F;&#x2F; 模糊搜索</span><br><span class="line">    tables() &#123;</span><br><span class="line">      const search &#x3D; this.search;</span><br><span class="line">      if (search) &#123;&#x2F;&#x2F;判断搜索单词是否为空</span><br><span class="line">        &#x2F;&#x2F;返回搜索后的数组</span><br><span class="line">        return this.tableData.filter(data &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F;检索数组内的对象每一个键值 </span><br><span class="line">        &#x2F;&#x2F;当有一个键值indexOf(字符串搜索下标)大于0返回这个对象为true，</span><br><span class="line">        &#x2F;&#x2F;filter函数判断true则通过对象，false则过滤对象</span><br><span class="line">        &#x2F;&#x2F;.toLowerCase().indexOf(search) &gt; -1 不区分大小写</span><br><span class="line">          return Object.keys(data).some(key &#x3D;&gt; &#123;</span><br><span class="line">            return (</span><br><span class="line">              String(data[key])</span><br><span class="line">                .toLowerCase()</span><br><span class="line">                .indexOf(search) &gt; -1</span><br><span class="line">            );</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#x2F;&#x2F;数据为空时返回全部数据</span><br><span class="line">      return this.tableData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      tableData: [&#123;id:0,name:&quot;hello&quot;，id:1,name:&#39;words&#39;&#125;],</span><br><span class="line">      search: &quot;&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>计算属性是基于它们的响应式依赖进行缓存的</strong><br>因此，每当search改变时，触发computed-&gt;tables使用filter函数返回一个新的数组赋值到Table表格的data数据源</p><h3 id="Cascader-级联选择器"><a href="#Cascader-级联选择器" class="headerlink" title="Cascader 级联选择器"></a>Cascader 级联选择器</h3><blockquote><p>当你配置了props存在disabled 那么在搜索时将不会显示disabled为true</p><p>搜索只能是disabled为false</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
            <tag> elementUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node-koa2学习笔记</title>
      <link href="2020/01/18/node-koa2%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2020/01/18/node-koa2%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录node-koa2服务器开发中好用的方法和技巧</p></blockquote><span id="more"></span><h2 id="全局处理函数异常"><a href="#全局处理函数异常" class="headerlink" title="全局处理函数异常"></a>全局处理函数异常</h2><blockquote><p>使用中间件对于抛出异常的处理</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  middlewares\exception.js</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpException</span> <span class="keyword">extends</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">msg = <span class="string">&#x27;服务器错误&#x27;</span>, errorCode = <span class="number">10000</span>, code = <span class="number">400</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">    <span class="built_in">this</span>.errorCode = errorCode</span><br><span class="line">    <span class="built_in">this</span>.code = code</span><br><span class="line">    <span class="built_in">this</span>.msg = msg</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//const &#123; HttpException &#125; = require(&#x27;../core/http-exception&#x27;)</span></span><br><span class="line"><span class="comment">// 统一处理异常中间件</span></span><br><span class="line"><span class="keyword">const</span> catchError = <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> next()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// 不是 HttpException 的情况下且在开发环境，错误抛出</span></span><br><span class="line">    <span class="keyword">const</span> isHttpException = error <span class="keyword">instanceof</span> HttpException</span><br><span class="line">    <span class="keyword">const</span> isDev = <span class="built_in">global</span>.config.environment === <span class="string">&#x27;dev&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (isDev &amp;&amp; !isHttpException) &#123;</span><br><span class="line">      <span class="keyword">throw</span> error</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isHttpException) &#123;</span><br><span class="line">      ctx.body = &#123;</span><br><span class="line">        msg: error.msg,</span><br><span class="line">        error_code: error.errorCode,</span><br><span class="line">        request: <span class="string">`<span class="subst">$&#123;ctx.method&#125;</span> <span class="subst">$&#123;ctx.path&#125;</span>`</span>,</span><br><span class="line">      &#125;</span><br><span class="line">      ctx.status = error.code</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ctx.body = &#123;</span><br><span class="line">        msg: <span class="string">&#x27;抱歉，未知的错误&#x27;</span>,</span><br><span class="line">        error_code: <span class="number">999</span>,</span><br><span class="line">        request: <span class="string">`<span class="subst">$&#123;ctx.method&#125;</span> <span class="subst">$&#123;ctx.path&#125;</span>`</span>,</span><br><span class="line">      &#125;</span><br><span class="line">      ctx.status = <span class="number">500</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = catchError</span><br></pre></td></tr></table></figure><blockquote><p>中间件注册app.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> catchError = <span class="built_in">require</span>(<span class="string">&#x27;./middlewares/exception&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="comment">//全局异常处理放在所有中间件最顶层</span></span><br><span class="line">app.use(catchError)</span><br><span class="line">app.listen(<span class="number">10086</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
            <tag> koa2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript的变量以及数据类型</title>
      <link href="2020/01/09/js-%E5%8F%98%E9%87%8F%E5%92%8Cjs%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>2020/01/09/js-%E5%8F%98%E9%87%8F%E5%92%8Cjs%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JavaScript数据类型的区别，转换，隐藏bug</p></blockquote><span id="more"></span><h2 id="一、JavaScript数据类型"><a href="#一、JavaScript数据类型" class="headerlink" title="一、JavaScript数据类型"></a>一、JavaScript数据类型</h2><p>ECMAScript标准规定了<code>7</code>种数据类型，其把这<code>7</code>种数据类型又分为两种：原始类型和对象类型。</p><h3 id="原始类型"><a href="#原始类型" class="headerlink" title="原始类型"></a><strong>原始类型</strong></h3><ul><li><code>Null</code>：只包含一个值：<code>null</code></li><li><code>Undefined</code>：只包含一个值：<code>undefined</code></li><li><code>Boolean</code>：包含两个值：<code>true</code>和<code>false</code></li><li><code>Number</code>：整数或浮点数，还有一些特殊值（<code>-Infinity</code>、<code>+Infinity</code>、<code>NaN</code>）</li><li><code>String</code>：一串表示文本值的字符序列</li><li><code>Symbol</code>：一种实例是唯一且不可改变的数据类型</li></ul><p>(在<code>es10</code>中加入了第七种原始类型<code>BigInt</code>，现已被最新<code>Chrome</code>支持)</p><h3 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a><strong>对象类型</strong></h3><ul><li><p><code>Object</code>：自己分一类丝毫不过分，除了常用的<code>Object</code>，<code>Array</code>、<code>Function</code>等都属于特殊的对象</p><blockquote><p>区分原始类型和对象类型 - 不可变性</p></blockquote></li></ul><p>原始类型存放在栈空间中，而复杂类型存放在堆空间中</p><h3 id="栈内存："><a href="#栈内存：" class="headerlink" title="栈内存："></a>栈内存：</h3><ul><li>存储的值大小固定</li><li>空间较小</li><li>可以直接操作其保存的变量，运行效率高</li><li>由系统自动分配存储空间</li></ul><h3 id="堆内存："><a href="#堆内存：" class="headerlink" title="堆内存："></a>堆内存：</h3><ul><li>存储的值大小不定，可动态调整</li><li>空间较大，运行效率低</li><li>无法直接操作其内部存储，使用引用地址读取</li><li>通过代码进行分配空间</li></ul><h4 id="字符串-具备不可变性"><a href="#字符串-具备不可变性" class="headerlink" title="字符串 具备不可变性"></a><code>字符串 具备不可变性</code></h4><p>不管是字符串的裁切splice 还是 toLowerCase 都是在原有的基础上产生新的字符串</p><p><code>JavaScript</code>中的原始类型的值被直接存储在栈中，在变量定义时，栈就为其分配好了内存空间。</p><p>由于栈中的内存空间的大小是固定的，那么注定了存储在栈中的变量就是不可变的</p><h4 id="对象-具备可变性"><a href="#对象-具备可变性" class="headerlink" title="对象 具备可变性"></a><code>对象 具备可变性</code></h4><p>引用类型的值实际存储在堆内存中，它在栈中只存储了一个固定长度的地址，这个地址指向堆内存中的值。</p><p>数组  是一个复杂（引用）类型</p><h4 id="通过一些api可以改变数组"><a href="#通过一些api可以改变数组" class="headerlink" title="通过一些api可以改变数组"></a>通过一些api可以改变数组</h4><ul><li><code>pop()</code> 删除数组最后一个元素，如果数组为空，则不改变数组，返回undefined，改变原数组，返回被删除的元素</li><li><code>push()</code>向数组末尾添加一个或多个元素，改变原数组，返回新数组的长度</li><li><code>shift()</code>把数组的第一个元素删除，若空数组，不进行任何操作，返回undefined,改变原数组，返回第一个元素的值</li><li><code>unshift()</code>向数组的开头添加一个或多个元素，改变原数组，返回新数组的长度</li><li><code>reverse()</code>颠倒数组中元素的顺序，改变原数组，返回该数组</li><li><code>sort()</code>对数组元素进行排序，改变原数组，返回该数组</li><li><code>splice()</code>从数组中添加/删除项目，改变原数组，返回被删除的元素</li></ul><p>当我们进行复制时两者有着本质的区别</p><p>这里涉及到浅拷贝和深拷贝—本质是复制时是否改变复制的对象的数值或属性或方法</p><h4 id="原始类型-1"><a href="#原始类型-1" class="headerlink" title="原始类型"></a>原始类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;wang&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> newName = name;</span><br><span class="line">newName = <span class="string">&#x27;Mr.wang&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// =&gt;wang</span></span><br><span class="line"><span class="built_in">console</span>.log(newName) <span class="comment">// =&gt;Mr.wang</span></span><br></pre></td></tr></table></figure><p>内存中有一个变量<code>name</code>，值为<code>wang</code>。我们从变量<code>name</code>复制出一个变量<code>newName</code>，此时在内存中创建了一个块新的空间用于存储<code>wang</code>，虽然两者值是相同的，但是两者指向的内存空间完全不同，这两个变量参与任何操作都互不影响。</p><h4 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">&#x27;wang&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> newObj = obj;</span><br><span class="line">newObj.name = <span class="string">&#x27;Mr.wang&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name) <span class="comment">//=&gt; Mr.wang</span></span><br><span class="line"><span class="built_in">console</span>.log(newObj.name)<span class="comment">//=&gt; Mr.wang</span></span><br></pre></td></tr></table></figure><p>当我们复制引用类型的变量时，实际上复制的是栈中存储的地址，所以复制出来的<code>newObj</code>实际上和<code>obj</code>指向的堆中同一个对象。因此，我们改变其中任何一个变量的值，另一个变量都会受到影响，这就是为什么会有深拷贝和浅拷贝的原因。</p><h3 id="原始类型和引用类型的比较"><a href="#原始类型和引用类型的比较" class="headerlink" title="原始类型和引用类型的比较"></a>原始类型和引用类型的比较</h3><p>原始类型，比较时会直接比较它们的值，如果值相等，即返回<code>true</code>。</p><p>引用类型，比较时会比较它们的引用地址，虽然两个变量在堆中存储的对象具有的属性值都是相等的，但是它们被存储在了不同的存储空间，因此比较值为<code>false</code>。</p><h4 id="区分null和undefined"><a href="#区分null和undefined" class="headerlink" title="区分null和undefined"></a>区分null和undefined</h4><p><strong>null</strong></p><p>表示被赋值过的对象，刻意把一个对象赋值为<code>null</code>，故意表示其为空，不应有值。</p><p>所以对象的某个属性值为<code>null</code>是正常的，<code>null</code>转换为数值时值为<code>0</code>。</p><p><strong>undefined</strong></p><p>表示“缺少值”，即此处应有一个值，但还没有定义，</p><p>如果一个对象的某个属性值为<code>undefined</code>，这是不正常的，如<code>obj.name=undefined</code>，我们不应该这样写，应该直接<code>delete obj.name</code>。</p><p><code>undefined</code>转为数值时为<code>NaN</code>(非数字值的特殊值)<img src="https://wang-z.gitee.io/img/null+undefined.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/null+undefined.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="nullAndundefined.png"></p><p><code>JavaScript</code>是一门动态类型语言，成员除了表示存在的空值外，还有可能根本就不存在（因为存不存在只在运行期才知道），这就是<code>undefined</code>的意义所在。对于<code>JAVA</code>这种强类型语言，如果有<code>&quot;undefined&quot;</code>这种情况，就会直接编译失败，所以在它不需要一个这样的类型。</p><h4 id="你想不到的0-1-0-2≠0-3"><a href="#你想不到的0-1-0-2≠0-3" class="headerlink" title="你想不到的0.1+0.2≠0.3"></a>你想不到的0.1+0.2≠0.3</h4><blockquote><p>本质是：由于数字在js中的计算是先转换为二进制在进行计算的，然后以十进制输出（大部分语言都有这个问题，是cpu计算二进制的问题）</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">judgeFloat</span>(<span class="params">n, m</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> binaryN = n.toString(<span class="number">2</span>);</span><br><span class="line">      <span class="keyword">const</span> binaryM = m.toString(<span class="number">2</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;n&#125;</span>的二进制是    <span class="subst">$&#123;binaryN&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;m&#125;</span>的二进制是    <span class="subst">$&#123;binaryM&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">const</span> MN = m + n;</span><br><span class="line">      <span class="keyword">const</span> accuracyMN = (m * <span class="number">100</span> + n * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line">      <span class="keyword">const</span> binaryMN = MN.toString(<span class="number">2</span>);</span><br><span class="line">      <span class="keyword">const</span> accuracyBinaryMN = accuracyMN.toString(<span class="number">2</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;n&#125;</span>+<span class="subst">$&#123;m&#125;</span>的二进制是<span class="subst">$&#123;binaryMN&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;accuracyMN&#125;</span>的二进制是    <span class="subst">$&#123;accuracyBinaryMN&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;n&#125;</span>+<span class="subst">$&#123;m&#125;</span>的二进制再转成十进制是<span class="subst">$&#123;to10(binaryMN)&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;accuracyMN&#125;</span>的二进制是再转成十进制是<span class="subst">$&#123;to10(accuracyBinaryMN)&#125;</span>`</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;n&#125;</span>+<span class="subst">$&#123;m&#125;</span>在js中计算是<span class="subst">$&#123;(to10(binaryMN) === to10(accuracyBinaryMN)) ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;不&#x27;</span>&#125;</span>准确的`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">to10</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> pre = (n.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>] - <span class="number">0</span>).toString(<span class="number">2</span>);</span><br><span class="line">      <span class="keyword">const</span> arr = n.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>].split(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span> (i &lt; arr.length) &#123;</span><br><span class="line">        result += arr[i] * <span class="built_in">Math</span>.pow(<span class="number">2</span>, -(i + <span class="number">1</span>));</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    judgeFloat(<span class="number">0.1</span>, <span class="number">0.2</span>);</span><br><span class="line">    judgeFloat(<span class="number">0.6</span>, <span class="number">0.7</span>);</span><br></pre></td></tr></table></figure><p><img src="https://wang-z.gitee.io/img/0.1+0.2.jpg" class="lazyload" data-srcset="https://wang-z.gitee.io/img/0.1+0.2.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="0.1+0.2"></p><p>计算机中所有的数据都是以<code>二进制</code>存储的，所以在计算时计算机要把数据先转换成<code>二进制</code>进行计算，然后在把计算结果转换成<code>十进制</code>。</p><p>由上面的代码不难看出，在计算<code>0.1+0.2</code>时，<code>二进制</code>计算发生了精度丢失，导致再转换成<code>十进制</code>后和预计的结果不符。</p><h4 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h4><p><img src="https://wang-z.gitee.io/img/Implicit-conversion.jpg" class="lazyload" data-srcset="https://wang-z.gitee.io/img/Implicit-conversion.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="隐式转换"></p><h3 id="if语句和逻辑语句"><a href="#if语句和逻辑语句" class="headerlink" title="if语句和逻辑语句"></a>if语句和逻辑语句</h3><p>在<code>if</code>语句和逻辑语句中，如果只有单个变量，会先将变量转换为<code>Boolean</code>值，只有下面几种情况会转换成<code>false</code>，其余被转换成<code>true</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">null</span><br><span class="line">undefined</span><br><span class="line">&#39;&#39;</span><br><span class="line">NaN</span><br><span class="line">0</span><br><span class="line">false</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="各种运数学算符"><a href="#各种运数学算符" class="headerlink" title="各种运数学算符"></a>各种运数学算符</h3><p>我们在对各种非<code>Number</code>类型运用数学运算符(<code>- * /</code>)时，会先将非<code>Number</code>类型转换为<code>Number</code>类型;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 - true &#x2F;&#x2F; 0</span><br><span class="line">1 - null &#x2F;&#x2F;  1</span><br><span class="line">1 * undefined &#x2F;&#x2F;  NaN</span><br><span class="line">2 * [&#39;5&#39;] &#x2F;&#x2F;  10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意<code>+</code>是个例外，执行<code>+</code>操作符时：</p><ul><li>1.当一侧为<code>String</code>类型，被识别为字符串拼接，并会优先将另一侧转换为字符串类型。</li><li>2.当一侧为<code>Number</code>类型，另一侧为原始类型，则将原始类型转换为<code>Number</code>类型。</li><li>3.当一侧为<code>Number</code>类型，另一侧为引用类型，将引用类型和<code>Number</code>类型转换成字符串后拼接。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">123 + &#39;123&#39; &#x2F;&#x2F; 123123   （规则1）</span><br><span class="line">123 + null  &#x2F;&#x2F; 123    （规则2）</span><br><span class="line">123 + true &#x2F;&#x2F; 124    （规则2）</span><br><span class="line">123 + &#123;&#125;  &#x2F;&#x2F; 123[object Object]    （规则3）</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运算符"><a href="#运算符" class="headerlink" title="== 运算符"></a>== 运算符</h3><p>使用<code>==</code>时，若两侧类型相同，则比较结果和<code>===</code>相同，否则会发生隐式转换，使用<code>==</code>时发生的转换可以分为几种不同的情况（只考虑两侧类型不同）：</p><ul><li><h5 id="1-NaN"><a href="#1-NaN" class="headerlink" title="1.NaN"></a><strong>1.NaN</strong></h5></li></ul><p><code>NaN</code>和其他任何类型比较永远返回<code>false</code>(包括和他自己)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NaN &#x3D;&#x3D; NaN &#x2F;&#x2F; false</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><h5 id="2-Boolean"><a href="#2-Boolean" class="headerlink" title="2.Boolean"></a><strong>2.Boolean</strong></h5></li></ul><p><code>Boolean</code>和其他任何类型比较，<code>Boolean</code>首先被转换为<code>Number</code>类型。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">true &#x3D;&#x3D; 1  &#x2F;&#x2F; true </span><br><span class="line">true &#x3D;&#x3D; &#39;2&#39;  &#x2F;&#x2F; false</span><br><span class="line">true &#x3D;&#x3D; [&#39;1&#39;]  &#x2F;&#x2F; true</span><br><span class="line">true &#x3D;&#x3D; [&#39;2&#39;]  &#x2F;&#x2F; false</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>这里注意一个可能会弄混的点：<code>undefined、null</code>和<code>Boolean</code>比较，虽然<code>undefined、null</code>和<code>false</code>都很容易被想象成假值，但是他们比较结果是<code>false</code>，原因是<code>false</code>首先被转换成<code>0</code>：</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">undefined &#x3D;&#x3D; false &#x2F;&#x2F; false</span><br><span class="line">null &#x3D;&#x3D; false &#x2F;&#x2F; false</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><h5 id="3-String和Number"><a href="#3-String和Number" class="headerlink" title="3.String和Number"></a><strong>3.String和Number</strong></h5></li></ul><p><code>String</code>和<code>Number</code>比较，先将<code>String</code>转换为<code>Number</code>类型。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">123 &#x3D;&#x3D; &#39;123&#39; &#x2F;&#x2F; true</span><br><span class="line">&#39;&#39; &#x3D;&#x3D; 0 &#x2F;&#x2F; true</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><h5 id="4-null和undefined"><a href="#4-null和undefined" class="headerlink" title="4.null和undefined"></a><strong>4.null和undefined</strong></h5></li></ul><p><code>null == undefined</code>比较结果是<code>true</code>，除此之外，<code>null、undefined</code>和其他任何结果的比较值都为<code>false</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">null &#x3D;&#x3D; undefined &#x2F;&#x2F; true</span><br><span class="line">null &#x3D;&#x3D; &#39;&#39; &#x2F;&#x2F; false</span><br><span class="line">null &#x3D;&#x3D; 0 &#x2F;&#x2F; false</span><br><span class="line">null &#x3D;&#x3D; false &#x2F;&#x2F; false</span><br><span class="line">undefined &#x3D;&#x3D; &#39;&#39; &#x2F;&#x2F; false</span><br><span class="line">undefined &#x3D;&#x3D; 0 &#x2F;&#x2F; false</span><br><span class="line">undefined &#x3D;&#x3D; false &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure><ul><li><h5 id="5-原始类型和引用类型"><a href="#5-原始类型和引用类型" class="headerlink" title="5.原始类型和引用类型"></a><strong>5.原始类型和引用类型</strong></h5></li></ul><p>当原始类型和引用类型做比较时，对象类型会依照<code>ToPrimitive</code>规则转换为原始类型:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#39;[object Object]&#39; &#x3D;&#x3D; &#123;&#125; &#x2F;&#x2F; true</span><br><span class="line">&#39;1,2,3&#39; &#x3D;&#x3D; [1, 2, 3] &#x2F;&#x2F; true</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>来看看下面这个比较：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[] &#x3D;&#x3D; ![] &#x2F;&#x2F; true</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>!</code>的优先级高于<code>==</code>，<code>![]</code>首先会被转换为<code>false</code>，然后根据上面第三点，<code>false</code>转换成<code>Number</code>类型<code>0</code>，左侧<code>[]</code>转换为<code>0</code>，两侧比较相等。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[null] &#x3D;&#x3D; false &#x2F;&#x2F; true</span><br><span class="line">[undefined] &#x3D;&#x3D; false &#x2F;&#x2F; true</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>根据数组的<code>ToPrimitive</code>规则，数组元素为<code>null</code>或<code>undefined</code>时，该元素被当做空字符串处理，所以<code>[null]、[undefined]</code>都会被转换为<code>0</code>。</p><h4 id="原型链的规则"><a href="#原型链的规则" class="headerlink" title="原型链的规则"></a>原型链的规则</h4><ul><li>1.所有引用类型都具有对象特性，即可以自由扩展属性</li><li>2.所有引用类型都具有一个<code>proto</code>（隐式原型）属性，是一个普通对象</li><li>3.所有的函数都具有<code>prototype</code>（显式原型）属性，也是一个普通对象</li><li>4.所有引用类型<code>proto</code>值指向它构造函数的<code>prototype</code></li><li>5.当试图得到一个对象的属性时，如果变量本身没有这个属性，则会去他的<code>proto</code>中去找</li></ul><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h3><p>上面我们在拆箱操作中提到了<code>toString</code>函数，我们可以调用它实现从引用类型的转换。</p><blockquote><p>每一个引用类型都有<code>toString</code>方法，默认情况下，<code>toString()</code>方法被每个<code>Object</code>对象继承。如果此方法在自定义对象中未被覆盖，<code>toString()</code> 返回 <code>&quot;[object type]&quot;</code>，其中<code>type</code>是对象的类型。</p></blockquote><p><img src="https://wang-z.gitee.io/img/tostring.jpg" class="lazyload" data-srcset="https://wang-z.gitee.io/img/tostring.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="tostring"></p><h3 id="0-11加上0-1不等于0-1"><a href="#0-11加上0-1不等于0-1" class="headerlink" title="0.11加上0.1不等于0.1"></a>0.11加上0.1不等于0.1</h3><p>解决方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>((prev + curr).toFixed(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h3 id="JavaScript怎么把两个数组里的多个对象一一对应合并？"><a href="#JavaScript怎么把两个数组里的多个对象一一对应合并？" class="headerlink" title="JavaScript怎么把两个数组里的多个对象一一对应合并？"></a>JavaScript怎么把两个数组里的多个对象一一对应合并？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = [&#123;</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="number">980550455852</span>,</span><br><span class="line">  <span class="string">&quot;model&quot;</span>: <span class="string">&quot;XQG70-S1208FW&quot;</span>,</span><br><span class="line">  <span class="string">&quot;color&quot;</span>: <span class="string">&quot;白&quot;</span>,</span><br><span class="line">  <span class="string">&quot;invStatusName&quot;</span>: <span class="string">&quot;正品&quot;</span>,</span><br><span class="line">  <span class="string">&quot;bactualQty&quot;</span>: <span class="number">10947</span>,</span><br><span class="line">  <span class="string">&quot;brealyQty&quot;</span>: <span class="number">11000</span>,</span><br><span class="line">  <span class="string">&quot;bavailQty&quot;</span>: <span class="number">53</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="number">980550566221</span>,</span><br><span class="line">  <span class="string">&quot;model&quot;</span>: <span class="string">&quot;XQB70-C3006&quot;</span>,</span><br><span class="line">  <span class="string">&quot;color&quot;</span>: <span class="string">&quot;灰&quot;</span>,</span><br><span class="line">  <span class="string">&quot;invStatusName&quot;</span>: <span class="string">&quot;正品&quot;</span>,</span><br><span class="line">  <span class="string">&quot;bactualQty&quot;</span>: <span class="number">11</span>,</span><br><span class="line">  <span class="string">&quot;brealyQty&quot;</span>: <span class="number">6</span>,</span><br><span class="line">  <span class="string">&quot;bavailQty&quot;</span>: -<span class="number">5</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = [&#123;</span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="string">&quot;6666&quot;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="string">&quot;8888&quot;</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="keyword">var</span> obj = obj1.map(<span class="function">(<span class="params">item,index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;...item, ...obj2[index]&#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj);  <span class="comment">//</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端开发必备插件</title>
      <link href="2020/01/01/base-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E6%8F%92%E4%BB%B6/"/>
      <url>2020/01/01/base-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>前端开发vscode的必备插件配置</p></blockquote><span id="more"></span><h2 id="vscode插件"><a href="#vscode插件" class="headerlink" title="vscode插件"></a>vscode插件</h2><blockquote><p>Ide中文界面</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chinese (Simplified) Language Pack <span class="keyword">for</span> Visual Studio Code</span><br></pre></td></tr></table></figure><blockquote><p>合并标签</p><p>  在修改标签名时，能在你修改开始（结束）标签的时候修改对应的结束（开始）标签，帮你减少 50% 的击键；</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Auto Rename Tag</span><br></pre></td></tr></table></figure><blockquote><p>快速的生成html标签</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTML Snippets</span><br></pre></td></tr></table></figure><blockquote><p>路径自动补齐</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Path Autocomplete</span><br></pre></td></tr></table></figure><blockquote><p>在浏览器中打开网页</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Open-In-Browser</span><br></pre></td></tr></table></figure><blockquote><p>检测JS必备</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ESLint</span><br></pre></td></tr></table></figure><blockquote><p>给项目文件夹前边加上icon</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vscode-icon</span><br></pre></td></tr></table></figure><blockquote><p>Vue多功能集成插件，包括：语法高亮，智能提示，emmet，错误提示，格式化，自动补全，debugger。vscode官方钦定Vue插件，Vue开发者必备</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vetur</span><br></pre></td></tr></table></figure><blockquote><p>让 html 标签上写class 智能提示当前项目所支持的样式</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTML CSS Support</span><br></pre></td></tr></table></figure><blockquote><p>格式化代码的工具</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">beautify</span><br></pre></td></tr></table></figure><blockquote><p>丰富的git日志插件</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GitLens</span><br></pre></td></tr></table></figure><blockquote><p>能够查看CSS ID和类的字符串作为HTML文件中相应的CSS定义</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">css peek</span><br></pre></td></tr></table></figure><blockquote><p>在底部状态栏显示当前文件大小，点击后还可以看到详细创建、修改时间</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filesize</span><br></pre></td></tr></table></figure><blockquote><p>vue代码片段</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VueHelper</span><br></pre></td></tr></table></figure><blockquote><p>无需离开编辑器，便可以打开 SVG 文件并查看它们</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Svg Preview</span><br></pre></td></tr></table></figure><blockquote><p>自动导入包</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Auto <span class="keyword">import</span> </span><br></pre></td></tr></table></figure><blockquote><p>括号着色器</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bracket Pair Colorizer </span><br></pre></td></tr></table></figure><blockquote></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><blockquote></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vsc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实用css笔记</title>
      <link href="2020/01/01/css-%E5%AE%9E%E7%94%A8css%E7%AC%94%E8%AE%B0/"/>
      <url>2020/01/01/css-%E5%AE%9E%E7%94%A8css%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录开发过程中的css,less使用</p></blockquote><span id="more"></span><h2 id="如何清除浮动"><a href="#如何清除浮动" class="headerlink" title="如何清除浮动"></a>如何清除浮动</h2><p>清除浮动主要为了解决父级元素因为子级浮动引起内部高度为0 的问题。</p><h3 id="父级添加overflow属性方法"><a href="#父级添加overflow属性方法" class="headerlink" title="父级添加overflow属性方法"></a>父级添加overflow属性方法</h3><p>可以通过触发BFC的方式，可以实现清除浮动效果。</p><h3 id="使用after伪元素清除浮动"><a href="#使用after伪元素清除浮动" class="headerlink" title="使用after伪元素清除浮动"></a>使用after伪元素清除浮动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span>:after &#123;</span><br><span class="line">  content: <span class="string">&quot;&quot;</span>; </span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;   </span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;*zoom: <span class="number">1</span>;&#125;   <span class="comment">/* IE6、7 专有 */</span></span><br></pre></td></tr></table></figure><h3 id="使用before和after双伪元素清除浮动"><a href="#使用before和after双伪元素清除浮动" class="headerlink" title="使用before和after双伪元素清除浮动"></a>使用before和after双伪元素清除浮动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span>:before,.clearfix:after &#123; </span><br><span class="line">  content:<span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>:table;  <span class="comment">/* 这句话可以触发BFC BFC可以清除浮动 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span>:after &#123;</span><br><span class="line"> clear:both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *zoom:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="css英文单词不断开"><a href="#css英文单词不断开" class="headerlink" title="css英文单词不断开"></a>css英文单词不断开</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">word-break</span>: break-all;</span><br><span class="line"><span class="attribute">word-wrap</span>: break-word;//英文</span><br><span class="line"> <span class="attribute">word-break</span>: keep-all;//保持英文单词完整</span><br><span class="line"><span class="attribute">white-space</span>: pre-wrap;//中文</span><br></pre></td></tr></table></figure><h2 id="移动端-100vh-问题"><a href="#移动端-100vh-问题" class="headerlink" title="移动端 100vh 问题"></a>移动端 100vh 问题</h2><blockquote><p>在移动端使用 100vh 时，发现在 Chrome、Safari 浏览器中，因为浏览器栏和一些导航栏、链接栏导致不一样的呈现：</p><p>你以为的 100vh === 视口高度</p><p>实际上 100vh === 视口高度 + 浏览器工具栏（地址栏等等）的高度</p></blockquote><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><blockquote><p>安装 vh-check <code>npm install vh-check --save</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vhCheck <span class="keyword">from</span> <span class="string">&#x27;vh-check&#x27;</span>;</span><br><span class="line">vhCheck(<span class="string">&#x27;browser-address-bar&#x27;</span>);</span><br></pre></td></tr></table></figure><p>定义一个 LESS Mixin</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.vh</span>(@height: <span class="number">100vh</span>) &#123;</span><br><span class="line">  <span class="attribute">height</span>: @height;</span><br><span class="line">  <span class="attribute">height</span>: calc(@height - var(--browser-address-bar, <span class="number">0px</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h2><blockquote><p>区分设备类型</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">all (所有的设备)</span><br><span class="line">print (打印设备)</span><br><span class="line">screen (电脑屏幕,平板电脑,智能手机)</span><br></pre></td></tr></table></figure><blockquote><p>特性</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">width网页显示区域完全等于设置的宽度</span><br><span class="line">height网页显示区域完全等于设置的高度</span><br><span class="line">max-width / max-height网页显示区域小于等于设置的宽度</span><br><span class="line">min-width / min-width网页显示区域大于等于设置的宽度</span><br><span class="line">orientation: portrait (竖屏模式)  | landscape (横屏模式)</span><br></pre></td></tr></table></figure><blockquote><p>关键字</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">and 可以将多个媒体特性链接到一块,相当于且</span><br><span class="line">not 排除某个媒体特性 相当于非,可以省略</span><br><span class="line">only 指定某个特定的媒体类型, 可以省略</span><br></pre></td></tr></table></figure><blockquote><p>语法</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//外联样式</span></span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;01.css&quot;</span> media=<span class="string">&quot;only screen and (max-width: 420px)&quot;</span>&gt;</span><br><span class="line"><span class="comment">//内联样式</span></span><br><span class="line">    - 内嵌式语法</span><br><span class="line">      @media only screen  and (max-width: 420px) &#123;</span><br><span class="line">      body &#123;</span><br><span class="line">      background-color: red;</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="comment">//多个条件联写</span></span><br><span class="line">@media only screen and (width: 320px) and (height: 568px) &#123;&#125;</span><br><span class="line">@media only screen and (min-width:400px) and (max-width:600px)&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="浏览器查询Unicode编码"><a href="#浏览器查询Unicode编码" class="headerlink" title="浏览器查询Unicode编码"></a>浏览器查询Unicode编码</h2><p> 浏览器控制台输出   escape(‘查询字符串’)</p><h2 id="less"><a href="#less" class="headerlink" title="less"></a>less</h2><h3 id="less中的变量"><a href="#less中的变量" class="headerlink" title="less中的变量"></a>less中的变量</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*如何定义</span></span><br><span class="line"><span class="comment">@变量名=变量值</span></span><br><span class="line"><span class="comment">如何使用</span></span><br><span class="line"><span class="comment">在样式中</span></span><br><span class="line"><span class="comment">属性:变量名</span></span><br><span class="line"><span class="comment">例子</span></span><br><span class="line"><span class="comment">定义*/</span></span><br><span class="line"><span class="keyword">@color</span>=#f00；</span><br><span class="line">/*使用*/</span><br><span class="line">a&#123;</span><br><span class="line"><span class="attribute">color</span>:color;</span><br><span class="line"><span class="attribute">background</span>:color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="less的循环-，使用递归"><a href="#less的循环-，使用递归" class="headerlink" title="less的循环 ，使用递归"></a>less的循环 ，使用递归</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">10px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box2</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">20px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box3</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">30px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box4</span>&#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">40px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@cout</span>)<span class="keyword">when</span>(<span class="variable">@cout</span>&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="selector-class">.loop</span>((<span class="variable">@cout-1</span>))</span><br><span class="line">    <span class="selector-class">.box</span><span class="variable">@&#123;cout&#125;</span>&#123;</span><br><span class="line">        <span class="attribute">border-bottom</span>:<span class="variable">@cout</span>+<span class="number">0px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loop</span>(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h2 id="原生css的声明变量"><a href="#原生css的声明变量" class="headerlink" title="原生css的声明变量"></a>原生css的声明变量</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*声明变量 使用 -- 关键字</span></span><br><span class="line"><span class="comment">调用变量 使用 var() 函数*/</span></span><br><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">--<span class="attribute">color</span>: red;</span><br><span class="line">      <span class="comment">/* 使用变量 必须放在var函数内 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span>(--变量名,参数)</span><br><span class="line"> <span class="selector-tag">div</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">      <span class="comment">/* 默认参数  200px */</span></span><br><span class="line">      <span class="attribute">padding-top</span>: <span class="built_in">var</span>(--padding-top,<span class="number">200px</span>);</span><br><span class="line">      <span class="comment">/* 默认参数 10px solid red */</span></span><br><span class="line">      <span class="attribute">border</span>: <span class="built_in">var</span>(--border, <span class="number">10px</span> solid red);</span><br><span class="line">      <span class="comment">/* 默认参数  linear-gradient(yellow,red) */</span></span><br><span class="line">      <span class="attribute">background-image</span>: <span class="built_in">var</span>(--img,<span class="built_in">linear-gradient</span>(yellow,red));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="css的计算（calc）"><a href="#css的计算（calc）" class="headerlink" title="css的计算（calc）"></a>css的计算（calc）</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line"><span class="attribute">height</span>:<span class="built_in">calc</span>(<span class="number">100px</span>*<span class="number">90</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="将超出的文本以…的方式缩减"><a href="#将超出的文本以…的方式缩减" class="headerlink" title="将超出的文本以…的方式缩减"></a>将超出的文本以…的方式缩减</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.line2</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">white-space</span>: normal<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">    -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">    -webkit-box-orient: vertical</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="flex弹性布局子元素居中"><a href="#flex弹性布局子元素居中" class="headerlink" title="flex弹性布局子元素居中"></a>flex弹性布局子元素居中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:flex;</span><br><span class="line">    <span class="attribute">justify-content</span>:center;</span><br><span class="line">    <span class="attribute">align-content</span>:center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-not-选择器"><a href="#使用-not-选择器" class="headerlink" title="使用:not()选择器"></a>使用:not()选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(last-child)&#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>not()是可以令最后一项li不加右边框，表示否定</p><p>使用伪类+content+position+transform实现文字或者图形的样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*文字实现 ° 度数单位*/</span></span><br><span class="line"> <span class="selector-tag">div</span> &#123;</span><br><span class="line">         <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">         <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">         <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">         <span class="attribute">position</span>: relative;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">         <span class="attribute">content</span>: <span class="string">&#x27;°&#x27;</span>;</span><br><span class="line">         <span class="attribute">position</span>: absolute;</span><br><span class="line">         <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">         <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="bing-com搜索的国际版按钮的布局"><a href="#bing-com搜索的国际版按钮的布局" class="headerlink" title="bing.com搜索的国际版按钮的布局"></a>bing.com搜索的国际版按钮的布局</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">82px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-tag">span</span> <span class="selector-tag">i</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-tag">span</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>) solid;</span></span><br><span class="line"><span class="css">    <span class="attribute">border-bottom</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>, <span class="number">1.3</span>) <span class="built_in">perspective</span>(<span class="number">0.7em</span>) <span class="built_in">rotateX</span>(<span class="number">2.2deg</span>);  <span class="comment">/*重点*/</span></span></span><br><span class="line"><span class="css">    <span class="attribute">transform-origin</span>: bottom left;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="css">    <span class="attribute">border-radius</span>: <span class="number">1px</span> <span class="number">2px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>国际版<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用overflow-x排版横向列表"><a href="#使用overflow-x排版横向列表" class="headerlink" title="使用overflow-x排版横向列表"></a>使用overflow-x排版横向列表</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow-x</span>:auto</span><br></pre></td></tr></table></figure><p>说明：通过<code>flexbox</code>或<code>inline-block</code>的形式横向排列子元素，对父元素设置<code>overflow-x:auto</code>横向滚动查看，或者设置<code>overflow-x:auto</code> 纵向滚动条一般用于商品分类</p><h3 id="使用letter-spacing排版倒序文本"><a href="#使用letter-spacing排版倒序文本" class="headerlink" title="使用letter-spacing排版倒序文本"></a>使用letter-spacing排版倒序文本</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">letter-spacing</span>:-<span class="number">10px</span></span><br></pre></td></tr></table></figure><p>说明：通过<code>letter-spacing</code>设置负值字体间距将文本倒序</p><h3 id="使用-selection改变文本选择颜色"><a href="#使用-selection改变文本选择颜色" class="headerlink" title="使用::selection改变文本选择颜色"></a>使用::selection改变文本选择颜色</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span><span class="selector-pseudo">::selection</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说明：可以让你选择的文字设置单独的css样式</p><h3 id="css禁用鼠标事件"><a href="#css禁用鼠标事件" class="headerlink" title="css禁用鼠标事件"></a>css禁用鼠标事件</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.disabled</span> &#123;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">cursor</span>: default;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css字体不让选中"><a href="#css字体不让选中" class="headerlink" title="css字体不让选中"></a>css字体不让选中</h3><blockquote><p>class样式添加以下：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">-webkit-user-select:none;</span><br><span class="line"></span><br><span class="line">   -moz-user-select:none;</span><br><span class="line"></span><br><span class="line">   -ms-user-select:none;</span><br><span class="line"></span><br><span class="line">   user-select:none;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css之滚动条"><a href="#css之滚动条" class="headerlink" title="css之滚动条"></a>css之滚动条</h3><p>当设置这两个属性时，只允许Y轴滚动（纵向）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: scroll;</span><br><span class="line"><span class="attribute">overflow-x</span>: hidden;</span><br></pre></td></tr></table></figure><h3 id="自定义滚动条的css"><a href="#自定义滚动条的css" class="headerlink" title="自定义滚动条的css"></a>自定义滚动条的css</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/</span>  </span><br><span class="line"><span class="selector-tag">html</span>::-webkit-scrollbar &#123;</span><br><span class="line">    width: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定义滑块 内阴影+圆角*/</span>  </span><br><span class="line"><span class="selector-tag">html</span>::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    background: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="built_in">hsla</span>(<span class="number">0</span>,<span class="number">0%</span>,<span class="number">100%</span>,.<span class="number">25</span>), inset -<span class="number">2px</span> -<span class="number">2px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">25</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*定义滚动条轨道 内阴影+圆角*/</span>  </span><br><span class="line"><span class="selector-tag">html</span>::-webkit-scrollbar-track &#123;</span><br><span class="line">    background: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Flexible的使用"><a href="#Flexible的使用" class="headerlink" title="Flexible的使用"></a>Flexible的使用</h2><p>目前Flexible会将视觉稿分成**<code>100份</code>**（主要为了以后能更好的兼容<code>vh</code>和<code>vw</code>），而每一份被称为一个单位<code>a</code>。同时<code>1rem</code>单位被认定为<code>10a</code>。针对我们这份视觉稿可以计算出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1a   = 7.5px</span><br><span class="line">1rem = 75p</span><br></pre></td></tr></table></figure><p><img src="https://wang-z.gitee.io/img/cssrem.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/cssrem.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="cssrem"></p><p>所有的下载插件都可以在文件-&gt;首选项-&gt;设置进行修改</p><p>某些插件需要重启才能进行使用</p><h2 id="sroll-snap-type"><a href="#sroll-snap-type" class="headerlink" title="sroll-snap-type"></a>sroll-snap-type</h2><p>这个属性规定了一个容器是否对内部滚动动作进行捕捉，并且规定了如何去处理滚动结束状态。</p><blockquote><h3 id="mandatory：强制性"><a href="#mandatory：强制性" class="headerlink" title="mandatory：强制性"></a>mandatory：强制性</h3><p>强制使滚动条停止在scroll-snap-align:设定的位置 </p><p>scroll-snap-type: x mandatory;对于X轴的捕捉控制，scroll-snap-align: center;强制使li回到中间</p><p><code>proximity</code> <strong>接近、临近、大约</strong></p><p>滚动结束后可能还在原来的地方，也可能额外滚动</p><p><code>scroll-snap-margin</code>/<code>scroll-snap-padding</code></p><p>可以设定margin padding 进行控制，滚动条的盒子属性</p><p>scroll-snap-type: both mandatory</p><p>对于X和Y轴同时可进行滚动</p><p>scroll-snap-align: start | center | end;</p><p>子元素相对于父元素的对其方式</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    scroll-snap-type: x mandatory;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    scroll-snap-align: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id=""><a href="#" class="headerlink" title=""></a></h4>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>防抖和节流的使用</title>
      <link href="2019/12/11/js-%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81/"/>
      <url>2019/12/11/js-%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>js的防抖和节流函数的介绍和使用</p></blockquote><span id="more"></span><h2 id="函数防抖（debounce）"><a href="#函数防抖（debounce）" class="headerlink" title="函数防抖（debounce）"></a>函数防抖（debounce）</h2><blockquote><p>所谓防抖，就是指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//如果定时器不等于null就清除定时器</span></span><br><span class="line">    <span class="keyword">if</span> (timeout !== <span class="literal">null</span>) <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">    <span class="comment">//设置定时器延时执行函数</span></span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(func, delay)<span class="comment">//如果在这个delay时间内执行了setTimeout，否者就会被下一个执行所清除，这样就是一个接一个进行执行，但是只执行最后一个</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="函数节流-Throttle"><a href="#函数节流-Throttle" class="headerlink" title="函数节流(Throttle)"></a>函数节流(Throttle)</h2><blockquote><p>所谓节流，就是指连续触发事件但是在 n 秒中只执行一次函数。节流会稀释函数的执行频。就相当于，一个水龙头在滴水，可能一次性会滴很多滴，但是我们只希望它每隔 500ms 滴一滴水，保持这个频率。即我们希望函数在以一个可以接受的频率重复调用。</p></blockquote><h3 id="时间戳方式"><a href="#时间戳方式" class="headerlink" title="时间戳方式"></a>时间戳方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = <span class="function">(<span class="params">func, ms = <span class="number">200</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt;= ms) &#123;</span><br><span class="line">      func()</span><br><span class="line">      prev = now</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> throttle(fn,wait)=&gt;&#123;</span><br><span class="line">    <span class="keyword">var</span> pre = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="built_in">Date</span>.now();</span><br><span class="line">        <span class="keyword">if</span>( now - pre &gt;= wait)&#123;</span><br><span class="line">            fn.apply(context,args);</span><br><span class="line">            pre = <span class="built_in">Date</span>.now();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定时器方式"><a href="#定时器方式" class="headerlink" title="定时器方式"></a>定时器方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle(fn,wait)=&gt;&#123;</span><br><span class="line">    <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span>(!timer)&#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                fn.apply(context,args);</span><br><span class="line">                timer = <span class="literal">null</span>;</span><br><span class="line">            &#125;,wait)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node学习笔记</title>
      <link href="2019/12/07/node-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>2019/12/07/node-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>记录 node 开发中好用的方法和技巧</p></blockquote><span id="more"></span><h2 id="node-的跨域解决"><a href="#node-的跨域解决" class="headerlink" title="node 的跨域解决"></a>node 的跨域解决</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">&quot;*&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.header(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line">  res.header(</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Headers&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&quot;</span></span><br><span class="line">  );</span><br><span class="line">  res.header(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;PUT, POST, GET, DELETE, OPTIONS&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">&quot;OPTIONS&quot;</span>) &#123;</span><br><span class="line">    res.send(<span class="number">200</span>);</span><br><span class="line">    /让options请求快速返回/;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="获取本地-IP"><a href="#获取本地-IP" class="headerlink" title="获取本地 IP"></a>获取本地 IP</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIPAdress</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> interfaces = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>).networkInterfaces();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> devName <span class="keyword">in</span> interfaces) &#123;</span><br><span class="line">    <span class="keyword">var</span> iface = interfaces[devName];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; iface.length; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> alias = iface[i];</span><br><span class="line">      <span class="keyword">if</span> (alias.family === <span class="string">&quot;IPv4&quot;</span> &amp;&amp; alias.address !== <span class="string">&quot;127.0.0.1&quot;</span> &amp;&amp; !alias.internal) &#123;</span><br><span class="line">        <span class="keyword">return</span> alias.address;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自动导入-API"><a href="#自动导入-API" class="headerlink" title="自动导入 API"></a>自动导入 API</h2><blockquote><p>基于 koa and koa-router 使用场景</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">&quot;Koa-router&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> requireDirectory = <span class="built_in">require</span>(<span class="string">&quot;require-directory&quot;</span>);</span><br><span class="line">requireDirectory(modele, <span class="string">&quot;./api&quot;</span>, &#123;</span><br><span class="line">  visit: <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Router) &#123;</span><br><span class="line">      app.use(obj.routes());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Node-环境变量"><a href="#Node-环境变量" class="headerlink" title="Node 环境变量"></a>Node 环境变量</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">process.cwd(); <span class="comment">//当前项目的绝对路径</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端常用rule验证规则</title>
      <link href="2019/11/24/vue-%E5%B8%B8%E7%94%A8rule%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99/"/>
      <url>2019/11/24/vue-%E5%B8%B8%E7%94%A8rule%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<blockquote><p>网上搜索的常见表单验证</p></blockquote><span id="more"></span><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><blockquote><p>在 vue开发中，难免遇到各种表单校验，这里整理了网络上和自己平时高频率用到的一些校验方法。如果错误欢迎指出，后期不断补充更新。</p></blockquote><h3 id="1、是否合法IP地址"><a href="#1、是否合法IP地址" class="headerlink" title="1、是否合法IP地址"></a>1、是否合法IP地址</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateIP</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="regexp">/^(\d&#123;1,2&#125;|1\d\d|2[0-4]\d|25[0-5])\.(\d&#123;1,2&#125;|1\d\d|2[0-4]\d|25[0-5])\.(\d&#123;1,2&#125;|1\d\d|2[0-4]\d|25[0-5])\.(\d&#123;1,2&#125;|1\d\d|2[0-4]\d|25[0-5])$/</span>;</span><br><span class="line">    <span class="keyword">if</span> ((!reg.test(value)) &amp;&amp; value != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的IP地址&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、是否手机号码或者固话"><a href="#2、是否手机号码或者固话" class="headerlink" title="2、是否手机号码或者固话"></a>2、是否手机号码或者固话</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validatePhoneTwo</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^((0\d&#123;2,3&#125;-\d&#123;7,8&#125;)|(1[34578]\d&#123;9&#125;))$/</span>;;</span><br><span class="line">  <span class="keyword">if</span> (value == <span class="string">&#x27;&#x27;</span> || value == <span class="literal">undefined</span> || value == <span class="literal">null</span>) &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((!reg.test(value)) &amp;&amp; value != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的电话号码或者固话号码&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、是否固话"><a href="#3、是否固话" class="headerlink" title="3、是否固话"></a>3、是否固话</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateTelphone</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg =<span class="regexp">/0\d&#123;2,3&#125;-\d&#123;7,8&#125;/</span>;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((!reg.test(value)) &amp;&amp; value != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的固定电话）&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、是否手机号码"><a href="#4、是否手机号码" class="headerlink" title="4、是否手机号码"></a>4、是否手机号码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validatePhone</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg =<span class="regexp">/^[1][3-9][0-9]&#123;9&#125;$/</span>;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((!reg.test(value)) &amp;&amp; value != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的电话号码&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、是否身份证号码"><a href="#5、是否身份证号码" class="headerlink" title="5、是否身份证号码"></a>5、是否身份证号码</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateIdNo</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)/</span>;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((!reg.test(value)) &amp;&amp; value != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的身份证号码&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6、是否邮箱"><a href="#6、是否邮箱" class="headerlink" title="6、是否邮箱"></a>6、是否邮箱</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateEMail</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg =<span class="regexp">/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/</span>;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!reg.test(value))&#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正确的邮箱&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7、合法url"><a href="#7、合法url" class="headerlink" title="7、合法url"></a>7、合法url</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateURL</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> urlregex = <span class="regexp">/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9]?[0-9]))&#123;3&#125;|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]&#123;2&#125;))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?&#x27;\\+&amp;%$#=~_-]+))*$/</span>;</span><br><span class="line">  <span class="keyword">return</span> urlregex.test(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8、验证内容是否包含英文数字以及下划线"><a href="#8、验证内容是否包含英文数字以及下划线" class="headerlink" title="8、验证内容是否包含英文数字以及下划线"></a>8、验证内容是否包含英文数字以及下划线</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isPassword</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg =<span class="regexp">/^[_a-zA-Z0-9]+$/</span>;</span><br><span class="line">  <span class="keyword">if</span>(value==<span class="string">&#x27;&#x27;</span>||value==<span class="literal">undefined</span>||value==<span class="literal">null</span>)&#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!reg.test(value))&#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;仅由英文字母，数字以及下划线组成&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9、自动检验数值的范围"><a href="#9、自动检验数值的范围" class="headerlink" title="9、自动检验数值的范围"></a>9、自动检验数值的范围</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">checkMax20000</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (value == <span class="string">&#x27;&#x27;</span> || value == <span class="literal">undefined</span> || value == <span class="literal">null</span>) &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[1,20000]之间的数字&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &lt; <span class="number">1</span> || value &gt; <span class="number">20000</span>) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[1,20000]之间的数字&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10、验证数字输入框最大数值"><a href="#10、验证数字输入框最大数值" class="headerlink" title="10、验证数字输入框最大数值"></a>10、验证数字输入框最大数值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">checkMaxVal</span>(<span class="params">rule, value,callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (value &lt; <span class="number">0</span> || value &gt; 最大值) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[0,最大值]之间的数字&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11、验证是否1-99之间"><a href="#11、验证是否1-99之间" class="headerlink" title="11、验证是否1-99之间"></a>11、验证是否1-99之间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isOneToNinetyNine</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> re = <span class="regexp">/^[1-9][0-9]&#123;0,1&#125;$/</span>;</span><br><span class="line">      <span class="keyword">const</span> rsCheck = re.test(value);</span><br><span class="line">      <span class="keyword">if</span> (!rsCheck) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数，值为【1,99】&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12、验证是否整数"><a href="#12、验证是否整数" class="headerlink" title="12、验证是否整数"></a>12、验证是否整数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> re = <span class="regexp">/^[0-9]*[1-9][0-9]*$/</span>;</span><br><span class="line">      <span class="keyword">const</span> rsCheck = re.test(value);</span><br><span class="line">      <span class="keyword">if</span> (!rsCheck) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="13、验证是否整数-非必填"><a href="#13、验证是否整数-非必填" class="headerlink" title="13、验证是否整数,非必填"></a>13、验证是否整数,非必填</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isIntegerNotMust</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> re = <span class="regexp">/^[0-9]*[1-9][0-9]*$/</span>;</span><br><span class="line">      <span class="keyword">const</span> rsCheck = re.test(value);</span><br><span class="line">      <span class="keyword">if</span> (!rsCheck) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="14、-验证是否是-0-1-的小数"><a href="#14、-验证是否是-0-1-的小数" class="headerlink" title="14、 验证是否是[0-1]的小数"></a>14、 验证是否是[0-1]的小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isDecimal</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[0,1]之间的数字&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; <span class="number">0</span> || value &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[0,1]之间的数字&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="15、-验证是否是-1-10-的小数-即不可以等于0"><a href="#15、-验证是否是-1-10-的小数-即不可以等于0" class="headerlink" title="15、 验证是否是[1-10]的小数,即不可以等于0"></a>15、 验证是否是[1-10]的小数,即不可以等于0</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isBtnOneToTen</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value == <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数，值为[1,10]&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(value == <span class="string">&#x27;1&#x27;</span> || value == <span class="string">&#x27;2&#x27;</span> || value == <span class="string">&#x27;3&#x27;</span> || value == <span class="string">&#x27;4&#x27;</span> || value == <span class="string">&#x27;5&#x27;</span> || value == <span class="string">&#x27;6&#x27;</span> || value == <span class="string">&#x27;7&#x27;</span> || value == <span class="string">&#x27;8&#x27;</span> || value == <span class="string">&#x27;9&#x27;</span> || value == <span class="string">&#x27;10&#x27;</span>)) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入正整数，值为[1,10]&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="16、验证是否是-1-100-的小数-即不可以等于0"><a href="#16、验证是否是-1-100-的小数-即不可以等于0" class="headerlink" title="16、验证是否是[1-100]的小数,即不可以等于0"></a>16、验证是否是[1-100]的小数,即不可以等于0</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isBtnOneToHundred</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入整数，值为[1,100]&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; <span class="number">1</span> || value &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入整数，值为[1,100]&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="17、验证是否是-0-100-的小数"><a href="#17、验证是否是-0-100-的小数" class="headerlink" title="17、验证是否是[0-100]的小数"></a>17、验证是否是[0-100]的小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isBtnZeroToHundred</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>(value)) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[1,100]之间的数字&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; <span class="number">0</span> || value &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入[1,100]之间的数字&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="18、验证端口是否在-0-65535-之间"><a href="#18、验证端口是否在-0-65535-之间" class="headerlink" title="18、验证端口是否在[0,65535]之间"></a>18、验证端口是否在[0,65535]之间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isPort</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;输入不可以为空&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="string">&#x27;&#x27;</span> || <span class="keyword">typeof</span>(value) == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入端口值&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> re = <span class="regexp">/^([0-9]|[1-9]\d|[1-9]\d&#123;2&#125;|[1-9]\d&#123;3&#125;|[1-5]\d&#123;4&#125;|6[0-4]\d&#123;3&#125;|65[0-4]\d&#123;2&#125;|655[0-2]\d|6553[0-5])$/</span>;</span><br><span class="line">      <span class="keyword">const</span> rsCheck = re.test(value);</span><br><span class="line">      <span class="keyword">if</span> (!rsCheck) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入在[0-65535]之间的端口值&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="19、验证端口是否在-0-65535-之间，非必填-isMust表示是否必填"><a href="#19、验证端口是否在-0-65535-之间，非必填-isMust表示是否必填" class="headerlink" title="19、验证端口是否在[0,65535]之间，非必填,isMust表示是否必填"></a>19、验证端口是否在[0,65535]之间，非必填,isMust表示是否必填</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isCheckPort</span>(<span class="params">rule, value, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="string">&#x27;&#x27;</span> || <span class="keyword">typeof</span>(value) == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="comment">//callback(new Error(&#x27;请输入端口值&#x27;));</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> re = <span class="regexp">/^([0-9]|[1-9]\d|[1-9]\d&#123;2&#125;|[1-9]\d&#123;3&#125;|[1-5]\d&#123;4&#125;|6[0-4]\d&#123;3&#125;|65[0-4]\d&#123;2&#125;|655[0-2]\d|6553[0-5])$/</span>;</span><br><span class="line">      <span class="keyword">const</span> rsCheck = re.test(value);</span><br><span class="line">      <span class="keyword">if</span> (!rsCheck) &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入在[0-65535]之间的端口值&#x27;</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="20、小写字母"><a href="#20、小写字母" class="headerlink" title="20、小写字母"></a>20、小写字母</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateLowerCase</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^[a-z]+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.test(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="22、两位小数验证"><a href="#22、两位小数验证" class="headerlink" title="22、两位小数验证"></a>22、两位小数验证</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> validateValidity = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/(^[1-9]([0-9]+)?(\.[0-9]&#123;1,2&#125;)?$)|(^(0)&#123;1&#125;$)|(^[0-9]\.[0-9]([0-9])?$)/</span>.test(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;最多两位小数！！！&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="23、是否大写字母"><a href="#23、是否大写字母" class="headerlink" title="23、是否大写字母"></a>23、是否大写字母</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validateUpperCase</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^[A-Z]+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.test(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="24、是否大小写字母"><a href="#24、是否大小写字母" class="headerlink" title="24、是否大小写字母"></a>24、是否大小写字母</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validatAlphabets</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^[A-Za-z]+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.test(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//包含大写字母和小写字母</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validatAlphabets</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^(?=.*[a-z])(?=.*[A-Z])$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.test(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="25、密码校验"><a href="#25、密码校验" class="headerlink" title="25、密码校验"></a>25、密码校验</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> validatePsdReg = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入密码&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$)([^\u4e00-\u9fa5\s])&#123;6,20&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入6-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种&#x27;</span>))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="26、中文校验"><a href="#26、中文校验" class="headerlink" title="26、中文校验"></a>26、中文校验</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> validateContacts = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入中文&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^[\u0391-\uFFE5A-Za-z]+$/</span>.test(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;不可输入特殊字符&#x27;</span>))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="27、-账号校验"><a href="#27、-账号校验" class="headerlink" title="27、 账号校验"></a>27、 账号校验</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> validateCode = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入账号&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]&#123;6,20&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;账号必须为6-20位字母和数字组合&#x27;</span>))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="28-、纯数字校验"><a href="#28-、纯数字校验" class="headerlink" title="28 、纯数字校验"></a>28 、纯数字校验</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> validateNumber = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> numberReg = <span class="regexp">/^\d+$|^\d+[.]?\d+$/</span></span><br><span class="line">    <span class="keyword">if</span> (value !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!numberReg.test(value)) &#123;</span><br><span class="line">            callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入数字&#x27;</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            callback()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入值&#x27;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="29、最多一位小数"><a href="#29、最多一位小数" class="headerlink" title="29、最多一位小数"></a>29、最多一位小数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> onePoint = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^[0-9]+([.]&#123;1&#125;[0-9]&#123;1&#125;)?$/</span>.test(value)) &#123;</span><br><span class="line">    callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;最多一位小数！！！&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="elementUI使用方法："><a href="#elementUI使用方法：" class="headerlink" title="elementUI使用方法："></a>elementUI使用方法：</h2><blockquote><p>在使用地方直接 import 引入，然后在 rules 校验中加入即可。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">属性: [&#123; <span class="attr">validator</span>: validatePass, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span> &#125;],</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
            <tag> rule </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>https编码</title>
      <link href="2019/11/15/https-%E8%BF%94%E5%9B%9E%E7%A0%81/"/>
      <url>2019/11/15/https-%E8%BF%94%E5%9B%9E%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>关于https返回编码普遍代表含义，实际开发由前后端协商决定</p></blockquote><span id="more"></span><h2 id="https编码"><a href="#https编码" class="headerlink" title="https编码"></a>https编码</h2><blockquote><p>1**(信息类)：表示接收到请求并且继续处理 100——客户必须继续发出请求 101——客户要求服务器根据请求转换HTTP协议版本</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">2**(响应成功)：表示动作被成功接收、理解和接受</span><br><span class="line">200——表明该请求被成功地完成，所请求的资源发送回客户端</span><br><span class="line">201——提示知道新文件的URL</span><br><span class="line">202——接受和处理、但处理未完成</span><br><span class="line">203——返回信息不确定或不完整</span><br><span class="line">204——请求收到，但返回信息为空</span><br><span class="line">205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件</span><br><span class="line">206——服务器已经完成了部分用户的GET请求</span><br><span class="line"></span><br><span class="line">3**(重定向类)：为了完成指定的动作，必须接受进一步处理</span><br><span class="line">300——请求的资源可在多处得到</span><br><span class="line">301——本网页被永久性转移到另一个URL</span><br><span class="line">302——请求的网页被转移到一个新的地址，但客户访问仍继续通过原始URL地址，重定向，新的URL会在response中的Location中返回，浏览器将会使用新的URL发出新的Request。</span><br><span class="line">303——建议客户访问其他URL或访问方式</span><br><span class="line">304——自从上次请求后，请求的网页未修改过，服务器返回此响应时，不会返回网页内容，代表上次的文档已经被缓存了，还可以继续使用</span><br><span class="line">305——请求的资源必须从服务器指定的地址得到</span><br><span class="line">306——前一版本HTTP中使用的代码，现行版本中不再使用</span><br><span class="line">307——申明请求的资源临时性删除</span><br><span class="line"></span><br><span class="line">4**(客户端错误类)：请求包含错误语法或不能正确执行</span><br><span class="line">400——客户端请求有语法错误，不能被服务器所理解</span><br><span class="line">401——请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用</span><br><span class="line">HTTP 401.1 - 未授权：登录失败</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 401.2 - 未授权：服务器配置问题导致登录失败</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 401.3 - ACL 禁止访问资源</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 401.4 - 未授权：授权被筛选器拒绝</span><br><span class="line">HTTP 401.5 - 未授权：ISAPI 或 CGI 授权失败</span><br><span class="line">402——保留有效ChargeTo头响应</span><br><span class="line">403——禁止访问，服务器收到请求，但是拒绝提供服务</span><br><span class="line">HTTP 403.1 禁止访问：禁止可执行访问</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.2 - 禁止访问：禁止读访问</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.3 - 禁止访问：禁止写访问</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.4 - 禁止访问：要求 SSL</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.5 - 禁止访问：要求 SSL 128</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.6 - 禁止访问：IP 地址被拒绝</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.7 - 禁止访问：要求客户证书</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.8 - 禁止访问：禁止站点访问</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.9 - 禁止访问：连接的用户过多</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.10 - 禁止访问：配置无效</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.11 - 禁止访问：密码更改</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.12 - 禁止访问：映射器拒绝访问</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.13 - 禁止访问：客户证书已被吊销</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.15 - 禁止访问：客户访问许可过多</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 403.16 - 禁止访问：客户证书不可信或者无效</span><br><span class="line">HTTP 403.17 - 禁止访问：客户证书已经到期或者尚未生效</span><br><span class="line">404——一个404错误表明可连接服务器，但服务器无法取得所请求的网页，请求资源不存在。eg：输入了错误的URL</span><br><span class="line">405——用户在Request-Line字段定义的方法不允许</span><br><span class="line">406——根据用户发送的Accept拖，请求资源不可访问</span><br><span class="line">407——类似401，用户必须首先在代理服务器上得到授权</span><br><span class="line">408——客户端没有在用户指定的饿时间内完成请求</span><br><span class="line">409——对当前资源状态，请求不能完成</span><br><span class="line">410——服务器上不再有此资源且无进一步的参考地址</span><br><span class="line">411——服务器拒绝用户定义的Content-Length属性请求</span><br><span class="line">412——一个或多个请求头字段在当前请求中错误</span><br><span class="line">413——请求的资源大于服务器允许的大小</span><br><span class="line">414——请求的资源URL长于服务器允许的长度</span><br><span class="line">415——请求资源不支持请求项目格式</span><br><span class="line">416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含If-Range请求头字段</span><br><span class="line">417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求长。</span><br><span class="line"></span><br><span class="line">5**(服务端错误类)：服务器不能正确执行一个正确的请求</span><br><span class="line">HTTP 500 - 服务器遇到错误，无法完成请求</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500.100 - 内部服务器错误 - ASP 错误</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500-11 服务器关闭</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500-12 应用程序重新启动</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500-13 - 服务器太忙</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500-14 - 应用程序无效</span><br><span class="line">&amp;emsp;&amp;emsp;HTTP 500-15 - 不允许请求 global.asa</span><br><span class="line">&amp;emsp;&amp;emsp;Error 501 - 未实现</span><br><span class="line">HTTP 502 - 网关错误</span><br><span class="line">HTTP 503：由于超载或停机维护，服务器目前无法使用，一段时间后可能恢复正常</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> https </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>commonJS以及ES6的引入方法</title>
      <link href="2019/10/10/js-%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F/"/>
      <url>2019/10/10/js-%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>模块,js函数的导入和使用</p></blockquote><span id="more"></span><h2 id="自动引入模块"><a href="#自动引入模块" class="headerlink" title="自动引入模块"></a>自动引入模块</h2><blockquote><p>当前例子为vuex的modules内的自动导入</p><p>modules即是所有模块的集合对象 {模块名，模块名}</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> modulesFiles = <span class="built_in">require</span>.context(<span class="string">&#x27;./modules&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.js$/</span>)<span class="comment">//匹配此文件夹内的js文件</span></span><br><span class="line"><span class="keyword">const</span> modules = modulesFiles.keys().reduce(<span class="function">(<span class="params">modules, modulePath</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> moduleName = modulePath.replace(<span class="regexp">/^\.\/(.*)\.\w+$/</span>, <span class="string">&#x27;$1&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> value = modulesFiles(modulePath)</span><br><span class="line">  modules[moduleName] = value.default</span><br><span class="line">  <span class="keyword">return</span> modules</span><br><span class="line">&#125;, &#123;&#125;)</span><br></pre></td></tr></table></figure><h3 id="引入方式"><a href="#引入方式" class="headerlink" title="引入方式"></a>引入方式</h3><h4 id="commonJS"><a href="#commonJS" class="headerlink" title="commonJS"></a>commonJS</h4><p>commonJS，定义wang.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wang</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//封装的函数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;wang&#125;</span><br></pre></td></tr></table></figure><p>commonJS，引入(路径自定义)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入</span></span><br><span class="line"><span class="keyword">var</span> wang = <span class="built_in">require</span>(<span class="string">&#x27;./wang.js&#x27;</span>);</span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">wang.wang();</span><br><span class="line"></span><br><span class="line"><span class="comment">//其他引入</span></span><br><span class="line"><span class="keyword">var</span> &#123;wang&#125; = <span class="built_in">require</span>(<span class="string">&#x27;./wang.js&#x27;</span>);</span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">wang();</span><br></pre></td></tr></table></figure><h4 id="import"><a href="#import" class="headerlink" title="import"></a>import</h4><h5 id="export"><a href="#export" class="headerlink" title="export"></a>export</h5><p>ES6,定义wang.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">wang</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//封装的函数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">const</span> wang = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">   wang</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ES6,引入wang.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入</span></span><br><span class="line"><span class="keyword">import</span> &#123;wang&#125; <span class="keyword">from</span> <span class="string">&quot;./wang.js&quot;</span></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">wang();</span><br></pre></td></tr></table></figure><h5 id="export-default"><a href="#export-default" class="headerlink" title="export default"></a>export default</h5><blockquote><p>默认导出一个变量,</p><p><code>import</code>命令可以为该匿名函数指定任意名字。</p><p><code>export default</code>命令其实只是输出一个叫做<code>default</code>的变量，所以它后面不能跟变量声明语句。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="function"><span class="title">wang</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> obj <span class="keyword">from</span> <span class="string">&quot;./wang.js&quot;</span></span><br><span class="line">obj.wang()</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ()=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;wang&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">const</span> wang = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;wamng&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> wang</span><br><span class="line"><span class="keyword">import</span> wang <span class="keyword">from</span> <span class="string">&quot;./wang.js&quot;</span></span><br><span class="line">wang()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间段组件</title>
      <link href="2019/09/18/UI-vue%E6%97%B6%E9%97%B4%E6%AE%B5%E7%BB%84%E4%BB%B6/"/>
      <url>2019/09/18/UI-vue%E6%97%B6%E9%97%B4%E6%AE%B5%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>一周<code>0.5*2*24*7</code>的时间段选择,操作48位01字符串</p></blockquote><span id="more"></span><blockquote><p>时间段UI展示</p></blockquote><p><img src="https://wang-z.gitee.io/img/timeQuantum.gif" class="lazyload" data-srcset="https://wang-z.gitee.io/img/timeQuantum.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="时间段"></p><h2 id="思考过程"><a href="#思考过程" class="headerlink" title="思考过程"></a>思考过程</h2><p>点击事件</p><p>点击表格时触发点击事件，传入data-week(0-6) data-time  (0-23)</p><p>触发mouseenter  mouseleave 事件</p><p>下面的显示就是tr p便签v-for循环出来</p><p>当你选择时是空的那么就全部都是选中 当你选择时 是有的就全清空</p><p>考虑向上偏移了多少就要重新创建div</p><p>封装一组组件对于不限和多选的控制</p><p>多选全都不选就让不限 变active  数组小于零就可以 不限 大于零就去掉不限</p><p>两个都是true 就要反选</p><p>xy都大于screen</p><p>x小于screen</p><p>y小于screen</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">timeFiltrate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//生成想要的数组</span></span><br><span class="line">      <span class="keyword">let</span> arr=[];</span><br><span class="line">   <span class="comment">//临时存放数组</span></span><br><span class="line">      <span class="keyword">let</span> tempArr = [];</span><br><span class="line">    <span class="comment">//循环date中的时间</span></span><br><span class="line">      <span class="built_in">this</span>.date.forEach(<span class="function">(<span class="params">item1,index1</span>)=&gt;</span>&#123;</span><br><span class="line">        item1.forEach(<span class="function">(<span class="params">item2,index2</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">//筛选出想要的数据</span></span><br><span class="line">          <span class="keyword">if</span>(item2.active)&#123;</span><br><span class="line">              <span class="comment">//push进临时数组</span></span><br><span class="line">            tempArr.push(...item2.timeQuantum);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">          <span class="comment">// 生成数组存放进</span></span><br><span class="line">        arr.push(tempArr);</span><br><span class="line">          <span class="comment">//临时数组的清空</span></span><br><span class="line">        tempArr=[];</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="comment">//循环出想要删除的元素的索引值</span></span><br><span class="line">      arr.forEach(<span class="function">(<span class="params">item1,index1</span>)=&gt;</span>&#123;</span><br><span class="line">        item1.forEach(<span class="function">(<span class="params">item2,index2</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(arr[index1][index2]===arr[index1][index2+<span class="number">1</span>])&#123;</span><br><span class="line">            tempArr.push(index2,index2+<span class="number">1</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">          <span class="comment">//数组的删除从后面来可以不影响数组</span></span><br><span class="line">        tempArr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;<span class="keyword">return</span> b-a&#125;)</span><br><span class="line">          <span class="comment">//根据索引值删除元素</span></span><br><span class="line">        tempArr.map(<span class="function">(<span class="params">v,i</span>)=&gt;</span>&#123;</span><br><span class="line">          arr[index1].splice(v,<span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">          <span class="comment">//置空</span></span><br><span class="line">        tempArr=[];</span><br><span class="line">      &#125;)</span><br><span class="line">     <span class="built_in">console</span>.log(arr);</span><br><span class="line">      <span class="keyword">return</span> arr</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="源码（清晰版）"><a href="#源码（清晰版）" class="headerlink" title="源码（清晰版）"></a>源码（清晰版）</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;timeQyantum&quot;</span> @mouseup=<span class="string">&quot;handleMouseOutUp()&quot;</span> @mouseleave=<span class="string">&quot;handleMouseOutUp&quot;</span>&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;schedule&quot;</span></span><br><span class="line">      :style=<span class="string">&quot;&#123;opacity: isShow, left: screenX+&#x27;px&#x27;, top: screenY+&#x27;px&#x27;, width: mouseWidth+&#x27;px&#x27;, height: mouseHeight+&#x27;px&#x27;, display: Display&#125;&quot;</span></span><br><span class="line">    &gt;&lt;/div&gt;</span><br><span class="line">    &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;calendar-table&quot;</span>&gt;</span><br><span class="line">      &lt;thead <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;calendar-head&quot;</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;th rowspan=<span class="string">&quot;8&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;week-td&quot;</span>&gt;星期/时间&lt;/th&gt;</span><br><span class="line">          &lt;th colspan=<span class="string">&quot;24&quot;</span>&gt;<span class="number">00</span>:<span class="number">00</span> - <span class="number">12</span>:<span class="number">00</span>&lt;/th&gt;</span><br><span class="line">          &lt;th colspan=<span class="string">&quot;24&quot;</span>&gt;<span class="number">12</span>:<span class="number">00</span> - <span class="number">24</span>:<span class="number">00</span>&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td colspan=<span class="string">&quot;2&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;v in List&quot;</span> :key=<span class="string">&quot;v&quot;</span>&gt;&#123;&#123;v&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/thead&gt;</span><br><span class="line">      &lt;tbody <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;calendar-body&quot;</span>&gt;</span><br><span class="line">        &lt;tr v-<span class="keyword">for</span>=<span class="string">&quot;(item1,index1) in date&quot;</span> :key=<span class="string">&quot;index1&quot;</span>&gt;</span><br><span class="line">          &lt;td&gt;星期&#123;&#123;index1|weekend&#125;&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td</span><br><span class="line">            @mousedown=<span class="string">&quot;handleMouseClick($event,item2)&quot;</span></span><br><span class="line">            @mousemove=<span class="string">&quot;handleMouseMove&quot;</span></span><br><span class="line">            @mouseup=<span class="string">&quot;handleMouseUp($event,item2)&quot;</span></span><br><span class="line">            @mouseenter=<span class="string">&quot;handleMouseEnter($event,item2)&quot;</span></span><br><span class="line">            @mouseout=<span class="string">&quot;handleMouseOut&quot;</span></span><br><span class="line">            v-<span class="keyword">for</span>=<span class="string">&quot;(item2,index2) in item1&quot;</span></span><br><span class="line">            :key=<span class="string">&quot;index2&quot;</span></span><br><span class="line">            :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[item2.active ? &#x27;ui-selected&#x27; : &#x27;&#x27;]&quot;</span></span><br><span class="line">          &gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td colspan=<span class="string">&quot;49&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;td-table-tip&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;timeQuantum&quot;</span>&gt;</span><br><span class="line">              &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;areadySelect&quot;</span>&gt;已选择时间段&lt;/span&gt;</span><br><span class="line">              &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;empty&quot;</span> @click=<span class="string">&quot;handleEmpty&quot;</span>&gt;清空&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;td-selected-time&quot;</span>&gt;</span><br><span class="line">              &lt;p v-<span class="keyword">for</span>=<span class="string">&quot;(item1,index1) in timeFiltrate&quot;</span> :key=<span class="string">&quot;index1&quot;</span>&gt;</span><br><span class="line">                &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;tip-text&quot;</span>&gt;星期&#123;&#123;index1|weekend&#125;&#125;:&lt;/span&gt;</span><br><span class="line">                &lt;span&gt;&#123;&#123;item1 | timeDifference&#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/tbody&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;byted-popover-wrapper&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bui-popper byted-popover&quot;</span> :style=<span class="string">&quot;timeTips&quot;</span> x-placement=<span class="string">&quot;top&quot;</span>&gt;</span><br><span class="line">          &lt;div x-arrow <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bui-popover-arrow&quot;</span> style=<span class="string">&quot;left: 86px;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bui-popover-panel&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;bui-popover-body&quot;</span>&gt;星期&#123;&#123;timeTips_week|weekend&#125;&#125; &#123;&#123;timeTIps_content&#125;&#125;&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/common.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    time: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="built_in">Array</span>(<span class="number">337</span>).join(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      schedule_time: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      timeTips_week: <span class="number">0</span>,</span><br><span class="line">      timeTIps_content: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      timeTips: &#123;</span><br><span class="line">        width: <span class="string">&quot;182px&quot;</span>,</span><br><span class="line">        display: <span class="string">&quot;none&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      isSelect: <span class="literal">false</span>,</span><br><span class="line">      startTime: <span class="number">0</span>,</span><br><span class="line">      endTime: <span class="number">0</span>,</span><br><span class="line">      startWeek: <span class="number">0</span>,</span><br><span class="line">      endWeek: <span class="number">0</span>,</span><br><span class="line">      isShow: <span class="number">0.6</span>,</span><br><span class="line">      screenX: <span class="number">0</span>,</span><br><span class="line">      screenY: <span class="number">0</span>,</span><br><span class="line">      ClickX: <span class="number">0</span>,</span><br><span class="line">      ClickY: <span class="number">0</span>,</span><br><span class="line">      mouseWidth: <span class="number">10</span>,</span><br><span class="line">      mouseHeight: <span class="number">30</span>,</span><br><span class="line">      Display: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">      date: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">CreateData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> timeQuantumArr = [],</span><br><span class="line">        hours = [],</span><br><span class="line">        minutes = [<span class="string">&quot;00&quot;</span>, <span class="string">&quot;30&quot;</span>];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">24</span>; i++) &#123;</span><br><span class="line">        i &lt; <span class="number">10</span> ? hours.push(<span class="string">&quot;0&quot;</span> + i) : hours.push(i.toString());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> hour <span class="keyword">of</span> hours) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> minute <span class="keyword">of</span> minutes) &#123;</span><br><span class="line">          timeQuantumArr.push(<span class="string">`<span class="subst">$&#123;hour&#125;</span>:<span class="subst">$&#123;minute&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      timeQuantumArr = timeQuantumArr.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> [</span><br><span class="line">        v,</span><br><span class="line">        timeQuantumArr[i + <span class="number">1</span>] || <span class="string">&quot;24:00&quot;</span></span><br><span class="line">      ]);</span><br><span class="line">      <span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.date.push([]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">48</span>; j++) &#123;</span><br><span class="line">          <span class="built_in">this</span>.date[i].push(&#123;</span><br><span class="line">            active: <span class="built_in">Boolean</span>(<span class="built_in">this</span>.schedule_time.substr(num, <span class="number">1</span>) / <span class="number">1</span>),</span><br><span class="line">            week: i,</span><br><span class="line">            time: j,</span><br><span class="line">            timeQuantum: timeQuantumArr[j]</span><br><span class="line">          &#125;);</span><br><span class="line">          num++;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleEmpty</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.date.forEach(<span class="function">(<span class="params">item1, index1</span>) =&gt;</span> &#123;</span><br><span class="line">        item1.forEach(<span class="function">(<span class="params">item2, index2</span>) =&gt;</span> &#123;</span><br><span class="line">          item2.active = <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">&quot;scheduleTime&quot;</span>, <span class="built_in">Array</span>(<span class="number">337</span>).join(<span class="number">1</span>));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseOut</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.timeTips = &#123;</span><br><span class="line">        width: <span class="string">&quot;182px&quot;</span>,</span><br><span class="line">        display: <span class="string">&quot;none&quot;</span></span><br><span class="line">      &#125;;</span><br><span class="line">      debounce(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.timeTips = &#123;</span><br><span class="line">          width: <span class="string">&quot;182px&quot;</span>,</span><br><span class="line">          display: <span class="string">&quot;none&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseEnter</span>(<span class="params">value, item</span>)</span> &#123;</span><br><span class="line">      debounce(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> x = -<span class="number">10</span> + <span class="number">12</span> * item.time;</span><br><span class="line">        <span class="keyword">let</span> y = -<span class="number">15</span> + <span class="number">30</span> * item.week;</span><br><span class="line">        <span class="built_in">this</span>.timeTips = &#123;</span><br><span class="line">          width: <span class="string">&quot;182px&quot;</span>,</span><br><span class="line">          position: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">          transform: <span class="string">`translate3d(<span class="subst">$&#123;x&#125;</span>px, <span class="subst">$&#123;y&#125;</span>px, 0px)`</span>,</span><br><span class="line">          top: <span class="string">&quot;0px&quot;</span>,</span><br><span class="line">          left: <span class="string">&quot;0px&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">this</span>.timeTips_week = item.week;</span><br><span class="line">        <span class="built_in">this</span>.timeTIps_content = <span class="string">`<span class="subst">$&#123;item.timeQuantum[<span class="number">0</span>]&#125;</span>~<span class="subst">$&#123;item.timeQuantum[<span class="number">1</span>]&#125;</span>`</span>;</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseOutUp</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.Display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      <span class="built_in">this</span>.screenX = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.screenY = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseWidth = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseHeight = <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseUp</span>(<span class="params">value, item</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.Display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      <span class="built_in">this</span>.screenX = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.screenY = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseWidth = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseHeight = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">const</span> &#123; active, time, week &#125; = item;</span><br><span class="line">      <span class="keyword">if</span> (active == <span class="built_in">this</span>.isSelect) &#123;</span><br><span class="line">        <span class="built_in">this</span>.isSelect = !<span class="built_in">this</span>.isSelect;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (week &lt; <span class="built_in">this</span>.startWeek) &#123;</span><br><span class="line">        <span class="built_in">this</span>.endWeek = <span class="built_in">this</span>.startWeek;</span><br><span class="line">        <span class="built_in">this</span>.startWeek = week;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.endWeek = week;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (time &lt; <span class="built_in">this</span>.startTime) &#123;</span><br><span class="line">        <span class="built_in">this</span>.endTime = <span class="built_in">this</span>.startTime;</span><br><span class="line">        <span class="built_in">this</span>.startTime = time;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.endTime = time;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.date.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="built_in">this</span>.startWeek &amp;&amp; i &lt;= <span class="built_in">this</span>.endWeek) &#123;</span><br><span class="line">          v.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (index &gt;= <span class="built_in">this</span>.startTime &amp;&amp; index &lt;= <span class="built_in">this</span>.endTime) &#123;</span><br><span class="line">              item.active = <span class="built_in">this</span>.isSelect;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">let</span> tempString = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="built_in">this</span>.date.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">        v.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (item.active) &#123;</span><br><span class="line">            tempString += <span class="string">&quot;1&quot;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tempString += <span class="string">&quot;0&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">this</span>.schedule_time = tempString;</span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">&quot;scheduleTime&quot;</span>, <span class="built_in">this</span>.schedule_time);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseMove</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; x, y, offsetX, offsetY &#125; = value;</span><br><span class="line">      <span class="keyword">if</span> (x &gt;= <span class="built_in">this</span>.ClickX &amp;&amp; y &gt;= <span class="built_in">this</span>.ClickY) &#123;</span><br><span class="line">        <span class="built_in">this</span>.screenX = <span class="built_in">this</span>.ClickX;</span><br><span class="line">        <span class="built_in">this</span>.screenY = <span class="built_in">this</span>.ClickY;</span><br><span class="line">        <span class="built_in">this</span>.mouseWidth = x - <span class="built_in">this</span>.ClickX + <span class="number">12</span> - offsetX;</span><br><span class="line">        <span class="built_in">this</span>.mouseHeight = y - <span class="built_in">this</span>.ClickY + <span class="number">30</span> - offsetY;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt;= <span class="built_in">this</span>.ClickX &amp;&amp; y &lt;= <span class="built_in">this</span>.ClickY) &#123;</span><br><span class="line">        <span class="built_in">this</span>.mouseWidth = x - <span class="built_in">this</span>.ClickX + <span class="number">12</span> - offsetX;</span><br><span class="line">        <span class="built_in">this</span>.mouseHeight = <span class="built_in">this</span>.ClickY - y + <span class="number">30</span> + offsetY;</span><br><span class="line">        <span class="built_in">this</span>.screenY = y - offsetY;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt;= <span class="built_in">this</span>.ClickX &amp;&amp; y &lt;= <span class="built_in">this</span>.ClickY) &#123;</span><br><span class="line">        <span class="built_in">this</span>.mouseWidth = <span class="built_in">this</span>.ClickX - x + <span class="number">12</span> + offsetX;</span><br><span class="line">        <span class="built_in">this</span>.mouseHeight = <span class="built_in">this</span>.ClickY - y + <span class="number">30</span> + offsetY;</span><br><span class="line">        <span class="built_in">this</span>.screenX = x - offsetX;</span><br><span class="line">        <span class="built_in">this</span>.screenY = y - offsetY;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt;= <span class="built_in">this</span>.ClickX &amp;&amp; y &gt;= <span class="built_in">this</span>.ClickY) &#123;</span><br><span class="line">        <span class="built_in">this</span>.mouseWidth = <span class="built_in">this</span>.ClickX - x + <span class="number">12</span> + offsetX;</span><br><span class="line">        <span class="built_in">this</span>.mouseHeight = y - <span class="built_in">this</span>.ClickY + <span class="number">30</span> - offsetY;</span><br><span class="line">        <span class="built_in">this</span>.screenX = x - offsetX;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">handleMouseClick</span>(<span class="params">val, item</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.Display = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseWidth = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">this</span>.mouseHeight = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">const</span> &#123; x, y, offsetX, offsetY &#125; = val;</span><br><span class="line">      <span class="built_in">this</span>.screenX = x - offsetX;</span><br><span class="line">      <span class="built_in">this</span>.screenY = y - offsetY;</span><br><span class="line">      <span class="built_in">this</span>.ClickX = x - offsetX;</span><br><span class="line">      <span class="built_in">this</span>.ClickY = y - offsetY;</span><br><span class="line">      <span class="keyword">const</span> &#123; active, time, week &#125; = item;</span><br><span class="line">      <span class="built_in">this</span>.isSelect = active;</span><br><span class="line">      <span class="built_in">this</span>.startTime = time;</span><br><span class="line">      <span class="built_in">this</span>.startWeek = week;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  filters: &#123;</span><br><span class="line">    <span class="function"><span class="title">weekend</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> weekend = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">0</span> ? (weekend = <span class="string">&quot;一&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">1</span> ? (weekend = <span class="string">&quot;二&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">2</span> ? (weekend = <span class="string">&quot;三&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">3</span> ? (weekend = <span class="string">&quot;四&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">4</span> ? (weekend = <span class="string">&quot;五&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">5</span> ? (weekend = <span class="string">&quot;六&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      value == <span class="number">6</span> ? (weekend = <span class="string">&quot;日&quot;</span>) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span> weekend;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">timeDifference</span>(<span class="params">time</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> timeDifference = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      time.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">          ? (timeDifference += <span class="string">`<span class="subst">$&#123;time[i]&#125;</span>~<span class="subst">$&#123;time[i + <span class="number">1</span>]&#125;</span> `</span>)</span><br><span class="line">          : <span class="string">&quot; &quot;</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> timeDifference;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="function"><span class="title">timeFiltrate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> arr = [];</span><br><span class="line">      <span class="keyword">let</span> tempArr = [];</span><br><span class="line">      <span class="built_in">this</span>.date.forEach(<span class="function">(<span class="params">item1, index1</span>) =&gt;</span> &#123;</span><br><span class="line">        item1.forEach(<span class="function">(<span class="params">item2, index2</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (item2.active) &#123;</span><br><span class="line">            tempArr.push(...item2.timeQuantum);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (tempArr.length !== <span class="number">0</span>) &#123;</span><br><span class="line">          arr.push(tempArr);</span><br><span class="line">          tempArr = [];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      arr.forEach(<span class="function">(<span class="params">item1, index1</span>) =&gt;</span> &#123;</span><br><span class="line">        item1.forEach(<span class="function">(<span class="params">item2, index2</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (arr[index1][index2] === arr[index1][index2 + <span class="number">1</span>]) &#123;</span><br><span class="line">            tempArr.push(index2, index2 + <span class="number">1</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        tempArr.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> b - a;</span><br><span class="line">        &#125;);</span><br><span class="line">        tempArr.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">          arr[index1].splice(v, <span class="number">1</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        tempArr = [];</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">List</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> [...new <span class="built_in">Array</span>(<span class="number">24</span>).keys()];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.schedule_time = <span class="built_in">this</span>.time;</span><br><span class="line">    <span class="built_in">this</span>.CreateData();</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="function"><span class="title">time</span>(<span class="params">newVal, oldVal</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.schedule_time = newVal;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=<span class="string">&quot;less&quot;</span> scoped&gt;</span><br><span class="line">.schedule &#123;</span><br><span class="line">  background: #2f88ff;</span><br><span class="line">  width: <span class="number">0</span>;</span><br><span class="line">  height: <span class="number">0</span>;</span><br><span class="line">  position: fixed;</span><br><span class="line">  display: none;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  left: <span class="number">0</span>;</span><br><span class="line">  pointer-events: none;</span><br><span class="line">  -webkit-transition: all 400ms ease;</span><br><span class="line">  -moz-transition: all 400ms ease;</span><br><span class="line">  -ms-transition: all 400ms ease;</span><br><span class="line">  transition: all 400ms ease;</span><br><span class="line">&#125;</span><br><span class="line">.calendar-table th &#123;</span><br><span class="line">  background: #f8f9fa;</span><br><span class="line">  font-weight: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line">.calendar-table tr td:first-child &#123;</span><br><span class="line">  background: #f8f9fa;</span><br><span class="line">&#125;</span><br><span class="line">.week-td &#123;</span><br><span class="line">  width: 75px;</span><br><span class="line">  padding: 20px <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.timeQuantum &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  left: <span class="number">0</span>;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-content: center;</span><br><span class="line">  .areadySelect,</span><br><span class="line">  .empty &#123;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    padding: 10px 10px 5px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    font-weight: <span class="number">600</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  .empty &#123;</span><br><span class="line">    color: #559eff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.calendar-table .tip-text &#123;</span><br><span class="line">  color: #999;</span><br><span class="line">  margin: 8px;</span><br><span class="line">&#125;</span><br><span class="line">.calendar-table tbody tr &#123;</span><br><span class="line">  height: 30px;</span><br><span class="line">  .ui-selected &#123;</span><br><span class="line">    background: #2f88ff;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.calendar-table &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">  -moz-user-select: none;</span><br><span class="line">  -ms-user-select: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  .td-selected-time &#123;</span><br><span class="line">    p &#123;</span><br><span class="line">      max-width: 571px;</span><br><span class="line">      word-<span class="keyword">break</span>: <span class="keyword">break</span>-all;</span><br><span class="line">      margin: 8px <span class="number">0</span>;</span><br><span class="line">      text-align: left;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      line-height: 22px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  tr,</span><br><span class="line">  td,</span><br><span class="line">  th &#123;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    border: 1px solid #e4e9ed;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    min-width: 11px;</span><br><span class="line">    line-height: <span class="number">1.</span>8em;</span><br><span class="line">    -webkit-transition: background 200ms ease;</span><br><span class="line">    -moz-transition: background 200ms ease;</span><br><span class="line">    -ms-transition: background 200ms ease;</span><br><span class="line">    transition: background 200ms ease;</span><br><span class="line">  &#125;</span><br><span class="line">  tr &#123;</span><br><span class="line">    .ui-selected &#123;</span><br><span class="line">      background: #2f88ff;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.byted-popover-wrapper &#123;</span><br><span class="line">  .bui-popper &#123;</span><br><span class="line">    z-index: <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  .bui-popover-arrow &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 10px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    -webkit-transform: rotate(45deg);</span><br><span class="line">    transform: rotate(45deg);</span><br><span class="line">  &#125;</span><br><span class="line">  .byted-popover[x-placement^=<span class="string">&quot;top&quot;</span>] &#123;</span><br><span class="line">    padding: 12px <span class="number">0</span>;</span><br><span class="line">    .bui-popover-arrow &#123;</span><br><span class="line">      bottom: 7px;</span><br><span class="line">      border-width: <span class="number">0</span> 1px 1px <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .bui-popover-panel &#123;</span><br><span class="line">    padding: 16px;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    -webkit-box-shadow: <span class="number">0</span> 2px 6px <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">    box-shadow: <span class="number">0</span> 2px 6px <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  .bui-popover-body &#123;</span><br><span class="line">    color: #666;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    line-height: 22px;</span><br><span class="line">    white-space: normal;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;TimeQuantum :time=<span class="string">&quot;schedule_time&quot;</span> @scheduleTime=<span class="string">&quot;getScheduleTime&quot;</span> /&gt;</span><br><span class="line"><span class="keyword">import</span> TimeQuantum <span class="keyword">from</span> <span class="string">&quot;timeQuantum.vue&quot;</span>;</span><br><span class="line">components:&#123;TimeQuantums&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> UI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UI </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>理想视口</title>
      <link href="2019/09/12/html-%E7%90%86%E6%83%B3%E8%A7%86%E5%8F%A3/"/>
      <url>2019/09/12/html-%E7%90%86%E6%83%B3%E8%A7%86%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>关于移动端的meta name=”viewport”的使用</p></blockquote><span id="more"></span><h3 id="标准的理想视口如下："><a href="#标准的理想视口如下：" class="headerlink" title="标准的理想视口如下："></a>标准的理想视口如下：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="普通的理想视口如下："><a href="#普通的理想视口如下：" class="headerlink" title="普通的理想视口如下："></a>普通的理想视口如下：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>标准的写法比普通的写法 多了一些设置。</p><ul><li>使用<strong>标准</strong>的写法可以一些莫名其妙的问题 （触屏事件中的clientX/Y和pageX/Y的演示）</li><li>使用<strong>普通</strong>的写法可能会出现一些莫名其妙的问题</li></ul><p><strong>在写项目中建议使用标准的写法</strong></p><p><strong>参数的描述 了解即可</strong></p><ul><li>meta标签用来描述或设置一个HTML网页文档的属性</li><li>content 要设置或者描述的内容</li><li>width 设置视口的宽度 <strong>device-width</strong>等于屏幕的宽度</li><li>initial-scale 页面打开的时候视口放大的倍数 <strong>值:1</strong></li><li>user-scalable 是否允许用户缩放页面 <strong>值：no</strong></li><li>maximum-scale 如果允许放大的话 最大放大多少倍 <strong>值 ：1</strong></li><li>minimum-scale 如果允许放大的话 最小放大多少倍 <strong>值 ：1</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node基础服务器</title>
      <link href="2019/07/12/node-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>2019/07/12/node-%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>node服务器的快捷搭建</p></blockquote><span id="more"></span><h2 id="搭建一个nodejs服务器"><a href="#搭建一个nodejs服务器" class="headerlink" title="搭建一个nodejs服务器"></a>搭建一个nodejs服务器</h2><h3 id="nodejs搭建服务器，需要4步："><a href="#nodejs搭建服务器，需要4步：" class="headerlink" title="nodejs搭建服务器，需要4步："></a>nodejs搭建服务器，需要4步：</h3><h4 id="1-引入http模块"><a href="#1-引入http模块" class="headerlink" title="1.引入http模块"></a>1.引入http模块</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);<span class="comment">// 语法就是 require(模块名称)</span></span><br></pre></td></tr></table></figure><h4 id="2-创建服务器对象"><a href="#2-创建服务器对象" class="headerlink" title="2.创建服务器对象"></a>2.创建服务器对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br></pre></td></tr></table></figure><h4 id="3-监听ip和端口"><a href="#3-监听ip和端口" class="headerlink" title="3.监听ip和端口"></a>3.监听ip和端口</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server.listen(端口,ip,回调函数);</span><br><span class="line"><span class="comment">// 例如</span></span><br><span class="line">server.listen(<span class="number">8080</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  提示用户，可以通过什么地址访问服务器</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="4-监听浏览器请求服务器的事件"><a href="#4-监听浏览器请求服务器的事件" class="headerlink" title="4.监听浏览器请求服务器的事件"></a>4.监听浏览器请求服务器的事件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// req - request - 请求对象，里面有请求所包含的数据 -请求头、请求体...</span></span><br><span class="line">  <span class="comment">// res - response - 响应对象，里面包含的是响应的数据 - 响应头、响应体...</span></span><br><span class="line">  <span class="comment">// 在事件处理程序里面把数据返回给浏览器</span></span><br><span class="line">  res.end(数据);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);<span class="comment">// 引入http模块,养成一个习惯，在node里面，要使用什么功能，就需要引入对应的模块</span></span><br><span class="line"><span class="comment">// 接着创建服务器对象</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="comment">// 接着为了可以 让浏览器找到我，监听ip和端口</span></span><br><span class="line"><span class="comment">// server.listen(端口,ip,回调函数) </span></span><br><span class="line"><span class="comment">// 其实ip和端口都是可以省略的，如果端口省略，默认是80，如果ip省略，默认是127.0.0.1</span></span><br><span class="line">server.listen(<span class="number">8080</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;服务器已经开启，请通过 http://127.0.0.1:8080 访问&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 开始监听浏览器的请求</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 在请求事件的处理程序里面，返回数据给浏览器</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">  &#125;,<span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高德地图与vue的使用</title>
      <link href="2019/06/26/vue-%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E4%BD%BF%E7%94%A8/"/>
      <url>2019/06/26/vue-%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>高德地图在vue中的使用，data绑定高德地图</p></blockquote><span id="more"></span><h4 id="首先介绍一下vue与高德-之间的联系"><a href="#首先介绍一下vue与高德-之间的联系" class="headerlink" title="首先介绍一下vue与高德 之间的联系"></a>首先介绍一下vue与高德 之间的联系</h4><p>vue与数据息息相关，而且，vue的数据使用是通过this来调用</p><p>也是把数据挂载到了vm实例身上，调用时，使用this调用vm实例上挂载的数据及其方便，所以在vue的使用时我们偶尔也会碰到this指向不明，指向的不是vm实例导致  数据输出undefined</p><p>高德的API使用简单，我们可以思考：与vue的this的挂载使用</p><h4 id="初始化地图"><a href="#初始化地图" class="headerlink" title="初始化地图"></a>初始化地图</h4><h5 id="调用地图接口-同步"><a href="#调用地图接口-同步" class="headerlink" title="调用地图接口-同步"></a>调用地图接口-同步</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">      type=<span class="string">&quot;text/javascript&quot;</span></span><br><span class="line">      src=<span class="string">&quot;https://webapi.amap.com/maps?v=1.4.15&amp;key=你个人的key，下面有高德与百度的链接&quot;</span></span><br><span class="line">    &gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><a href="https://lbs.amap.com/api/javascript-api/guide/abc/prepare">高德地图</a>            <a href="https://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/getkey">百度地图</a></p><h5 id="调用接口-异步"><a href="#调用接口-异步" class="headerlink" title="调用接口-异步"></a>调用接口-异步</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onLoad  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> map = <span class="keyword">new</span> AMap.Map(<span class="string">&#x27;container&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;https://webapi.amap.com/maps?v=1.4.15&amp;key=您申请的key值&amp;callback=onLoad&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> jsapi = doc.createElement(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">jsapi.charset = <span class="string">&#x27;utf-8&#x27;</span>;</span><br><span class="line">jsapi.src = url;</span><br><span class="line"><span class="built_in">document</span>.head.appendChild(jsapi);</span><br></pre></td></tr></table></figure><p>两者各有优缺，看场景使用</p><h6 id="官方的使用"><a href="#官方的使用" class="headerlink" title="官方的使用"></a>官方的使用</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> AMap.Map(<span class="string">&#x27;container&#x27;</span>, &#123;</span><br><span class="line">       zoom:<span class="number">11</span>,<span class="comment">//级别</span></span><br><span class="line">       center: [<span class="number">116.397428</span>, <span class="number">39.90923</span>],<span class="comment">//中心点坐标</span></span><br><span class="line">       viewMode:<span class="string">&#x27;3D&#x27;</span><span class="comment">//使用3D视图</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h6 id="与vue结合使用"><a href="#与vue结合使用" class="headerlink" title="与vue结合使用"></a>与vue结合使用</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          map:<span class="literal">null</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.map = <span class="keyword">new</span> AMap.Map(<span class="string">&quot;hotelMap&quot;</span>, &#123;</span><br><span class="line">        zoom: <span class="number">11</span>, <span class="comment">//级别</span></span><br><span class="line">        center: [<span class="number">116.397428</span>, <span class="number">39.90923</span>], <span class="comment">//中心点坐标</span></span><br><span class="line">        viewMode: <span class="string">&quot;3D&quot;</span> <span class="comment">//使用3D视图</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>两者的区别只是this与var的不同，但是实际上var 是定义一个全局的map变量让我们使用，我们在哪个函数都能使用map  因为他是全局的变量  </p><p>this却是让map这个变量挂载到vm实例身上，所以你需要在data里初始化map</p><h4 id="你的地图需要描点与打开信息窗体时"><a href="#你的地图需要描点与打开信息窗体时" class="headerlink" title="你的地图需要描点与打开信息窗体时"></a>你的地图需要描点与打开信息窗体时</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">       MapData:[],  <span class="comment">// 后台数据初始化</span></span><br><span class="line">      map: <span class="literal">null</span>,  <span class="comment">//地图初始化</span></span><br><span class="line">      infoWindow  <span class="comment">// 信息窗体</span></span><br><span class="line">      markers: <span class="literal">null</span>, <span class="comment">// 点的数据</span></span><br><span class="line">      center: [<span class="number">118.796623</span>, <span class="number">32.059352</span>]  <span class="comment">// 地图中心点</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>在vue调用地图时最好使用定时器调用，因为地图加载需要时间</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.setMapInfo();</span><br><span class="line"> &#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p>生成多个描点 需要后台返回经纬度信息，下面使用的数据已经是后台返回的带有经纬度信息location：{ longitude：经度 ，latitude：纬度}</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    <span class="function"><span class="title">setMapInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;location&#125; = <span class="built_in">this</span>.MapData[<span class="number">3</span>]  <span class="comment">//数据的第三条数据当地图中心</span></span><br><span class="line">      <span class="comment">//设置地图中心点</span></span><br><span class="line">      <span class="built_in">this</span>.center = [location.longitude,location.latitude]</span><br><span class="line">      <span class="built_in">this</span>.map = <span class="keyword">new</span> AMap.Map(<span class="string">&quot;hotelMap&quot;</span>, &#123;   <span class="comment">//初始化地图</span></span><br><span class="line">        zoom: <span class="number">10</span>, <span class="comment">//级别</span></span><br><span class="line">        center: <span class="built_in">this</span>.center, <span class="comment">//中心点坐标</span></span><br><span class="line">        viewMode: <span class="string">&quot;3D&quot;</span> <span class="comment">//使用3D视图</span></span><br><span class="line">      &#125;);</span><br><span class="line">        <span class="comment">//数据的循环  让点循环生成</span></span><br><span class="line">      <span class="built_in">this</span>.MapData.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//生成多个坐标点</span></span><br><span class="line">        <span class="built_in">this</span>.setMarker(v.area, [v.location.longitude, v.location.latitude], v);  <span class="comment">//第一个v.area  是点的标识，第二个是一个经纬度数据，第三个是v 后台的其他信息  ==》可以直接写参数v  其他的在setMarker</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//添加点标记</span></span><br><span class="line">    <span class="function"><span class="title">setMarker</span>(<span class="params">markers, position, data</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//点的设置</span></span><br><span class="line">      <span class="built_in">this</span>.markers = <span class="keyword">new</span> AMap.Marker(&#123;</span><br><span class="line">          <span class="comment">//点的内容，也是你在地图中显示的点的样式 你可以是一张图片 可以是圆，多边形</span></span><br><span class="line">        content: <span class="string">`&lt;div style=&quot;width:20px;height:28px;text-align:center;&quot; class=&quot;el-icon-location&quot;&gt;&lt;/div&gt;`</span>,</span><br><span class="line">        <span class="comment">//点的经纬度  也是位置</span></span><br><span class="line">        position: position,</span><br><span class="line">          <span class="comment">///点也有偏移</span></span><br><span class="line">        offset: <span class="keyword">new</span> AMap.Pixel(-<span class="number">17</span>, -<span class="number">42</span>), <span class="comment">// 相对于基点的偏移位置</span></span><br><span class="line">         <span class="comment">//地图一定要绑定在你想使用的地图上 也就是说在一个页面不一定只有一个地图</span></span><br><span class="line">        map: <span class="built_in">this</span>.map <span class="comment">//把点标记绑在前面初始化的 map_ 上，否则不显示</span></span><br><span class="line">      &#125;);</span><br><span class="line">        <span class="comment">//注册点的触发事件，触发信息窗体</span></span><br><span class="line">      <span class="built_in">this</span>.markers.on(<span class="string">&quot;mousemove&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//定义信息窗体的div内容</span></span><br><span class="line">        <span class="built_in">this</span>.content =  </span><br><span class="line">    <span class="string">`&lt;div&gt;&lt;img src=&quot;<span class="subst">$&#123;data.photos&#125;</span>&quot; style=&quot;width:100px; height:50px;margin:0 auto&quot;&gt; </span></span><br><span class="line"><span class="string">    &lt;div&gt;&lt;b style=&quot;color:#666&quot;&gt;<span class="subst">$&#123;data.name&#125;</span>&lt;/b&gt;`</span></span><br><span class="line">        <span class="comment">//重新设置信息窗体</span></span><br><span class="line">        <span class="built_in">this</span>.infoWindow = <span class="keyword">new</span> AMap.InfoWindow(&#123;</span><br><span class="line">            <span class="comment">//信息窗体相对于基点=》也就是经纬度的点 偏移的xy轴量</span></span><br><span class="line">          offset: <span class="keyword">new</span> AMap.Pixel(-<span class="number">5</span>, -<span class="number">50</span>),</span><br><span class="line">          content: <span class="built_in">this</span>.content <span class="comment">//传入 dom 对象，或者 html 字符串</span></span><br><span class="line">        &#125;);</span><br><span class="line">          <span class="comment">//设置信息窗体需要打开 ，参数是  这个地图this.map  和  position  打开的位置</span></span><br><span class="line">        <span class="built_in">this</span>.infoWindow.open(<span class="built_in">this</span>.map, position);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="实际效果"><a href="#实际效果" class="headerlink" title="实际效果"></a>实际效果</h5><p><img src="https://wang-z.gitee.io/img/map.png" class="lazyload" data-srcset="https://wang-z.gitee.io/img/map.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="地图"></p><h4 id="当你想要在地图外响应地图时"><a href="#当你想要在地图外响应地图时" class="headerlink" title="当你想要在地图外响应地图时"></a>当你想要在地图外响应地图时</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;traffic&quot;</span>&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">         &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in sceneryMapdata&quot;</span> :key=<span class="string">&quot;index&quot;</span> style=<span class="string">&quot;cursor:pointer;&quot;</span></span><br><span class="line">@mousemove=<span class="string">&quot;choose(item)&quot;</span>&gt;</span><br><span class="line">             &lt;span&gt;&#123;&#123;item.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;span&gt;&#123;&#123;item.biz_ext.rating&#125;&#125;公里&lt;/span&gt;</span><br><span class="line">&lt;/li&gt;     </span><br><span class="line">         &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//地图的标签</span></span><br><span class="line">      activeName:<span class="string">&quot;first&quot;</span>,</span><br><span class="line">      <span class="comment">// 地图的数据</span></span><br><span class="line">      sceneryMapdata:<span class="literal">null</span>,</span><br><span class="line">       <span class="comment">//地图加载时间</span></span><br><span class="line">      loading:<span class="literal">true</span>,</span><br><span class="line">      <span class="comment">//地图窗体信息</span></span><br><span class="line">      content: <span class="string">&quot;高级酒店&quot;</span>,</span><br><span class="line">      map: <span class="literal">null</span>,</span><br><span class="line">      markers: <span class="literal">null</span>,</span><br><span class="line">      infoWindow: <span class="literal">null</span>,</span><br><span class="line">      center: [<span class="number">118.796623</span>, <span class="number">32.059352</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">//触发地图的点</span></span><br><span class="line">    <span class="function"><span class="title">choose</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">       <span class="keyword">let</span> temp = data.location.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        temp = [temp[<span class="number">0</span>]-<span class="number">0</span>,temp[<span class="number">1</span>]-<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">this</span>.content = data.name</span><br><span class="line">         <span class="built_in">this</span>.infoWindow = <span class="keyword">new</span> AMap.InfoWindow(&#123;</span><br><span class="line">          offset: <span class="keyword">new</span> AMap.Pixel(-<span class="number">5</span>, -<span class="number">50</span>),</span><br><span class="line">          content: <span class="built_in">this</span>.content <span class="comment">//传入 dom 对象，或者 html 字符串</span></span><br><span class="line">        &#125;);</span><br><span class="line">       <span class="built_in">this</span>.infoWindow.open(<span class="built_in">this</span>.map, temp);</span><br><span class="line">    </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//添加点标记</span></span><br><span class="line">    <span class="function"><span class="title">setMarker</span>(<span class="params">markers, position, data</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.markers = <span class="keyword">new</span> AMap.Marker(&#123;</span><br><span class="line">        content: <span class="string">`&lt;div style=&quot;width:20px;height:28px;text-align:center;&quot; class=&quot;el-icon-location&quot;&gt;&lt;/div&gt;`</span>,</span><br><span class="line">        position: position,</span><br><span class="line">        offset: <span class="keyword">new</span> AMap.Pixel(-<span class="number">17</span>, -<span class="number">42</span>), <span class="comment">// 相对于基点的偏移位置</span></span><br><span class="line">        map: <span class="built_in">this</span>.map <span class="comment">//把点标记绑在前面初始化的 map_ 上，否则不显示</span></span><br><span class="line">      &#125;);</span><br><span class="line">       AMap.event.addListener(<span class="built_in">this</span>.markers,<span class="string">&quot;mousemove&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.content = data.name;</span><br><span class="line">        <span class="built_in">this</span>.infoWindow = <span class="keyword">new</span> AMap.InfoWindow(&#123;</span><br><span class="line">          offset: <span class="keyword">new</span> AMap.Pixel(-<span class="number">5</span>, -<span class="number">50</span>),</span><br><span class="line">          content: <span class="built_in">this</span>.content <span class="comment">//传入 dom 对象，或者 html 字符串</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">this</span>.infoWindow.open(<span class="built_in">this</span>.map, position);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">setMapInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;location&#125; = <span class="built_in">this</span>.sceneryMapdata[<span class="number">3</span>]</span><br><span class="line">      <span class="comment">//重新设置地图中心点</span></span><br><span class="line">      <span class="keyword">const</span> temp = location.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.center = [temp[<span class="number">0</span>]-<span class="number">0</span>,temp[<span class="number">1</span>]-<span class="number">0</span>]</span><br><span class="line">      <span class="built_in">this</span>.map = <span class="keyword">new</span> AMap.Map(<span class="string">&quot;detailMap&quot;</span>, &#123;</span><br><span class="line">        zoom: <span class="number">14</span>, <span class="comment">//级别</span></span><br><span class="line">        center: <span class="built_in">this</span>.center, <span class="comment">//中心点坐标</span></span><br><span class="line">        viewMode: <span class="string">&quot;3D&quot;</span> <span class="comment">//使用3D视图</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">this</span>.sceneryMapdata.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//生成多个坐标点</span></span><br><span class="line">        <span class="keyword">let</span> str = v.location.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.setMarker(v.name, [str[<span class="number">0</span>]-<span class="number">0</span>,str[<span class="number">1</span>]-<span class="number">0</span>], v);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//请求数据</span></span><br><span class="line">    <span class="function"><span class="title">getMapdata</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.$axios(&#123;</span><br><span class="line">      url:<span class="string">`https://restapi.amap.com/v3/place/text`</span>,</span><br><span class="line">      params:&#123;</span><br><span class="line">        keyword:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        location:<span class="string">&quot;118.732841,32.077242&quot;</span>,</span><br><span class="line">        city:<span class="string">&quot;南京市&quot;</span>,</span><br><span class="line">        types:<span class="string">&quot;风景名胜&quot;</span>,</span><br><span class="line">        output:<span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">        page:<span class="number">1</span>,</span><br><span class="line">        offset:<span class="number">10</span>,</span><br><span class="line">        key:<span class="string">&#x27;key私人定制&#x27;</span>  <span class="comment">//=》 这个key是一个web服务 当你创建key可以选择</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.sceneryMapdata = res.data.pois</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setMapInfo();</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">    <span class="comment">//请求数据</span></span><br><span class="line">    <span class="built_in">this</span>.getMapdata()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js逻辑执行</title>
      <link href="2019/06/20/js-%E9%80%BB%E8%BE%91%E6%89%A7%E8%A1%8C/"/>
      <url>2019/06/20/js-%E9%80%BB%E8%BE%91%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>js执行上下文时，变量提升,作用域</p></blockquote><span id="more"></span><h2 id="全局污染"><a href="#全局污染" class="headerlink" title="全局污染"></a>全局污染</h2><blockquote><p>所谓全局变量污染 ：定义多个全局变量，函数，对象挂载在window上，如果重复使用则造成变量冲突</p><p>如果定义一个全局变量则会在window上挂载这个变量，所有的函数，对象，引用此js文件的都可以使用</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">Window</span><br><span class="line">a: <span class="number">10</span></span><br><span class="line">alert: ƒ alert()</span><br><span class="line">applicationCache: ApplicationCache &#123;<span class="attr">status</span>: <span class="number">0</span>, <span class="attr">oncached</span>: <span class="literal">null</span>, <span class="attr">onchecking</span>: <span class="literal">null</span>, <span class="attr">ondownloading</span>: <span class="literal">null</span>, <span class="attr">onerror</span>: <span class="literal">null</span>, …&#125;</span><br><span class="line">。。。。。。。</span><br></pre></td></tr></table></figure><h3 id="污染"><a href="#污染" class="headerlink" title="污染"></a>污染</h3><p>如同衣物沾上污渍，笔墨落入清水。</p><p>全局window是大家都能使用，如果在全局挂载变量太多，难免会调用重复的变量，改变其属性或值。</p><p>在开发中，多人共同开发，每个人的代码习惯不同，命名方法不同，如果其他人命名一个变量ID，那么，在调用ID时会改变上一个人的ID导致不是自己想要的ID。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//developer_first.js</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> ID = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(ID);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="comment">//developer_second.js</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> ID = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(ID);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="comment">//developer_thirdly.js</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> ID = <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(ID);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在主文件中调用</span></span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;developer_first.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;developer_second.js&quot;</span>&gt;&lt;/script&gt;  </span><br><span class="line">&lt;script src=<span class="string">&quot;developer_thirdly.js&quot;</span>&gt;&lt;<span class="regexp">/script&gt;   /</span><span class="regexp">/最后的</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;输出  4 4 4</span></span><br></pre></td></tr></table></figure><p>ID会使用最后调用的js文件</p><p>为了避免全局污染，应慎重使用全局变量。了解模块化，或者let 定义的let不在window里 在script内有效</p><p>或者函数{}内有效，形成块级作用域</p><h2 id="执行上下文"><a href="#执行上下文" class="headerlink" title="执行上下文"></a>执行上下文</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">在开始说明JS上下文栈和作用域之前，我们先说明下JS上下文以及作用域的概念。</span><br><span class="line">执行上下文就是当前 JavaScript 代码被解析和执行时所在环境的抽象概念， JavaScript 中运行任何的代码都是在执行上下文中运行。</span><br><span class="line">执行上下文类型分为：</span><br><span class="line">全局执行上下文</span><br><span class="line">函数执行上下文</span><br><span class="line">执行上下文创建过程中，需要做以下几件事:</span><br><span class="line">创建变量对象：首先初始化函数的参数arguments，提升函数声明和变量声明。</span><br><span class="line">创建作用域链（Scope Chain）：在执行期上下文的创建阶段，作用域链是在变量对象之后创建的。</span><br><span class="line">确定this的值，即 ResolveThisBinding</span><br><span class="line">作用域</span><br><span class="line">**作用域**负责收集和维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。—— 摘录自《你不知道的JavaScript》(上卷)</span><br><span class="line">作用域有两种工作模型：词法作用域和动态作用域，JS采用的是**词法作用域**工作模型，词法作用域意味着作用域是由书写代码时变量和函数声明的位置决定的。(`with` 和 `eval` 能够修改词法作用域，但是不推荐使用，对此不做特别说明)</span><br><span class="line">作用域分为：</span><br><span class="line">全局作用域</span><br><span class="line">函数作用域</span><br><span class="line">块级作用域</span><br><span class="line">JS执行上下文栈(后面简称执行栈)</span><br><span class="line">执行栈，也叫做调用栈，具有 **LIFO** (后进先出) 结构，用于存储在代码执行期间创建的所有执行上下文。</span><br><span class="line">规则如下：</span><br><span class="line">首次运行JavaScript代码的时候,会创建一个全局执行的上下文并Push到当前的执行栈中，每当发生函数调用，引擎都会为该函数创建一个新的函数执行上下文并Push当前执行栈的栈顶。</span><br><span class="line">当栈顶的函数运行完成后，其对应的函数执行上下文将会从执行栈中Pop出，上下文的控制权将移动到当前执行栈的下一个执行上下文。</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">first</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">second</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    first()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">third</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    second()</span><br><span class="line">&#125;</span><br><span class="line">third()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js常见的继承方式</title>
      <link href="2019/06/20/js-%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F/"/>
      <url>2019/06/20/js-%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>js中的继承：在js中的继承只是属性和方法的继承 一般没有所谓的多态性，js的继承只是为了使代码的复用性更高。</p></blockquote><span id="more"></span><h3 id="js的继承是通过prototype来继承的"><a href="#js的继承是通过prototype来继承的" class="headerlink" title="js的继承是通过prototype来继承的"></a>js的继承是通过prototype来继承的</h3><h4 id="1-原型链继承"><a href="#1-原型链继承" class="headerlink" title="1 原型链继承"></a>1 原型链继承</h4><p>这种方式关键在于:**子类型的原型为父类型的一个实例对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//父类型</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name,</span><br><span class="line">    <span class="built_in">this</span>.age = age,</span><br><span class="line">    <span class="built_in">this</span>.play = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="comment">//子类型</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">price</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.price = price</span><br><span class="line">    <span class="built_in">this</span>.setScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// Student.prototype.sayHello = function () &#123; &#125;//在这里写子类的原型方法和属性是无效的，</span></span><br><span class="line"><span class="comment">//因为会改变原型的指向，所以应该放到重新指定之后</span></span><br><span class="line">  Student.prototype = <span class="keyword">new</span> Person() <span class="comment">// 子类型的原型为父类型的一个实例对象</span></span><br><span class="line">  <span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="number">15000</span>)</span><br><span class="line">  <span class="keyword">var</span> s2 = <span class="keyword">new</span> Student(<span class="number">14000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(s1,s2)    </span><br></pre></td></tr></table></figure><p>说明：定义一个Person父类型拥有对象和方法   <code> Person.prototype.setAge = function () &#123;&#125;</code> 这是一种在外部定义的一个在prototype原型上的方法 原理：每个function身上都有一个原型 在原型身上可以挂载方法和属性</p><p><code>Student.prototype = new Person()</code>  Student原型指向Person的实例对象，所以<strong>子类的实例就可以通过proto__访问到 Student.prototype 也就是Person的实例，这样就可以访问到父类的私有方法，然后再通过__proto指向父类的prototype就可以获得到父类原型上的方法</strong>。于是做到了将父类的私有、公有方法和属性都当做子类的公有属性</p><p>弊端：<strong>子类继承父类的属性和方法是将父类的私有属性和公有方法都作为自己的公有属性和方法</strong> 如果父类的私有属性有引用类型，子类继承的是这个父类的引用地址 如果子类操作父类的引用类型就会导致引用类型改变</p><p><strong>我们需要在子类中添加新的方法或者是重写父类的方法时候，切记一定要放到替换原型的语句之后</strong></p><h4 id="2-借用构造函数继承"><a href="#2-借用构造函数继承" class="headerlink" title="2  借用构造函数继承"></a>2  借用构造函数继承</h4><p>这种方式关键在于:<strong>在子类型构造函数中通用call()调用父类型构造函数</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name,</span><br><span class="line">  <span class="built_in">this</span>.age = age,</span><br><span class="line">  <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age)  <span class="comment">// 相当于: this.Person(name, age)</span></span><br><span class="line">  <span class="comment">/*this.name = name</span></span><br><span class="line"><span class="comment">  this.age = age*/</span></span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">15000</span>)</span><br></pre></td></tr></table></figure><p>说明：在Student中构造Person的属性和方法，但是只是实现部分继承，如果父类的属性和方法太多，继承麻烦。但是解决了引用类型的问题因为这个构造函数是再次创建实例</p><p>弊端：子类的实例是根据父类的实例重新构造的，<strong>只能继承父类的实例属性和方法，不能继承原型属性和方法</strong> 代码复用性弱，每个子类都是父类的实例函数副本，影响性能</p><h4 id="3-原型链-借用构造函数的组合继承"><a href="#3-原型链-借用构造函数的组合继承" class="headerlink" title="3 原型链+借用构造函数的组合继承"></a>3 原型链+借用构造函数的组合继承</h4><p>这种方式关键在于:<strong>通过调用父类构造，继承父类的属性并保留传参的优点，然后通过将父类实例作为子类原型，实现函数复用</strong> 。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name,</span><br><span class="line">  <span class="built_in">this</span>.age = age,</span><br><span class="line">  <span class="built_in">this</span>.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;111&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//第一次调用构造函数</span></span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age)</span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">  <span class="built_in">this</span>.setScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 令Student的原型指向Person的实例</span></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()</span><br><span class="line">Student.prototype.constructor = Student<span class="comment">//组合继承也是需要修复构造函数指向的</span></span><br><span class="line">Student.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">15000</span>)</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> Student(<span class="string">&#x27;Jack&#x27;</span>, <span class="number">22</span>, <span class="number">14000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1)</span><br><span class="line"><span class="built_in">console</span>.log(s1.constructor) <span class="comment">//Student</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.constructor) <span class="comment">//Person   </span></span><br></pre></td></tr></table></figure><p>说明：在子类中调用构造函数生成实例对象但是只是包含属性，在子类的原型链上继承Person的实例，再次使用构造函数，是刚继承的实例构造成一个新的实例赋值 这个实例属于Student  构造函数（constructor） –字面意思，能构造一个实例的函数 </p><p>弊端：无论如何都会调用两次构造函数，创建子类的原型和子类构造函数内部</p><h4 id="4-组合继承的优化-原型指向"><a href="#4-组合继承的优化-原型指向" class="headerlink" title="4 组合继承的优化-原型指向"></a>4 组合继承的优化-原型指向</h4><p>这种方式关键在于 <strong>通过父类原型和子类原型指向同一对象，子类可以继承到父类的公有方法当做自己的公有方法，而且不会初始化两次实例方法/属性，避免的组合继承的缺点</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name,</span><br><span class="line">  <span class="built_in">this</span>.age = age,</span><br><span class="line">  <span class="built_in">this</span>.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;111&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//构造函数</span></span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age)</span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">  <span class="built_in">this</span>.setScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//原型的赋值</span></span><br><span class="line">Student.prototype = Person.prototype</span><br><span class="line">Student.prototype.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">15000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1)  </span><br></pre></td></tr></table></figure><p>说明：原型的赋值会让两个类指向同一个对象 ，与上面的区别在于一个是构造函数的赋值 这是原型的赋值，不会生成两次实例</p><p>弊端：父类指向不明，都是原型的赋值 同一个对象，没有父子关系，引用类型问题，</p><h4 id="5-组合继承的优化-创建对象"><a href="#5-组合继承的优化-创建对象" class="headerlink" title="5 组合继承的优化-创建对象"></a>5 组合继承的优化-创建对象</h4><p>这种方式关键在于 <strong>借助原型可以基于已有的对象来创建对象，var B = Object.create(A)以A对象为原型，生成了B对象。B继承了A的所有属性和方法</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name,</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;111&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//构造函数</span></span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age)</span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">  <span class="built_in">this</span>.setScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype)<span class="comment">//核心代码</span></span><br><span class="line">Student.prototype.constructor = Student<span class="comment">//核心代码</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">15000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1 <span class="keyword">instanceof</span> Student, s1 <span class="keyword">instanceof</span> Person) <span class="comment">// true true</span></span><br><span class="line"><span class="built_in">console</span>.log(s1.constructor) <span class="comment">//Student</span></span><br><span class="line"><span class="built_in">console</span>.log(s1)</span><br></pre></td></tr></table></figure><p>说明：<code>Student.prototype = Object.create(Person.prototype)</code> 创建一个基于Person的的prototype创建一个新的对象给Student，继承Person 的所有的属性和方法 （Object.create）Object身上挂载create这个方法可以创建新的对象</p><p>目前来说，使用缺点都解决了，但是还未趋近完美</p><h4 id="6-Es6的class继承"><a href="#6-Es6的class继承" class="headerlink" title="6 Es6的class继承"></a>6 Es6的class继承</h4><p>ES6中引入了class关键字，class可以通过extends关键字实现继承，还可以通过static关键字定义类的静态方法,这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。</p><p>ES5 的继承，实质是先创造子类的实例对象this，然后再将父类的方法添加到this上面（Parent.apply(this)）。ES6 的继承机制完全不同，实质是先将父类实例对象的属性和方法，加到this上面（所以必须先调用super方法），然后再用子类的构造函数修改this。</p><p><strong>需要注意的是，class关键字只是原型的语法糖，JavaScript继承仍然是基于原型实现的</strong>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">//调用类的构造方法</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, age</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//定义一般的方法</span></span><br><span class="line">  showName () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;调用父类的方法&quot;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;kobe&#x27;</span>, <span class="number">39</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1)</span><br><span class="line"><span class="comment">//定义一个子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, age, salary</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age)<span class="comment">//通过super调用父类的构造方法</span></span><br><span class="line">    <span class="built_in">this</span>.salary = salary</span><br><span class="line">  &#125;</span><br><span class="line">  showName () &#123;<span class="comment">//在子类自身定义方法</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;调用子类的方法&quot;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age, <span class="built_in">this</span>.salary);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> s1 = <span class="keyword">new</span> Student(<span class="string">&#x27;wade&#x27;</span>, <span class="number">38</span>, <span class="number">1000000000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1)</span><br><span class="line">s1.showName() </span><br></pre></td></tr></table></figure><p>说明：本质上原型和class没有区别，但是代码的整洁可读性更高 ，super相当于原型继承的 <code>Person.call(this, name, age)</code> </p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> function </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue组件传值</title>
      <link href="2019/06/15/vue-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/"/>
      <url>2019/06/15/vue-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue组件的Props校验，传递</p></blockquote><span id="more"></span><h3 id="Props-校验"><a href="#Props-校验" class="headerlink" title="Props 校验"></a>Props 校验</h3><h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#39;my-component&#39;, &#123;</span><br><span class="line">    &#x2F;&#x2F; 带有默认值的对象</span><br><span class="line">    propA: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      &#x2F;&#x2F; 对象或数组默认值必须从一个工厂函数获取</span><br><span class="line">      default: function () &#123;</span><br><span class="line">        return &#123; name: &#39;wang&#39; &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">Vue.component(&#39;my-component&#39;, &#123;</span><br><span class="line">    &#x2F;&#x2F; 带有默认值的对象</span><br><span class="line">    propA: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      &#x2F;&#x2F; 对象或数组默认值必须从一个工厂函数获取</span><br><span class="line">      default:()&#x3D;&gt;&#123; name: &#39;wang&#39; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="自定义校验"><a href="#自定义校验" class="headerlink" title="自定义校验"></a>自定义校验</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#39;my-component&#39;, &#123;</span><br><span class="line">    &#x2F;&#x2F; 自定义验证函数</span><br><span class="line">    propF: &#123;</span><br><span class="line">      validator: function (value) &#123;</span><br><span class="line">        &#x2F;&#x2F; 这个值必须匹配下列字符串中的一个</span><br><span class="line">        return [&#39;success&#39;, &#39;warning&#39;, &#39;danger&#39;].indexOf(value) !&#x3D;&#x3D; -1</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="type类型校验"><a href="#type类型校验" class="headerlink" title="type类型校验"></a>type类型校验</h4><blockquote><p>可以设置为<code>String</code> <code>Number</code> <code>Boolean</code> <code>Array</code> <code>Object</code> <code>Date</code> <code>Function</code> <code>Symbol</code></p><p>亦可设置多个 [‘<code>String</code> ‘,’<code>Number</code> ‘]</p></blockquote><h3 id="1父传子"><a href="#1父传子" class="headerlink" title="1父传子"></a>1父传子</h3><p>通过父组件定义动态绑定一个数据来给子组件传递数据  ，子组件通过props来接受数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:data=<span class="string">&quot;data&quot;</span>  =&gt;&gt; props:&#123;data&#125;  &gt;&gt;&gt;&gt;直接在template中使用data</span><br></pre></td></tr></table></figure><h3 id="属性透析"><a href="#属性透析" class="headerlink" title="属性透析"></a>属性透析</h3><blockquote><p>v-bind=”$props”: 可以将父组件的所有props下发给它的子组件,子组件需要在其props:{} 中定义要接受的props。</p></blockquote><blockquote><p>v-bind=”$attrs”: 将调用组件时的组件标签上绑定的非props的特性(class和style除外)向下传递。在子组件中应当添加inheritAttrs: false(避免父作用域的不被认作props的特性绑定应用在子组件的根元素上)。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button v-bind=<span class="string">&quot;$attrs&quot;</span>&gt;确定&lt;/el-button&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件使用-&gt;其身上的属性都传递给子组件</span></span><br><span class="line">&lt;my-button type=<span class="string">&#x27;primary&#x27;</span> size=<span class="string">&#x27;mini&#x27;</span>/&gt;</span><br></pre></td></tr></table></figure><p><code>在$attrs里面只会有props没有注册的属性</code></p><blockquote><p>.v-on=”将父组件标签上的自定义事件向下传递其子组件可以直接通过emit(eventName)的方式调用。</p><p><code>　　vm.$listeners</code>: 包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。它可以通过 v-on=”$listeners” 传入内部组件——在创建更高层次的组件时非常有用。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;top&gt;</span><br><span class="line">  &lt;center</span><br><span class="line">      name&#x3D;&quot;name&quot;</span><br><span class="line">      age&#x3D;&quot;18&quot;</span><br><span class="line">      gender&#x3D;&quot;666&quot;</span><br><span class="line">      sdf&#x3D;&quot;asd&quot;</span><br><span class="line">      @isClick&#x3D;&quot;isClick&quot;</span><br><span class="line">      @asd&#x3D;&quot;asd&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;bottom</span><br><span class="line">      v-bind&#x3D;&quot;$attrs&quot;</span><br><span class="line">      v-on&#x3D;&quot;$listeners&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;&#x2F;bottom&gt;</span><br><span class="line">  &lt;&#x2F;center&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br><span class="line">&#x2F;&#x2F;top.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import centers from &#39;~&#x2F;components&#x2F;center&#39;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      centers</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      asd() &#123;</span><br><span class="line">        console.log(999);</span><br><span class="line">      &#125;,</span><br><span class="line">      isClick() &#123;</span><br><span class="line">        &#x2F;&#x2F;可以监听到子组件center内的bottom组件emit事件</span><br><span class="line">        console.log(666);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#x2F;&#x2F;center.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import bottom from &#39;~&#x2F;components&#x2F;bottom&#39;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      bottom</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">      name: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#39;default&#39;</span><br><span class="line">      &#125;,</span><br><span class="line">      age: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#39;default&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#x2F;&#x2F;bottom.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      gender: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &#39;&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      console.log(this.$attrs);</span><br><span class="line">      console.log(this.$listeners);</span><br><span class="line">      this.$listeners.isClick();</span><br><span class="line">      this.$listeners.asd();</span><br><span class="line">      &#x2F;&#x2F;子组件emit事件</span><br><span class="line">      this.$emit(&#39;isClick&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h4 id="具体例子"><a href="#具体例子" class="headerlink" title="具体例子"></a>具体例子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">father</span>&gt;</span><span class="tag">&lt;/<span class="name">father</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;father&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件&#123;&#123;fname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我要告诉我儿子其实他是&#123;&#123;type&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">son</span> <span class="attr">:mytype</span>=<span class="string">&quot;type&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;son&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件&#123;&#123;sname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的老爸告诉我我其实是&#123;&#123;mytype&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建父组件</span></span></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">&#x27;father&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">            template: <span class="string">&#x27;#father&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    fname:<span class="string">&#x27;老爸&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    type:<span class="string">&#x27;穷二代&#x27;</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="comment">// 通过components来创建子组件,可以创建多个</span></span></span><br><span class="line">            components: &#123;</span><br><span class="line"><span class="javascript">                <span class="string">&#x27;son&#x27;</span>: &#123;</span></span><br><span class="line"><span class="javascript">                    template: <span class="string">&#x27;#son&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    props:[<span class="string">&#x27;mytype&#x27;</span>],</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                            sname:<span class="string">&#x27;小明&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// mytype:&#x27;??&#x27;</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2子传父"><a href="#2子传父" class="headerlink" title="2子传父"></a>2子传父</h3><p>通过子组件发射（$emit）数据 父组件接受数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(事件名称,你想传递的数据) =&gt;&gt;父组件监听这个事件（@/v-on）  @事件名称=“方法（参数）” =&gt;&gt;这个方法默认参数就是传递的数据</span><br></pre></td></tr></table></figure><h4 id="具体例子-1"><a href="#具体例子-1" class="headerlink" title="具体例子"></a>具体例子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">father</span>&gt;</span> <span class="tag">&lt;/<span class="name">father</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;father&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&#x27;border:solid 1px&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件&#123;&#123;fname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的儿子告诉我他的女朋友的名字叫&#123;&#123;erxifu&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;son v-on:getname=&#x27;ok&#x27;&gt;&lt;/son&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">son</span> @<span class="attr">getname</span>=<span class="string">&#x27;ok&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;son&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件&#123;&#123;sname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;tellname&#x27;</span>&gt;</span>点击告诉我老爸我的女朋友叫&#123;&#123;mygfname&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建父组件</span></span></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">&#x27;father&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">            template: <span class="string">&#x27;#father&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    fname:<span class="string">&#x27;老爸&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    erxifu:<span class="string">&#x27;??&#x27;</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods:&#123;</span><br><span class="line"><span class="javascript">                <span class="comment">// 这个事件处理函数默认有一个参数,这个参数就是之前事件传递的数据</span></span></span><br><span class="line"><span class="javascript">                <span class="function"><span class="title">ok</span>(<span class="params">data</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(data)</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.erxifu = data</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="comment">// 通过components来创建子组件,可以创建多个</span></span></span><br><span class="line">            components: &#123;</span><br><span class="line"><span class="javascript">                <span class="string">&#x27;son&#x27;</span>: &#123;</span></span><br><span class="line"><span class="javascript">                    template: <span class="string">&#x27;#son&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                            sname:<span class="string">&#x27;小明&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                            mygfname:<span class="string">&#x27;小红&#x27;</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods:&#123;</span><br><span class="line"><span class="javascript">                        <span class="function"><span class="title">tellname</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// 发射一个事件</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">// this.$emit(事件名称,你想传递的数据)</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">// 数据可以是任意数据</span></span></span><br><span class="line"><span class="javascript">                            <span class="built_in">this</span>.$emit(<span class="string">&#x27;getname&#x27;</span>,<span class="built_in">this</span>.mygfname)</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;/html</span><br></pre></td></tr></table></figure><h3 id="3子传子"><a href="#3子传子" class="headerlink" title="3子传子"></a>3子传子</h3><p>通过事件总线传值，子组件通过事件总线对象发射数据，父组件接受数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bus = <span class="keyword">new</span> Vue() = <span class="string">&quot;创建vue事件总线&quot;</span> =&gt;&gt; 子组件通过bus.$emit(事件名称,你想传递的数据) ==&gt;&gt;兄弟组件通过bus.$on(事件名称,<span class="function">(<span class="params">传递过来的数据</span>)=&gt;</span>&#123;</span><br><span class="line">  处理逻辑</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="具体例子-2"><a href="#具体例子-2" class="headerlink" title="具体例子"></a>具体例子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">father</span>&gt;</span>  <span class="tag">&lt;/<span class="name">father</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;father&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&#x27;border:solid 1px&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件&#123;&#123;fname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">son</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dauther</span>&gt;</span><span class="tag">&lt;/<span class="name">dauther</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;son&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是儿子组件&#123;&#123;sname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我的妹妹回来了,跟我说她的男朋友叫:&#123;&#123;meifu&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&#x27;dauther&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dauther&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是女儿组件&#123;&#123;dname&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;tellname&#x27;</span>&gt;</span>点击向我哥哥炫耀我的男朋友的名字叫&#123;&#123;mybfname&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建一个事件总线</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> bus = <span class="keyword">new</span> Vue()</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建父组件</span></span></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">&#x27;father&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">            template: <span class="string">&#x27;#father&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                    fname: <span class="string">&#x27;老爸&#x27;</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="comment">// 通过components来创建子组件,可以创建多个</span></span></span><br><span class="line">            components: &#123;</span><br><span class="line"><span class="javascript">                <span class="string">&#x27;son&#x27;</span>: &#123;</span></span><br><span class="line"><span class="javascript">                    template: <span class="string">&#x27;#son&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                            sname: <span class="string">&#x27;小明&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                            meifu:<span class="string">&#x27;??&#x27;</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line"><span class="javascript">                    <span class="comment">// 在mounTed钩子函数中进行事件的监听</span></span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 通过事件总线的$on进行事件的监听</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// 事件处理函数默认有一个参数,就是传递的数据</span></span></span><br><span class="line"><span class="javascript">                        bus.$on(<span class="string">&#x27;getname&#x27;</span>,<span class="function">(<span class="params">data</span>) =&gt;</span>　&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">console</span>.log(data) </span></span><br><span class="line"><span class="javascript">                            <span class="built_in">this</span>.meifu = data</span></span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="string">&#x27;dauther&#x27;</span>: &#123;</span></span><br><span class="line"><span class="javascript">                    template: <span class="string">&#x27;#dauther&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                            dname: <span class="string">&#x27;小红&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                            mybfname:<span class="string">&#x27;狗蛋&#x27;</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    methods:&#123;</span><br><span class="line"><span class="javascript">                        <span class="comment">// 通过事件总线发射一个事件</span></span></span><br><span class="line"><span class="javascript">                        <span class="function"><span class="title">tellname</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                            bus.$emit(<span class="string">&#x27;getname&#x27;</span>,<span class="built_in">this</span>.mybfname)</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">            data: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>this指向</title>
      <link href="2019/06/02/js-this%E6%8C%87%E5%90%91/"/>
      <url>2019/06/02/js-this%E6%8C%87%E5%90%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p>js函数中的this指向及call apply bind对于this的改变</p></blockquote><span id="more"></span><h3 id="如何理解This指向"><a href="#如何理解This指向" class="headerlink" title="如何理解This指向"></a>如何理解This指向</h3><blockquote><p>this ：谁调用它 他就指向谁。（<strong>this 永远指向最后调用它的那个对象</strong>）</p></blockquote><p>1.在浏览器：如果this是在函数外部则this指向window</p><p>2.在node环境：如果this在函数外部则指向{}</p><p>​    如果有new绑定 则指向这个new的实例对象</p><p>​    函数是否通过 call,apply 调用，或者使用了 bind 绑定，如果是，那么this绑定的就是指定的对象【归结为显式绑定】。</p><blockquote><p>这里同样需要注意一种<strong>特殊</strong>情况，如果 call,apply 或者 bind 传入的第一个参数值是 <code>undefined</code> 或者 <code>null</code>，严格模式下 this 的值为传入的值 null /undefined。非严格模式下，实际应用的默认绑定规则，this 指向全局对象(node环境为global，浏览器环境为window)</p></blockquote><p>隐式绑定，函数的调用是在某个对象上触发的，即调用位置上存在上下文对象。典型的隐式调用为: <code>xxx.fn()</code></p><p>箭头函数的情况：箭头函数没有自己的this，继承外层上下文绑定的this。</p><h4 id="看看具体例子"><a href="#看看具体例子" class="headerlink" title="看看具体例子"></a>看看具体例子</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;windowsName&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    <span class="comment">// name: &quot;Cherry&quot;,</span></span><br><span class="line">    fn : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);      <span class="comment">//==》undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.a.fn();</span><br></pre></td></tr></table></figure><blockquote><p> 说明：这里有通过window调用a ，最后调用的是谁的呢？？  其实是a最后调用了this=》》a里面没有那么这个属性，即使外面的window有name也不会调用==》》就像我们对于变量的调用一样，，函数内部的变量不可以使用其他的函数内部的变量，a和window是两个函数  即使window包括a但是调用的时候是使用this  指向了a  也就是标明  我一定要使用a里面的属性</p></blockquote><h4 id="再看看这个坑"><a href="#再看看这个坑" class="headerlink" title="再看看这个坑"></a>再看看这个坑</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;windowsName&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    name : <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// name: &quot;Cherry&quot;,</span></span><br><span class="line">    fn : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);      <span class="comment">//==&gt; windowsName</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = a.fn;</span><br><span class="line">f();</span><br></pre></td></tr></table></figure><p>为什么和之前的调用差不多 this却是指向window  由上往下看，var f 的时候根本没有调用a.fn;</p><p>最后fn（）  是使用了window调用的 所以指向了外面的name</p><p>this 的指向并不是在创建的时候就可以确定的  永远指向最后调用的它</p><p>call和apply以及bind都与this有关 因为他们改变了this的指向</p><h3 id="this指向改变的几种方法"><a href="#this指向改变的几种方法" class="headerlink" title="this指向改变的几种方法"></a>this指向改变的几种方法</h3><h5 id="1-当你new一个对象时-this就指向创建的实例"><a href="#1-当你new一个对象时-this就指向创建的实例" class="headerlink" title="1.当你new一个对象时  this就指向创建的实例"></a>1.当你new一个对象时  this就指向创建的实例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">// 我们可以使用data创建时间 这是因为data的this在赋值当中已经指向实例new Date（）</span></span><br></pre></td></tr></table></figure>  <figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new 的实现原理:</span><br><span class="line">创建一个空对象，构造函数中的this指向这个空对象</span><br><span class="line">这个新对象被执行 [[原型]] 连接</span><br><span class="line">执行构造函数方法，属性和方法被添加到this引用的对象中</span><br><span class="line">如果构造函数中没有返回其它对象，那么返回this，即创建的这个的新对象，否则，返回构造函数中返回的对象。</span><br></pre></td></tr></table></figure><h5 id="2-使用闭包解决，有两层函数可以再第一层使用-this-this改变指向"><a href="#2-使用闭包解决，有两层函数可以再第一层使用-this-this改变指向" class="headerlink" title="2.使用闭包解决，有两层函数可以再第一层使用_this= this改变指向"></a>2.使用闭包解决，有两层函数可以再第一层使用<code>_this= this</code>改变指向</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在这里使用的是闭包的原理 也可以改变this的指向</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="built_in">this</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(_this)  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可执行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _this = <span class="built_in">this</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(_this)</span><br><span class="line">        &#125;()</span><br><span class="line"> &#125;</span><br><span class="line"> fn()</span><br></pre></td></tr></table></figure><h5 id="3-es6的箭头函数-指向外部的this，（）-gt"><a href="#3-es6的箭头函数-指向外部的this，（）-gt" class="headerlink" title="3.es6的箭头函数 指向外部的this，（）=&gt;{} "></a>3.es6的箭头函数 指向外部的this，<code>（）=&gt;&#123;&#125; </code></h5><p><strong>箭头函数的 this 始终指向函数定义时的 this，而非执行时。</strong></p><h3 id="call-apply-bind"><a href="#call-apply-bind" class="headerlink" title="call apply  bind"></a>call apply  bind</h3><blockquote><p>call</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">Object</span> = &#123;</span><br><span class="line">        name: <span class="string">&#x27;Mr.wang&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">first</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">second</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">            &#125;.call(<span class="built_in">Object</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.second()   <span class="comment">//==&gt; 输出为 Mr.wang</span></span><br></pre></td></tr></table></figure><blockquote><p>apply</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">Object</span> = &#123;</span><br><span class="line">        name: <span class="string">&#x27;Mr.wang&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">first</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">second</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">            &#125;.apply(<span class="built_in">Object</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.second()   <span class="comment">//==&gt; 输出为 Mr.wang</span></span><br></pre></td></tr></table></figure><blockquote><p>bind</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">Object</span> = &#123;</span><br><span class="line">        name: <span class="string">&#x27;Mr.wang&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">first</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">second</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">            &#125;.bind(<span class="built_in">Object</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.second()  <span class="comment">//==&gt; 输出为 Mr.wang</span></span><br></pre></td></tr></table></figure><h4 id="apply-和-call-的区别"><a href="#apply-和-call-的区别" class="headerlink" title="apply 和 call 的区别"></a>apply 和 call 的区别</h4><p>他们之间的区别只是传入参数的区别</p><p>appll(this,[a,b,c])</p><p>call(this,a,b,c)</p><p>bind与apply和call有着大的区别</p><p>bind会生成新的函数，需要调用再次调用</p><p>setTimeout会自动调用    </p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> this </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Es6解构赋值</title>
      <link href="2019/05/11/js-Es6%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/"/>
      <url>2019/05/11/js-Es6%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<blockquote><p>阅读阮大大的Es6，获得的变量的结构方法</p><p>地址：<a href="https://es6.ruanyifeng.com/">阮一峰的ES6</a></p></blockquote><span id="more"></span><h2 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a>变量的解构赋值</h2><ol><li>数组的解构赋值</li><li>对象的解构赋值</li><li>字符串的解构赋值</li><li>数值和布尔值的解构赋值</li><li>函数参数的解构赋值</li></ol><h3 id="1数组的解构赋值"><a href="#1数组的解构赋值" class="headerlink" title="1数组的解构赋值"></a>1数组的解构赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// 为abc各自an规律赋值</span></span><br><span class="line"><span class="keyword">let</span> [a,[b,[c]]] = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>]]]  <span class="comment">//如果为嵌套数组，可以用一样的嵌套数组赋值</span></span><br><span class="line"><span class="keyword">let</span> [x,y] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">//如果赋值两边长度不一，，则部分赋值 部分未赋值为uddefined</span></span><br><span class="line"><span class="keyword">let</span> [...arr] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">//扩展运算符可以直接把所有的数字赋值给arr arr=[1,2,3]</span></span><br><span class="line"><span class="keyword">let</span> [first,...arrAll]=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] <span class="comment">//当第一个first赋值以后，其他的数字都会给arrAll包含  first =1 arrAll=[2,3,4]</span></span><br></pre></td></tr></table></figure><h4 id="结构赋值为何左右两边为数组？"><a href="#结构赋值为何左右两边为数组？" class="headerlink" title="结构赋值为何左右两边为数组？"></a>结构赋值为何左右两边为数组？</h4><p>正常的赋值是一个一个赋值，解构赋值是吧需要赋值的解析重构，循环赋值 通过数组可遍历的特性就可以解构</p><h4 id="解构赋值的默认值"><a href="#解构赋值的默认值" class="headerlink" title="解构赋值的默认值"></a>解构赋值的默认值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a=<span class="number">11</span>] = [] <span class="comment">//a输出为11 在赋值之前就已经赋值 解构只是再次赋值 不会冲突 注意点 [] 数组里面无任何值，但是有undefined 所以才会解构成功 ，否则部分赋值也不会实现，以下情况请注意 null与undefined有本质的区别，两者不等，所以赋值时可以成功为null，解构赋值也严格遵守严格运算符（===）</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];<span class="comment">//x = 1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>]; <span class="comment">//x = null</span></span><br></pre></td></tr></table></figure><h3 id="2对象的解构赋值"><a href="#2对象的解构赋值" class="headerlink" title="2对象的解构赋值"></a>2对象的解构赋值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a&#125;=&#123;<span class="attr">a</span>:<span class="string">&#x27;good&#x27;</span>,<span class="attr">b</span>:<span class="string">&#x27;nice&#x27;</span>&#125; <span class="comment">//a = good 对象里不同于数组，它是无序的集合 所以赋值要用见来赋值 两者的键要相同</span></span><br><span class="line"><span class="comment">//如果没有对应的键则会返回undefined</span></span><br><span class="line"><span class="comment">//对象的解构赋值可以对内置对象进行赋值</span></span><br><span class="line"><span class="keyword">let</span>&#123;log,sin,cos&#125; = <span class="built_in">Math</span></span><br><span class="line"><span class="keyword">let</span> &#123;log&#125; = <span class="built_in">console</span></span><br><span class="line"><span class="comment">//当取得所对应的对象的方法时，可以直接调用</span></span><br><span class="line">log(<span class="string">&#x27;hello word&#x27;</span>) <span class="comment">//控制台输出hello word</span></span><br><span class="line">sin(<span class="number">90</span>)  <span class="comment">//输出为 1</span></span><br><span class="line"><span class="keyword">let</span> &#123;a，&#123;b&#125;&#125; = &#123;<span class="attr">a</span>:<span class="number">11</span>,&#123;<span class="attr">b</span>:<span class="number">22</span>&#125;&#125; <span class="comment">//对象一样支持嵌套赋值</span></span><br><span class="line"><span class="keyword">var</span> &#123;x = <span class="number">3</span>&#125; = &#123;&#125;; <span class="comment">//也支持默认值</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">x</span>: y = <span class="number">3</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">5</span>&#125;; <span class="comment">//x与x之间键名对应但不会创建变量 实际变量为y 默认值为3 解构后赋值为5</span></span><br><span class="line"><span class="keyword">let</span> &#123;a,...aa&#125; = &#123;<span class="attr">a</span>:&#123;&#125;,<span class="attr">b</span>:&#123;<span class="attr">a</span>:<span class="number">2</span>&#125;,<span class="attr">c</span>:&#123;<span class="attr">d</span>:<span class="number">4</span>&#125;&#125; <span class="comment">//剩余分配会在...的变量中 aa:&#123;b:&#123;a:2&#125;,c:&#123;d:4&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者。</p><h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;; <span class="comment">//已经声明的变量再解构赋值会报错 ，&#123;x&#125; 会被解析为代码块</span></span><br><span class="line"><span class="comment">//解决方法</span></span><br><span class="line">(&#123;x&#125;=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;); <span class="comment">//括号包裹</span></span><br><span class="line"><span class="comment">//解构赋值允许等号左边的模式之中，不放置任何变量名。因此，可以写出非常古怪的赋值表达式。</span></span><br><span class="line">(&#123;&#125;=&#123;<span class="attr">a</span>:dd&#125;) <span class="comment">//语法可行但毫无意义</span></span><br><span class="line"><span class="comment">//数组也是一种特殊的对象 他是用索引值当键</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span>:first&#125; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="3字符串的解构赋值"><a href="#3字符串的解构赋值" class="headerlink" title="3字符串的解构赋值"></a>3字符串的解构赋值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c,d,e] = <span class="string">&#x27;hello&#x27;</span> <span class="comment">// a=h,b=e,c=l,d=l,e=o  //这是将字符串转化为数组遍历在赋值</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span> : len&#125; = <span class="string">&#x27;hello&#x27;</span>; <span class="comment">//len = 5 // 数组都有length这个键 表示长度</span></span><br></pre></td></tr></table></figure><h3 id="4数值和布尔值的解构赋值"><a href="#4数值和布尔值的解构赋值" class="headerlink" title="4数值和布尔值的解构赋值"></a>4数值和布尔值的解构赋值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="number">123</span>;</span><br><span class="line">s === <span class="built_in">Number</span>.prototype.toString <span class="comment">// true</span></span><br><span class="line"><span class="comment">//数字和布尔类型会转化为对象 所以在s的原型链与赋值的原型链相等 前面的键 toString 是转化为字符串的方法</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="literal">true</span>;</span><br><span class="line">s === <span class="built_in">Boolean</span>.prototype.toString <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 由于ndefined和null无法转为对象 所以不能进行赋值</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: x &#125; = <span class="literal">undefined</span>; <span class="comment">// TypeError</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">prop</span>: y &#125; = <span class="literal">null</span>; <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure><h3 id="5函数参数的解构赋值"><a href="#5函数参数的解构赋值" class="headerlink" title="5函数参数的解构赋值"></a>5函数参数的解构赋值</h3><p>函数的解构赋值我们经常使用 当我们进行传参时 就会进行解构赋值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">//a和b都会在函数调用时传参解构赋值</span></span><br></pre></td></tr></table></figure><p>函数参数的默认值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line">fn(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;); <span class="comment">// [3, 8] </span></span><br><span class="line">fn(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;); <span class="comment">// [3, 0]</span></span><br><span class="line">fn(&#123;&#125;); <span class="comment">// [0, 0]</span></span><br><span class="line">fn(); <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="comment">//如果有默认值,参数没有就使用默认值</span></span><br></pre></td></tr></table></figure><p>另一种函数的默认值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">&#123;x, y&#125; = &#123;x:<span class="number">0</span>,y:<span class="number">0</span>&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line">fn(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;); <span class="comment">// [3, 8] </span></span><br><span class="line">fn(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;); <span class="comment">// [3, undefined]</span></span><br><span class="line">fn(&#123;&#125;); <span class="comment">// [undefined, undefined]</span></span><br><span class="line">fn(); <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="comment">//如果有默认值,参数没有就使用默认值</span></span><br><span class="line"><span class="comment">//这种写法使用了对象的键值对赋值，不是之前的值传递，所以 当参数为&#123;&#125;时 传递的是undefined</span></span><br></pre></td></tr></table></figure><h3 id="圆括号"><a href="#圆括号" class="headerlink" title="圆括号"></a>圆括号</h3><p>圆括号是为了解决赋值时解析的无法辨别，但是要注意使用时机，否则会报错</p><h3 id="6遍历-Map-结构"><a href="#6遍历-Map-结构" class="headerlink" title="6遍历 Map 结构"></a>6遍历 Map 结构</h3><p>任何部署了 Iterator 接口的对象，都可以用<code>for...of</code>循环遍历。Map 结构原生支持 Iterator 接口，配合变量的解构赋值，获取键名和键值就非常方便。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">map.set(<span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&quot; is &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br></pre></td></tr></table></figure><p>如果只想获取键名，或者只想获取键值，可以写成下面这样。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取键名</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取键值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [,value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7输入模块的指定方法"><a href="#7输入模块的指定方法" class="headerlink" title="7输入模块的指定方法"></a>7输入模块的指定方法</h3><p>加载模块时，往往需要指定输入哪些方法。解构赋值使得输入语句非常清晰。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SourceMapConsumer, SourceNode &#125; = <span class="built_in">require</span>(<span class="string">&quot;source-map&quot;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> Es6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>let var const三种定义方式及闭包</title>
      <link href="2019/05/10/js-%E4%B8%89%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E5%8F%8A%E9%97%AD%E5%8C%85/"/>
      <url>2019/05/10/js-%E4%B8%89%E7%A7%8D%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%E5%8F%8A%E9%97%AD%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>介绍js如何定义变量的及闭包的使用</p></blockquote><span id="more"></span><h3 id="let-var-const-之间的区别"><a href="#let-var-const-之间的区别" class="headerlink" title="let var const 之间的区别"></a>let var const 之间的区别</h3><h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><p>var的作用域是根据函数作用域的， 他在函数内起作用   这里就引用到闭包和作用域链</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">out</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">000</span>; <span class="comment">//=&gt; 这个a的作用域作用在out内 而info函数在out函数内 所以可以调用</span></span><br><span class="line">b=<span class="number">222</span> <span class="comment">//=&gt; 报错err 因为b的作用域在info函数内 包裹他的out函数不可以调用它</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">info</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b=<span class="number">999</span>;</span><br><span class="line">a= <span class="number">111</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>var 的变量提升</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a=<span class="number">10</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//变量提升 就是var定义的变量会在先声明再赋值 提升到函数顶部</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  a=<span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><p>let的作用域的块级作用域，不会变量提升  可以理解为在某块范围内作用 与var 的函数作用域不同在于 let的作用域会形成闭包</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出 3 3 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出 0 1 2</span></span><br></pre></td></tr></table></figure><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var会在全局声明 而setTimeout 是一个定时器 也是异步回调  会在同步执行完毕再执行异步 所以当for循环完毕 i=3时调用三次定时器  </span><br><span class="line">let 的作用范围会在for循环内 每循环一次 i会形成一次闭包  i会被setTimeout调用</span><br></pre></td></tr></table></figure><h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><p>const代表一个值的常量索引，常量的值在垃圾回收前永远不能改变，所以需要谨慎使用。</p><p>cosnt定义的值不能被改变 否则会报错</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Uncaught TypeError: Assignment to constant variable.</span><br><span class="line">未捕获的类型错误:赋值给常量变量。</span><br></pre></td></tr></table></figure><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>外部可以访问内部的私有变量</p><p>可以返回携带状态的函数，并且状态隐藏 可以做到变量的私有</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n=<span class="number">999</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(n); <span class="comment">// 999</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，函数f2就被包括在函数f1内部，这时f1内部的所有局部变量，对f2都是可见的。但是反过来就不行，f2内部的局部变量，对f1就是不可见的。这就是Javascript语言特有的”链式作用域”结构（chain scope），子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。</p><p>既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function f1()&#123;</span><br><span class="line">var n&#x3D;999;</span><br><span class="line">function f2()&#123;</span><br><span class="line">alert(n); </span><br><span class="line">&#125;</span><br><span class="line">return f2;</span><br><span class="line">&#125;</span><br><span class="line">var result&#x3D;f1();</span><br><span class="line">result(); &#x2F;&#x2F; 999</span><br></pre></td></tr></table></figure><p>闭包就是能够读取其他函数内部变量的函数</p><p>要形成闭包 必须两层function函数作用域</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function f1()&#123;</span><br><span class="line">  var n&#x3D;999;</span><br><span class="line">  Add&#x3D;function()&#123;n+&#x3D;1&#125;</span><br><span class="line">  function f2()&#123;</span><br><span class="line">  console.log(n)</span><br><span class="line">&#125;</span><br><span class="line">return f2;</span><br><span class="line">&#125;</span><br><span class="line">var result&#x3D;f1();</span><br><span class="line">result(); &#x2F;&#x2F; 999</span><br><span class="line">Add();</span><br><span class="line">result(); &#x2F;&#x2F; 1000</span><br></pre></td></tr></table></figure><p>这里形成闭包后，f1的局部变量n一直保存在内存中，并没有因为f1的重复调用而清除</p><p>原因就在于f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。</p><h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><p>由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</p><p>闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">  name: <span class="string">&quot;My Object&quot;</span>,</span><br><span class="line">  getNameFunc: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">alert(object.getNameFunc()());</span><br></pre></td></tr></table></figure><p>经典闭包题</p><p>个人理解</p><p>object.getNameFunc()  执行到这一步时 调用object内的函数 返回一个function（）{return this.name} 这时候 name还是My Object  当再次执行时object.getNameFunc()()  调用了外部的name 输出为The Window</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>隐藏元素的方法</title>
      <link href="2019/03/22/css-%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A0%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>2019/03/22/css-%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A0%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>利用css对于Dom元素的隐藏</p></blockquote><span id="more"></span><h3 id="隐藏类型"><a href="#隐藏类型" class="headerlink" title="隐藏类型"></a>隐藏类型</h3><blockquote><p>屏幕并不是唯一的输出机制，比如说屏幕上看不见的元素（隐藏的元素），其中一些依然能够被读屏软件阅读出来（因为读屏软件依赖于可访问性树来阐述）。为了消除它们之间的歧义，我们将其归为三大类：</p></blockquote><ul><li>完全隐藏：元素从DOM树中消失，不占据空间。</li><li>视觉上的隐藏：屏幕中不可见，占据空间。</li><li>语义上的隐藏：读屏软件不可读，但正常占据空间。<h4 id="完全隐藏"><a href="#完全隐藏" class="headerlink" title="完全隐藏"></a>完全隐藏</h4></li></ul><h4 id="1-display-属性"><a href="#1-display-属性" class="headerlink" title="1.display 属性"></a>1.<code>display</code> 属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: none;</span><br></pre></td></tr></table></figure><h4 id="2-hidden-属性"><a href="#2-hidden-属性" class="headerlink" title="2.hidden 属性"></a>2.hidden 属性</h4><blockquote><p>HTML5 新增属性，相当于 <code>display: none</code></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hidden</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>视觉上的隐藏,在页面中还存在</p></blockquote><h4 id="3-利用-position-和-盒模型-将元素移出可视区范围"><a href="#3-利用-position-和-盒模型-将元素移出可视区范围" class="headerlink" title="3.利用 position 和 盒模型 将元素移出可视区范围"></a>3.利用 <code>position</code> 和 盒模型 将元素移出可视区范围</h4><blockquote><p>设置 <code>posoition</code> 为 <code>absolute</code> 或 <code>fixed</code>，通过设置 <code>top</code>、<code>left</code> 等值，将其移出可视区域。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>:absolute;</span><br><span class="line"><span class="attribute">left</span>: -<span class="number">999px</span>;</span><br></pre></td></tr></table></figure><blockquote><p>设置 <code>position</code> 为 <code>relative</code>，通过设置 <code>top</code>、<code>left</code> 等值，将其移出可视区域。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">left</span>: -<span class="number">999px</span>;</span><br></pre></td></tr></table></figure><blockquote><p>设置 margin 值，将其移出可视区域范围（可视区域占位）。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">margin-left</span>: -<span class="number">99999px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h4 id="3-利用-transfrom"><a href="#3-利用-transfrom" class="headerlink" title="3.利用 transfrom"></a>3.利用 transfrom</h4><blockquote><p>缩放</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure><blockquote><p>移动 <code>translateX</code>, <code>translateY</code></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">99999px</span>);</span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span></span><br></pre></td></tr></table></figure><blockquote><p>旋转 <code>rotate</code></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">90deg</span>) //直角在界面上形成线性视觉屏蔽</span><br></pre></td></tr></table></figure><h4 id="4-设置其大小为0"><a href="#4-设置其大小为0" class="headerlink" title="4.设置其大小为0"></a>4.设置其大小为0</h4><blockquote><p>宽高为0，字体大小为0：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure><blockquote><p>宽高为0，超出隐藏:</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br></pre></td></tr></table></figure><h4 id="5-设置透明度为0"><a href="#5-设置透明度为0" class="headerlink" title="5.设置透明度为0"></a>5.设置透明度为0</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">opacity</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h4 id="6-visibility属性"><a href="#6-visibility属性" class="headerlink" title="6.visibility属性"></a>6.<code>visibility</code>属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">visibility</span>: hidden;</span><br></pre></td></tr></table></figure><h4 id="7-层级覆盖，z-index-属性"><a href="#7-层级覆盖，z-index-属性" class="headerlink" title="7.层级覆盖，z-index 属性"></a>7.层级覆盖，<code>z-index</code> 属性</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">position</span>: relative;</span><br><span class="line"><span class="attribute">z-index</span>: -<span class="number">999</span>;</span><br></pre></td></tr></table></figure><h5 id="再设置一个层级较高的元素覆盖在此元素上。"><a href="#再设置一个层级较高的元素覆盖在此元素上。" class="headerlink" title="再设置一个层级较高的元素覆盖在此元素上。#####"></a>再设置一个层级较高的元素覆盖在此元素上。#####</h5><h4 id="8-clip-path-裁剪"><a href="#8-clip-path-裁剪" class="headerlink" title="8.clip-path 裁剪"></a>8.clip-path 裁剪</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><strong>语义上的隐藏</strong></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单轮播图原理解析</title>
      <link href="2019/03/12/js-%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
      <url>2019/03/12/js-%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<blockquote><p>关于轮播图操作Dom的部分函数</p></blockquote><span id="more"></span><h3 id="部分简单轮播图函数解析"><a href="#部分简单轮播图函数解析" class="headerlink" title="部分简单轮播图函数解析"></a>部分简单轮播图函数解析</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动画函数 animate 版本1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>element   动画元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>target    动画目标值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>step      动画步长(可选参数)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params">element, target, step</span>) </span>&#123;</span><br><span class="line">    step = step || <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> current = element.offsetLeft;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        current += current &lt; target ? step : -step;</span><br><span class="line">        element.style.left = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(target - current) &lt;= step) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">            element.style.left = target + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动画函数 animate 版本2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>element   动画元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>target    动画目标值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_v2</span>(<span class="params">element, target</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> current = element.offsetLeft;</span><br><span class="line">        <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">        step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">        current += step;</span><br><span class="line">        element.style.left = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (target === current) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">240</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动画函数 animate 版本3 宽度动画</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>element   动画元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>target    动画目标值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_v3</span>(<span class="params">element, target</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">/* 改变 v3.1 →: 获取盒子宽度  */</span></span><br><span class="line">        <span class="keyword">var</span> current = element.offsetWidth;</span><br><span class="line">        <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">        step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">        current += step;</span><br><span class="line">        <span class="comment">/* 改变 v3.2 →: 设置宽度样式  */</span></span><br><span class="line">        element.style.width = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (target === current) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动画函数 animate_v4  任意单位为px的属性能发生变化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>element       动画元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>attr          动画属性</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>target        动画目标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 改变 v4.1 →: 多了一个 attr 参数代表属性  */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_v4</span>(<span class="params">element, attr, target</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">/* 改变 v4.2 →: 根据传进来的属性获取当前样式值  */</span></span><br><span class="line">        <span class="keyword">var</span> current = <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">        <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">        step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">        current += step;</span><br><span class="line">        <span class="comment">/* 改变 v4.3 →: 根据属性设置样式   */</span></span><br><span class="line">        element.style[attr] = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (target === current) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 改变 v5.1 →: 参数变成样式对象 styleObj  */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_v5</span>(<span class="params">element, styleObj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">/* 1. 立 flag，假设要清除 */</span></span><br><span class="line">        <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">/* 改变 v5.2 →: 遍历样式对象   */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> styleObj) &#123;</span><br><span class="line">            <span class="comment">/* 改变 v5.3 →: 根据属性名，获取目标值  */</span></span><br><span class="line">            <span class="keyword">var</span> target = styleObj[attr];</span><br><span class="line">            <span class="keyword">var</span> current = <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">            <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">            step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">            current += step;</span><br><span class="line">            element.style[attr] = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            <span class="comment">/* 2. 改 flag，假设不成立，修改成 假 */</span></span><br><span class="line">            <span class="keyword">if</span> (target !== current) &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 3. 用 flag，循环结束后判断 flag 的值是真还是假 */</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * v8    层级不做动画，透明度，px 有动画效果</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">element</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">styleObj</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_v8</span>(<span class="params">element, styleObj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> styleObj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (attr === <span class="string">&#x27;zIndex&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> target = styleObj[attr];</span><br><span class="line">                element.style[attr] = target;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attr === <span class="string">&#x27;opacity&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">/* v6.1 在数据的源头，把&lt;目标值&gt;和&lt;当前值&gt;乘 100 处理成&lt;整数&gt; */</span></span><br><span class="line">                <span class="keyword">var</span> target = <span class="number">100</span> * styleObj[attr];</span><br><span class="line">                <span class="keyword">var</span> current = <span class="number">100</span> * <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">                <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">                <span class="comment">/* 取整为什么会出问题？数据的源头是小数，直接处理数据源头 */</span></span><br><span class="line">                step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">                current += step;</span><br><span class="line">                <span class="comment">/* v6.2 单位设置，不要 px 单位，除 100 变回小数 */</span></span><br><span class="line">                element.style[attr] = current / <span class="number">100</span>;</span><br><span class="line">                <span class="keyword">if</span> (target !== current) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">/* 改变 v5.3 →: 根据属性名，获取目标值  */</span></span><br><span class="line">                <span class="keyword">var</span> target = styleObj[attr];</span><br><span class="line">                <span class="keyword">var</span> current = <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">                <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">                step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">                current += step;</span><br><span class="line">                element.style[attr] = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                <span class="comment">/* 2. 改 flag，假设不成立，修改成 假 */</span></span><br><span class="line">                <span class="keyword">if</span> (target !== current) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 3. 用 flag，循环结束后判断 flag 的值是真还是假 */</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* vX.1 开放新的参数：动画回调函数 fn */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate_vX</span>(<span class="params">element, styleObj, fn</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">    element.timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> styleObj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (attr === <span class="string">&#x27;zIndex&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> target = styleObj[attr];</span><br><span class="line">                element.style[attr] = target;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (attr === <span class="string">&#x27;opacity&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">/* v6.1 在数据的源头，把&lt;目标值&gt;和&lt;当前值&gt;乘 100 处理成&lt;整数&gt; */</span></span><br><span class="line">                <span class="keyword">var</span> target = <span class="number">100</span> * styleObj[attr];</span><br><span class="line">                <span class="keyword">var</span> current = <span class="number">100</span> * <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">                <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">                <span class="comment">/* 取整为什么会出问题？数据的源头是小数，直接处理数据源头 */</span></span><br><span class="line">                step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">                current += step;</span><br><span class="line">                <span class="comment">/* v6.2 单位设置，不要 px 单位，除 100 变回小数 */</span></span><br><span class="line">                element.style[attr] = current / <span class="number">100</span>;</span><br><span class="line">                <span class="keyword">if</span> (target !== current) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">/* 改变 v5.3 →: 根据属性名，获取目标值  */</span></span><br><span class="line">                <span class="keyword">var</span> target = styleObj[attr];</span><br><span class="line">                <span class="keyword">var</span> current = <span class="built_in">parseFloat</span>(getComputedStyle(element)[attr]);</span><br><span class="line">                <span class="keyword">var</span> step = (target - current) / <span class="number">10</span>;</span><br><span class="line">                step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step);</span><br><span class="line">                current += step;</span><br><span class="line">                element.style[attr] = current + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                <span class="comment">/* 2. 改 flag，假设不成立，修改成 假 */</span></span><br><span class="line">                <span class="keyword">if</span> (target !== current) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 3. 用 flag，循环结束后判断 flag 的值是真还是假 */</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(element.timer);</span><br><span class="line">            <span class="comment">/* vX.2 动画结束后，调用函数 */</span></span><br><span class="line">            <span class="comment">// if (fn) &#123;</span></span><br><span class="line">            <span class="comment">//     fn();</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *    ||      找真，如果前面假，后面就是真，执行后面代码</span></span><br><span class="line"><span class="comment">             *    &amp;&amp;      找假，如果前面真，后面就是假，执行后面代码</span></span><br><span class="line"><span class="comment">             **/</span></span><br><span class="line">            fn &amp;&amp; fn();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ajax请求</title>
      <link href="2019/01/10/ajax-ajax%E8%AF%B7%E6%B1%82/"/>
      <url>2019/01/10/ajax-ajax%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<blockquote><p>AJAX 的基本请求方式</p></blockquote><span id="more"></span><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p>一种异步数据交互技术</p><p>解决的问题： 提高用户的体验</p><p>现在开发里面，使用 ajax 实现前后端的完全分离开发</p><p>ajax 使用的四个步骤</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 创建异步对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">// 2 指定请求的方式和请求的地址</span></span><br><span class="line">xhr.open(请求方式, 目标地址);</span><br><span class="line"><span class="comment">// 3 发送请求</span></span><br><span class="line">xhr.send();</span><br><span class="line"><span class="comment">// 4 注册状态变化的监听(事件)</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 关注最终的结果</span></span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">//把响应体获取</span></span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>异步对象的 readyState 属性，是一个从 0-4 不断变化的数字，每个数字代表一个状态，我们只需要大概了解一下，关心最终的结果就可以了</p><h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><blockquote><p>基本用法</p></blockquote><h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch(url).then(<span class="function"><span class="params">res</span>=&gt;</span>res.json()).then(<span class="function"><span class="params">data</span>=&gt;</span><span class="built_in">console</span>.log(data))</span><br></pre></td></tr></table></figure><h3 id="配置Fetch请求"><a href="#配置Fetch请求" class="headerlink" title="配置Fetch请求"></a>配置Fetch请求</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch(url, &#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// *GET, POST, PUT, DELETE, etc.</span></span><br><span class="line">    mode: <span class="string">&#x27;cors&#x27;</span>, <span class="comment">// no-cors, *cors, same-origin</span></span><br><span class="line">    cache: <span class="string">&#x27;no-cache&#x27;</span>, <span class="comment">// *default, no-cache, reload, force-cache, only-if-cached</span></span><br><span class="line">    credentials: <span class="string">&#x27;same-origin&#x27;</span>, <span class="comment">// include(含cookie), *same-origin, omit</span></span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">      <span class="comment">// &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    redirect: <span class="string">&#x27;follow&#x27;</span>, <span class="comment">// manual, *follow, error</span></span><br><span class="line">    referrerPolicy: <span class="string">&#x27;no-referrer&#x27;</span>, <span class="comment">// no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url</span></span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(data) <span class="comment">// body data type must match &quot;Content-Type&quot; header</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><blockquote><p>备注： 当请求使用 credentials: ‘include’ 时，响应的 Access-Control-Allow-Origin 不能使用通配符 “*”。在这种情况下，Access-Control-Allow-Origin 必须是当前请求的源，在使用 CORS Unblock 插件的情况下请求仍会失败。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ajax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> ajax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BFC协议</title>
      <link href="2018/12/30/css-BFC%E5%8D%8F%E8%AE%AE/"/>
      <url>2018/12/30/css-BFC%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>html盒子模型的BFC规则，如何创建BFC</p></blockquote><span id="more"></span><h3 id="什么是BFC？BFC的布局规则是什么？如何创建BFC？"><a href="#什么是BFC？BFC的布局规则是什么？如何创建BFC？" class="headerlink" title="什么是BFC？BFC的布局规则是什么？如何创建BFC？"></a>什么是BFC？BFC的布局规则是什么？如何创建BFC？</h3><p><strong>查看解析</strong></p><ul><li><p>Box 是 CSS 布局的对象和基本单位，页面是由若干个Box组成的。</p></li><li><p>元素的类型 和 <code>display</code> 属性，决定了这个 Box 的类型。不同类型的 Box 会参与不同的 Formatting Context。</p><blockquote><h4 id="Formatting-Context"><a href="#Formatting-Context" class="headerlink" title="Formatting Context"></a>Formatting Context</h4></blockquote></li><li><p>Formatting Context 是页面的一块渲染区域，并且有一套渲染规则，决定了其子元素将如何定位，以及和其它元素的关系和相互作用。</p></li><li><p>Formatting Context 有 BFC (Block formatting context)，IFC (Inline formatting context)，FFC (Flex formatting context) 和 GFC (Grid formatting context)。FFC 和 GFC 为 CC3 中新增。</p></li></ul><h3 id="BFC布局规则"><a href="#BFC布局规则" class="headerlink" title="BFC布局规则"></a><a href="https://link.juejin.im/?target=https://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html%23block-formatting">BFC布局规则</a></h3><ul><li>BFC内，盒子依次垂直排列。</li><li>BFC内，两个盒子的垂直距离由 <code>margin</code> 属性决定。属于同一个BFC的两个相邻Box的margin会发生重叠【符合合并原则的margin合并后是使用大的margin】</li><li>BFC内，每个盒子的左外边缘接触内部盒子的左边缘（对于从右到左的格式，右边缘接触）。即使在存在浮动的情况下也是如此。除非创建新的BFC。</li><li>BFC的区域不会与float box重叠。</li><li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li><li>计算BFC的高度时，浮动元素也参与计算。</li></ul><h3 id="如何创建BFC"><a href="#如何创建BFC" class="headerlink" title="如何创建BFC"></a>如何创建BFC</h3><h4 id="根元素"><a href="#根元素" class="headerlink" title="根元素##"></a>根元素##</h4><ul><li>浮动元素（float 属性不为 none）</li><li>position 为 absolute 或 fixed</li><li>overflow 不为 visible 的块元素</li><li>display 为 inline-block, table-cell, table-caption</li></ul><h4 id="BFC-的应用"><a href="#BFC-的应用" class="headerlink" title="BFC 的应用"></a>BFC 的应用</h4><ul><li>防止 margin  重叠 (同一个BFC内的两个两个相邻Box的 <code>margin</code> 会发生重叠，触发生成两个BFC，即不会重叠)</li><li>清除内部浮动 (创建一个新的 BFC，因为根据 BFC 的规则，计算 BFC 的高度时，浮动元素也参与计算)</li><li>自适应多栏布局 (BFC的区域不会与float box重叠。因此，可以触发生成一个新的BFC)</li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>盒子居中的方法</title>
      <link href="2018/12/20/css-%E7%9B%92%E5%AD%90%E5%B1%85%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/"/>
      <url>2018/12/20/css-%E7%9B%92%E5%AD%90%E5%B1%85%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<blockquote><p>html关于css的居中布局方式</p></blockquote><span id="more"></span><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h3 id="盒子居中的方法："><a href="#盒子居中的方法：" class="headerlink" title="盒子居中的方法："></a>盒子居中的方法：</h3><h5 id="1-宽度和高度已知的。"><a href="#1-宽度和高度已知的。" class="headerlink" title="1.宽度和高度已知的。"></a>1.宽度和高度已知的。</h5><p>思路：<br>  父元素相对定位<br>  子元素绝对定位 </p><p>子元素{</p><p>left: 50%;top: 50%;<br>margin-left: 减去子元素的宽度一半。<br>margin-top: 减去子元素的高度一半；</p><p>}</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        <span class="selector-id">#box</span>&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">background</span>: red; //方便观看</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#box1</span>&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">margin-left</span>: -<span class="number">100px</span>;  //定位后偏移值超过子元素的宽度一半需减去</span><br><span class="line">            <span class="attribute">margin-top</span>: -<span class="number">50px</span>;//定位后偏移值超过子元素的高度一半需减去</span><br><span class="line">            <span class="attribute">background</span>: green;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h5 id="2-宽度和高度可以随意改变"><a href="#2-宽度和高度可以随意改变" class="headerlink" title="2.宽度和高度可以随意改变"></a>2.宽度和高度可以随意改变</h5><p>思路：<br>  父元素相对定位<br>  子元素绝对定位 </p><p>子元素{</p><p>left: 0;top: 0; bottom:0;right:0;</p><p>margin:auto;</p><p>}</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span>&#123;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">     <span class="attribute">position</span>: relative;</span><br><span class="line">     <span class="attribute">background</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="selector-id">#box1</span>&#123;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">     <span class="attribute">position</span>: absolute;//四个方位定义盒子所在的位置 当所有为<span class="number">0</span>&amp;&amp;<span class="attribute">margin</span>:auto时,盒子居中 </span><br><span class="line">     top: <span class="number">0</span>;</span><br><span class="line">     <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">     <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">     <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">     <span class="attribute">margin</span>: auto;</span><br><span class="line">     <span class="attribute">background</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-flex布局"><a href="#3-flex布局" class="headerlink" title="3.flex布局"></a>3.flex布局</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">           <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">           <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">           <span class="attribute">background</span>: <span class="number">#f99</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="selector-class">.box1</span>&#123;</span><br><span class="line">           <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">           <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">           <span class="attribute">background</span>: green;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="selector-class">.center</span>&#123;</span><br><span class="line">           <span class="attribute">display</span>: flex;  //开启弹性盒子 主轴侧轴交叉得到居中</span><br><span class="line">           <span class="attribute">justify-content</span>: center;//实现水平居中</span><br><span class="line">           <span class="attribute">align-items</span>: center;//实现垂直居中</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><h5 id="4-平移-定位-transform"><a href="#4-平移-定位-transform" class="headerlink" title="4.平移 定位+transform"></a>4.平移 定位+transform</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent_box</span>&#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">background</span>: red;</span><br><span class="line">          <span class="attribute">position</span>: relative;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.child_box</span>&#123;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">          <span class="attribute">background</span>: green;</span><br><span class="line">          <span class="attribute">position</span>: absolute;//与第一个类似 但可以根据子元素的宽高自动居中</span><br><span class="line">          <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">          <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">          <span class="attribute">transform</span>: <span class="built_in">translate</span>( -<span class="number">50%</span>,-<span class="number">50%</span>);//平移相当于盒子<span class="attribute">margin</span>(左,上)减半</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
